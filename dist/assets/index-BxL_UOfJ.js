(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Fu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function sC(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Mh={exports:{}},ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function oC(){if(Jv)return ba;Jv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:o}}return ba.Fragment=e,ba.jsx=t,ba.jsxs=t,ba}var Qv;function aC(){return Qv||(Qv=1,Mh.exports=oC()),Mh.exports}var w=aC(),Oh={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function lC(){if(Xv)return ge;Xv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function T(A,q,Z){this.props=A,this.context=q,this.refs=E,this.updater=Z||b}T.prototype.isReactComponent={},T.prototype.setState=function(A,q){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,q,"setState")},T.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=T.prototype;function N(A,q,Z){this.props=A,this.context=q,this.refs=E,this.updater=Z||b}var O=N.prototype=new C;O.constructor=N,x(O,T.prototype),O.isPureReactComponent=!0;var V=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function Y(A,q,Z,Q,ie,Ce){return Z=Ce.ref,{$$typeof:n,type:A,key:q,ref:Z!==void 0?Z:null,props:Ce}}function J(A,q){return Y(A.type,q,void 0,void 0,void 0,A.props)}function le(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function ke(A){var q={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Z){return q[Z]})}var ot=/\/+/g;function Fe(A,q){return typeof A=="object"&&A!==null&&A.key!=null?ke(""+A.key):q.toString(36)}function on(){}function ue(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(on,on):(A.status="pending",A.then(function(q){A.status==="pending"&&(A.status="fulfilled",A.value=q)},function(q){A.status==="pending"&&(A.status="rejected",A.reason=q)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function pe(A,q,Z,Q,ie){var Ce=typeof A;(Ce==="undefined"||Ce==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(Ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case n:case e:he=!0;break;case m:return he=A._init,pe(he(A._payload),q,Z,Q,ie)}}if(he)return ie=ie(A),he=Q===""?"."+Fe(A,0):Q,V(ie)?(Z="",he!=null&&(Z=he.replace(ot,"$&/")+"/"),pe(ie,q,Z,"",function(xr){return xr})):ie!=null&&(le(ie)&&(ie=J(ie,Z+(ie.key==null||A&&A.key===ie.key?"":(""+ie.key).replace(ot,"$&/")+"/")+he)),q.push(ie)),1;he=0;var Ft=Q===""?".":Q+":";if(V(A))for(var Ie=0;Ie<A.length;Ie++)Q=A[Ie],Ce=Ft+Fe(Q,Ie),he+=pe(Q,q,Z,Ce,ie);else if(Ie=v(A),typeof Ie=="function")for(A=Ie.call(A),Ie=0;!(Q=A.next()).done;)Q=Q.value,Ce=Ft+Fe(Q,Ie++),he+=pe(Q,q,Z,Ce,ie);else if(Ce==="object"){if(typeof A.then=="function")return pe(ue(A),q,Z,Q,ie);throw q=String(A),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return he}function P(A,q,Z){if(A==null)return A;var Q=[],ie=0;return pe(A,Q,"","",function(Ce){return q.call(Z,Ce,ie++)}),Q}function W(A){if(A._status===-1){var q=A._result;q=q(),q.then(function(Z){(A._status===0||A._status===-1)&&(A._status=1,A._result=Z)},function(Z){(A._status===0||A._status===-1)&&(A._status=2,A._result=Z)}),A._status===-1&&(A._status=0,A._result=q)}if(A._status===1)return A._result.default;throw A._result}var ae=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Le(){}return ge.Children={map:P,forEach:function(A,q,Z){P(A,function(){q.apply(this,arguments)},Z)},count:function(A){var q=0;return P(A,function(){q++}),q},toArray:function(A){return P(A,function(q){return q})||[]},only:function(A){if(!le(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ge.Component=T,ge.Fragment=t,ge.Profiler=s,ge.PureComponent=N,ge.StrictMode=r,ge.Suspense=f,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,ge.__COMPILER_RUNTIME={__proto__:null,c:function(A){return U.H.useMemoCache(A)}},ge.cache=function(A){return function(){return A.apply(null,arguments)}},ge.cloneElement=function(A,q,Z){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Q=x({},A.props),ie=A.key,Ce=void 0;if(q!=null)for(he in q.ref!==void 0&&(Ce=void 0),q.key!==void 0&&(ie=""+q.key),q)!G.call(q,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&q.ref===void 0||(Q[he]=q[he]);var he=arguments.length-2;if(he===1)Q.children=Z;else if(1<he){for(var Ft=Array(he),Ie=0;Ie<he;Ie++)Ft[Ie]=arguments[Ie+2];Q.children=Ft}return Y(A.type,ie,void 0,void 0,Ce,Q)},ge.createContext=function(A){return A={$$typeof:l,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},ge.createElement=function(A,q,Z){var Q,ie={},Ce=null;if(q!=null)for(Q in q.key!==void 0&&(Ce=""+q.key),q)G.call(q,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ie[Q]=q[Q]);var he=arguments.length-2;if(he===1)ie.children=Z;else if(1<he){for(var Ft=Array(he),Ie=0;Ie<he;Ie++)Ft[Ie]=arguments[Ie+2];ie.children=Ft}if(A&&A.defaultProps)for(Q in he=A.defaultProps,he)ie[Q]===void 0&&(ie[Q]=he[Q]);return Y(A,Ce,void 0,void 0,null,ie)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(A){return{$$typeof:u,render:A}},ge.isValidElement=le,ge.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:W}},ge.memo=function(A,q){return{$$typeof:h,type:A,compare:q===void 0?null:q}},ge.startTransition=function(A){var q=U.T,Z={};U.T=Z;try{var Q=A(),ie=U.S;ie!==null&&ie(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Le,ae)}catch(Ce){ae(Ce)}finally{U.T=q}},ge.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},ge.use=function(A){return U.H.use(A)},ge.useActionState=function(A,q,Z){return U.H.useActionState(A,q,Z)},ge.useCallback=function(A,q){return U.H.useCallback(A,q)},ge.useContext=function(A){return U.H.useContext(A)},ge.useDebugValue=function(){},ge.useDeferredValue=function(A,q){return U.H.useDeferredValue(A,q)},ge.useEffect=function(A,q,Z){var Q=U.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(A,q)},ge.useId=function(){return U.H.useId()},ge.useImperativeHandle=function(A,q,Z){return U.H.useImperativeHandle(A,q,Z)},ge.useInsertionEffect=function(A,q){return U.H.useInsertionEffect(A,q)},ge.useLayoutEffect=function(A,q){return U.H.useLayoutEffect(A,q)},ge.useMemo=function(A,q){return U.H.useMemo(A,q)},ge.useOptimistic=function(A,q){return U.H.useOptimistic(A,q)},ge.useReducer=function(A,q,Z){return U.H.useReducer(A,q,Z)},ge.useRef=function(A){return U.H.useRef(A)},ge.useState=function(A){return U.H.useState(A)},ge.useSyncExternalStore=function(A,q,Z){return U.H.useSyncExternalStore(A,q,Z)},ge.useTransition=function(){return U.H.useTransition()},ge.version="19.1.1",ge}var Zv;function il(){return Zv||(Zv=1,Oh.exports=lC()),Oh.exports}var R=il();const _n=Fu(R);var Nh={exports:{}},xa={},Rh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function cC(){return eb||(eb=1,function(n){function e(P,W){var ae=P.length;P.push(W);e:for(;0<ae;){var Le=ae-1>>>1,A=P[Le];if(0<s(A,W))P[Le]=W,P[ae]=A,ae=Le;else break e}}function t(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],ae=P.pop();if(ae!==W){P[0]=ae;e:for(var Le=0,A=P.length,q=A>>>1;Le<q;){var Z=2*(Le+1)-1,Q=P[Z],ie=Z+1,Ce=P[ie];if(0>s(Q,ae))ie<A&&0>s(Ce,Q)?(P[Le]=Ce,P[ie]=ae,Le=ie):(P[Le]=Q,P[Z]=ae,Le=Z);else if(ie<A&&0>s(Ce,ae))P[Le]=Ce,P[ie]=ae,Le=ie;else break e}}return W}function s(P,W){var ae=P.sortIndex-W.sortIndex;return ae!==0?ae:P.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],h=[],m=1,y=null,v=3,b=!1,x=!1,E=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function V(P){for(var W=t(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=P)r(h),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(h)}}function U(P){if(E=!1,V(P),!x)if(t(f)!==null)x=!0,G||(G=!0,Fe());else{var W=t(h);W!==null&&pe(U,W.startTime-P)}}var G=!1,Y=-1,J=5,le=-1;function ke(){return T?!0:!(n.unstable_now()-le<J)}function ot(){if(T=!1,G){var P=n.unstable_now();le=P;var W=!0;try{e:{x=!1,E&&(E=!1,N(Y),Y=-1),b=!0;var ae=v;try{t:{for(V(P),y=t(f);y!==null&&!(y.expirationTime>P&&ke());){var Le=y.callback;if(typeof Le=="function"){y.callback=null,v=y.priorityLevel;var A=Le(y.expirationTime<=P);if(P=n.unstable_now(),typeof A=="function"){y.callback=A,V(P),W=!0;break t}y===t(f)&&r(f),V(P)}else r(f);y=t(f)}if(y!==null)W=!0;else{var q=t(h);q!==null&&pe(U,q.startTime-P),W=!1}}break e}finally{y=null,v=ae,b=!1}W=void 0}}finally{W?Fe():G=!1}}}var Fe;if(typeof O=="function")Fe=function(){O(ot)};else if(typeof MessageChannel<"u"){var on=new MessageChannel,ue=on.port2;on.port1.onmessage=ot,Fe=function(){ue.postMessage(null)}}else Fe=function(){C(ot,0)};function pe(P,W){Y=C(function(){P(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(P){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var ae=v;v=W;try{return P()}finally{v=ae}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ae=v;v=P;try{return W()}finally{v=ae}},n.unstable_scheduleCallback=function(P,W,ae){var Le=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Le+ae:Le):ae=Le,P){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ae+A,P={id:m++,callback:W,priorityLevel:P,startTime:ae,expirationTime:A,sortIndex:-1},ae>Le?(P.sortIndex=ae,e(h,P),t(f)===null&&P===t(h)&&(E?(N(Y),Y=-1):E=!0,pe(U,ae-Le))):(P.sortIndex=A,e(f,P),x||b||(x=!0,G||(G=!0,Fe()))),P},n.unstable_shouldYield=ke,n.unstable_wrapCallback=function(P){var W=v;return function(){var ae=v;v=W;try{return P.apply(this,arguments)}finally{v=ae}}}}(Dh)),Dh}var tb;function uC(){return tb||(tb=1,Rh.exports=cC()),Rh.exports}var jh={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function dC(){if(nb)return At;nb=1;var n=il();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:f,containerInfo:h,implementation:m}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,At.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},At.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},At.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},At.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},At.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,y=u(m,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):m==="script"&&r.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},At.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},At.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=u(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},At.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},At.requestFormReset=function(f){r.d.r(f)},At.unstable_batchedUpdates=function(f,h){return f(h)},At.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},At.useFormStatus=function(){return l.H.useHostTransitionStatus()},At.version="19.1.1",At}var rb;function dx(){if(rb)return jh.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jh.exports=dC(),jh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function fC(){if(ib)return xa;ib=1;var n=uC(),e=il(),t=dx();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,d=a;;){var p=c.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===c)return u(p),i;if(g===d)return u(p),a;g=g.sibling}throw Error(r(188))}if(c.return!==d.return)c=p,d=g;else{for(var S=!1,k=p.child;k;){if(k===c){S=!0,c=p,d=g;break}if(k===d){S=!0,d=p,c=g;break}k=k.sibling}if(!S){for(k=g.child;k;){if(k===c){S=!0,c=g,d=p;break}if(k===d){S=!0,d=g,c=p;break}k=k.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function h(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=h(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),ke=Symbol.for("react.memo_cache_sentinel"),ot=Symbol.iterator;function Fe(i){return i===null||typeof i!="object"?null:(i=ot&&i[ot]||i["@@iterator"],typeof i=="function"?i:null)}var on=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===on?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case U:return"Suspense";case G:return"SuspenseList";case le:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case O:return(i.displayName||"Context")+".Provider";case N:return(i._context.displayName||"Context")+".Consumer";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Y:return a=i.displayName||null,a!==null?a:ue(i.type)||"Memo";case J:a=i._payload,i=i._init;try{return ue(i(a))}catch{}}return null}var pe=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Le=[],A=-1;function q(i){return{current:i}}function Z(i){0>A||(i.current=Le[A],Le[A]=null,A--)}function Q(i,a){A++,Le[A]=i.current,i.current=a}var ie=q(null),Ce=q(null),he=q(null),Ft=q(null);function Ie(i,a){switch(Q(he,a),Q(Ce,i),Q(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?kv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=kv(a),i=Tv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(ie),Q(ie,i)}function xr(){Z(ie),Z(Ce),Z(he)}function hd(i){i.memoizedState!==null&&Q(Ft,i);var a=ie.current,c=Tv(a,i.type);a!==c&&(Q(Ce,i),Q(ie,c))}function ml(i){Ce.current===i&&(Z(ie),Z(Ce)),Ft.current===i&&(Z(Ft),pa._currentValue=ae)}var pd=Object.prototype.hasOwnProperty,md=n.unstable_scheduleCallback,gd=n.unstable_cancelCallback,BE=n.unstable_shouldYield,UE=n.unstable_requestPaint,Nn=n.unstable_now,PE=n.unstable_getCurrentPriorityLevel,ig=n.unstable_ImmediatePriority,sg=n.unstable_UserBlockingPriority,gl=n.unstable_NormalPriority,HE=n.unstable_LowPriority,og=n.unstable_IdlePriority,IE=n.log,$E=n.unstable_setDisableYieldValue,wo=null,Gt=null;function Sr(i){if(typeof IE=="function"&&$E(i),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(wo,i)}catch{}}var Yt=Math.clz32?Math.clz32:KE,qE=Math.log,VE=Math.LN2;function KE(i){return i>>>=0,i===0?32:31-(qE(i)/VE|0)|0}var yl=256,vl=4194304;function hi(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function bl(i,a,c){var d=i.pendingLanes;if(d===0)return 0;var p=0,g=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var k=d&134217727;return k!==0?(d=k&~g,d!==0?p=hi(d):(S&=k,S!==0?p=hi(S):c||(c=k&~i,c!==0&&(p=hi(c))))):(k=d&~g,k!==0?p=hi(k):S!==0?p=hi(S):c||(c=d&~i,c!==0&&(p=hi(c)))),p===0?0:a!==0&&a!==p&&(a&g)===0&&(g=p&-p,c=a&-a,g>=c||g===32&&(c&4194048)!==0)?a:p}function Eo(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function FE(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ag(){var i=yl;return yl<<=1,(yl&4194048)===0&&(yl=256),i}function lg(){var i=vl;return vl<<=1,(vl&62914560)===0&&(vl=4194304),i}function yd(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function ko(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function GE(i,a,c,d,p,g){var S=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var k=i.entanglements,_=i.expirationTimes,L=i.hiddenUpdates;for(c=S&~c;0<c;){var H=31-Yt(c),$=1<<H;k[H]=0,_[H]=-1;var z=L[H];if(z!==null)for(L[H]=null,H=0;H<z.length;H++){var B=z[H];B!==null&&(B.lane&=-536870913)}c&=~$}d!==0&&cg(i,d,0),g!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=g&~(S&~a))}function cg(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Yt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|c&4194090}function ug(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var d=31-Yt(c),p=1<<d;p&a|i[d]&a&&(i[d]|=a),c&=~p}}function vd(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function bd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function dg(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:Vv(i.type))}function YE(i,a){var c=W.p;try{return W.p=i,a()}finally{W.p=c}}var wr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+wr,Ut="__reactProps$"+wr,ns="__reactContainer$"+wr,xd="__reactEvents$"+wr,WE="__reactListeners$"+wr,JE="__reactHandles$"+wr,fg="__reactResources$"+wr,To="__reactMarker$"+wr;function Sd(i){delete i[Ct],delete i[Ut],delete i[xd],delete i[WE],delete i[JE]}function rs(i){var a=i[Ct];if(a)return a;for(var c=i.parentNode;c;){if(a=c[ns]||c[Ct]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Mv(i);i!==null;){if(c=i[Ct])return c;i=Mv(i)}return a}i=c,c=i.parentNode}return null}function is(i){if(i=i[Ct]||i[ns]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Co(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ss(i){var a=i[fg];return a||(a=i[fg]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ut(i){i[To]=!0}var hg=new Set,pg={};function pi(i,a){as(i,a),as(i+"Capture",a)}function as(i,a){for(pg[i]=a,i=0;i<a.length;i++)hg.add(a[i])}var QE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mg={},gg={};function XE(i){return pd.call(gg,i)?!0:pd.call(mg,i)?!1:QE.test(i)?gg[i]=!0:(mg[i]=!0,!1)}function xl(i,a,c){if(XE(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function Sl(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function Kn(i,a,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+d)}}var wd,yg;function ls(i){if(wd===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);wd=a&&a[1]||"",yg=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wd+i+yg}var Ed=!1;function kd(i,a){if(!i||Ed)return"";Ed=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(B){var z=B}Reflect.construct(i,[],$)}else{try{$.call()}catch(B){z=B}i.call($.prototype)}}else{try{throw Error()}catch(B){z=B}($=i())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),S=g[0],k=g[1];if(S&&k){var _=S.split(`
`),L=k.split(`
`);for(p=d=0;d<_.length&&!_[d].includes("DetermineComponentFrameRoot");)d++;for(;p<L.length&&!L[p].includes("DetermineComponentFrameRoot");)p++;if(d===_.length||p===L.length)for(d=_.length-1,p=L.length-1;1<=d&&0<=p&&_[d]!==L[p];)p--;for(;1<=d&&0<=p;d--,p--)if(_[d]!==L[p]){if(d!==1||p!==1)do if(d--,p--,0>p||_[d]!==L[p]){var H=`
`+_[d].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=d&&0<=p);break}}}finally{Ed=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ls(c):""}function ZE(i){switch(i.tag){case 26:case 27:case 5:return ls(i.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 15:return kd(i.type,!1);case 11:return kd(i.type.render,!1);case 1:return kd(i.type,!0);case 31:return ls("Activity");default:return""}}function vg(i){try{var a="";do a+=ZE(i),i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function an(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function bg(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ek(i){var a=bg(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,g=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(S){d=""+S,g.call(this,S)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function wl(i){i._valueTracker||(i._valueTracker=ek(i))}function xg(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return i&&(d=bg(i)?i.checked?"true":"false":i.value),i=d,i!==c?(a.setValue(i),!0):!1}function El(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var tk=/[\n"\\]/g;function ln(i){return i.replace(tk,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Td(i,a,c,d,p,g,S,k){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+an(a)):i.value!==""+an(a)&&(i.value=""+an(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Cd(i,S,an(a)):c!=null?Cd(i,S,an(c)):d!=null&&i.removeAttribute("value"),p==null&&g!=null&&(i.defaultChecked=!!g),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+an(k):i.removeAttribute("name")}function Sg(i,a,c,d,p,g,S,k){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||c!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;c=c!=null?""+an(c):"",a=a!=null?""+an(a):c,k||a===i.value||(i.value=a),i.defaultValue=a}d=d??p,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=k?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function Cd(i,a,c){a==="number"&&El(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function cs(i,a,c,d){if(i=i.options,a){a={};for(var p=0;p<c.length;p++)a["$"+c[p]]=!0;for(c=0;c<i.length;c++)p=a.hasOwnProperty("$"+i[c].value),i[c].selected!==p&&(i[c].selected=p),p&&d&&(i[c].defaultSelected=!0)}else{for(c=""+an(c),a=null,p=0;p<i.length;p++){if(i[p].value===c){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function wg(i,a,c){if(a!=null&&(a=""+an(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+an(c):""}function Eg(i,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(r(92));if(pe(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=an(a),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d)}function us(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var nk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kg(i,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,c):typeof c!="number"||c===0||nk.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Tg(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var p in a)d=a[p],a.hasOwnProperty(p)&&c[p]!==d&&kg(i,p,d)}else for(var g in a)a.hasOwnProperty(g)&&kg(i,g,a[g])}function _d(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ik=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(i){return ik.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ad=null;function Md(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ds=null,fs=null;function Cg(i){var a=is(i);if(a&&(i=a.stateNode)){var c=i[Ut]||null;e:switch(i=a.stateNode,a.type){case"input":if(Td(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ln(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==i&&d.form===i.form){var p=d[Ut]||null;if(!p)throw Error(r(90));Td(d,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===i.form&&xg(d)}break e;case"textarea":wg(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&cs(i,!!c.multiple,a,!1)}}}var Od=!1;function _g(i,a,c){if(Od)return i(a,c);Od=!0;try{var d=i(a);return d}finally{if(Od=!1,(ds!==null||fs!==null)&&(cc(),ds&&(a=ds,i=fs,fs=ds=null,Cg(a),i)))for(a=0;a<i.length;a++)Cg(i[a])}}function _o(i,a){var c=i.stateNode;if(c===null)return null;var d=c[Ut]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=!1;if(Fn)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Nd=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Nd=!1}var Er=null,Rd=null,Tl=null;function Ag(){if(Tl)return Tl;var i,a=Rd,c=a.length,d,p="value"in Er?Er.value:Er.textContent,g=p.length;for(i=0;i<c&&a[i]===p[i];i++);var S=c-i;for(d=1;d<=S&&a[c-d]===p[g-d];d++);return Tl=p.slice(i,1<d?1-d:void 0)}function Cl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function _l(){return!0}function Mg(){return!1}function Pt(i){function a(c,d,p,g,S){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(c=i[k],this[k]=c?c(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?_l:Mg,this.isPropagationStopped=Mg,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),a}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=Pt(mi),Mo=m({},mi,{view:0,detail:0}),sk=Pt(Mo),Dd,jd,Oo,Ml=m({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oo&&(Oo&&i.type==="mousemove"?(Dd=i.screenX-Oo.screenX,jd=i.screenY-Oo.screenY):jd=Dd=0,Oo=i),Dd)},movementY:function(i){return"movementY"in i?i.movementY:jd}}),Og=Pt(Ml),ok=m({},Ml,{dataTransfer:0}),ak=Pt(ok),lk=m({},Mo,{relatedTarget:0}),Ld=Pt(lk),ck=m({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),uk=Pt(ck),dk=m({},mi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fk=Pt(dk),hk=m({},mi,{data:0}),Ng=Pt(hk),pk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yk(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=gk[i])?!!a[i]:!1}function zd(){return yk}var vk=m({},Mo,{key:function(i){if(i.key){var a=pk[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Cl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?mk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?Cl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bk=Pt(vk),xk=m({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=Pt(xk),Sk=m({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),wk=Pt(Sk),Ek=m({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kk=Pt(Ek),Tk=m({},Ml,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ck=Pt(Tk),_k=m({},mi,{newState:0,oldState:0}),Ak=Pt(_k),Mk=[9,13,27,32],Bd=Fn&&"CompositionEvent"in window,No=null;Fn&&"documentMode"in document&&(No=document.documentMode);var Ok=Fn&&"TextEvent"in window&&!No,Dg=Fn&&(!Bd||No&&8<No&&11>=No),jg=" ",Lg=!1;function zg(i,a){switch(i){case"keyup":return Mk.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hs=!1;function Nk(i,a){switch(i){case"compositionend":return Bg(a);case"keypress":return a.which!==32?null:(Lg=!0,jg);case"textInput":return i=a.data,i===jg&&Lg?null:i;default:return null}}function Rk(i,a){if(hs)return i==="compositionend"||!Bd&&zg(i,a)?(i=Ag(),Tl=Rd=Er=null,hs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Dg&&a.locale!=="ko"?null:a.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Dk[i.type]:a==="textarea"}function Pg(i,a,c,d){ds?fs?fs.push(d):fs=[d]:ds=d,a=mc(a,"onChange"),0<a.length&&(c=new Al("onChange","change",null,c,d),i.push({event:c,listeners:a}))}var Ro=null,Do=null;function jk(i){bv(i,0)}function Ol(i){var a=Co(i);if(xg(a))return i}function Hg(i,a){if(i==="change")return a}var Ig=!1;if(Fn){var Ud;if(Fn){var Pd="oninput"in document;if(!Pd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),Pd=typeof $g.oninput=="function"}Ud=Pd}else Ud=!1;Ig=Ud&&(!document.documentMode||9<document.documentMode)}function qg(){Ro&&(Ro.detachEvent("onpropertychange",Vg),Do=Ro=null)}function Vg(i){if(i.propertyName==="value"&&Ol(Do)){var a=[];Pg(a,Do,i,Md(i)),_g(jk,a)}}function Lk(i,a,c){i==="focusin"?(qg(),Ro=a,Do=c,Ro.attachEvent("onpropertychange",Vg)):i==="focusout"&&qg()}function zk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ol(Do)}function Bk(i,a){if(i==="click")return Ol(a)}function Uk(i,a){if(i==="input"||i==="change")return Ol(a)}function Pk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Wt=typeof Object.is=="function"?Object.is:Pk;function jo(i,a){if(Wt(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!pd.call(a,p)||!Wt(i[p],a[p]))return!1}return!0}function Kg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Fg(i,a){var c=Kg(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=a&&d>=a)return{node:c,offset:a-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Kg(c)}}function Gg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Gg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Yg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=El(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=El(i.document)}return a}function Hd(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Hk=Fn&&"documentMode"in document&&11>=document.documentMode,ps=null,Id=null,Lo=null,$d=!1;function Wg(i,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$d||ps==null||ps!==El(d)||(d=ps,"selectionStart"in d&&Hd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Lo&&jo(Lo,d)||(Lo=d,d=mc(Id,"onSelect"),0<d.length&&(a=new Al("onSelect","select",null,a,c),i.push({event:a,listeners:d}),a.target=ps)))}function gi(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var ms={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},qd={},Jg={};Fn&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function yi(i){if(qd[i])return qd[i];if(!ms[i])return i;var a=ms[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Jg)return qd[i]=a[c];return i}var Qg=yi("animationend"),Xg=yi("animationiteration"),Zg=yi("animationstart"),Ik=yi("transitionrun"),$k=yi("transitionstart"),qk=yi("transitioncancel"),e0=yi("transitionend"),t0=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function Sn(i,a){t0.set(i,a),pi(a,[i])}var n0=new WeakMap;function cn(i,a){if(typeof i=="object"&&i!==null){var c=n0.get(i);return c!==void 0?c:(a={value:i,source:a,stack:vg(a)},n0.set(i,a),a)}return{value:i,source:a,stack:vg(a)}}var un=[],gs=0,Kd=0;function Nl(){for(var i=gs,a=Kd=gs=0;a<i;){var c=un[a];un[a++]=null;var d=un[a];un[a++]=null;var p=un[a];un[a++]=null;var g=un[a];if(un[a++]=null,d!==null&&p!==null){var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}g!==0&&r0(c,p,g)}}function Rl(i,a,c,d){un[gs++]=i,un[gs++]=a,un[gs++]=c,un[gs++]=d,Kd|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Fd(i,a,c,d){return Rl(i,a,c,d),Dl(i)}function ys(i,a){return Rl(i,null,null,a),Dl(i)}function r0(i,a,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var p=!1,g=i.return;g!==null;)g.childLanes|=c,d=g.alternate,d!==null&&(d.childLanes|=c),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(p=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,p&&a!==null&&(p=31-Yt(c),i=g.hiddenUpdates,d=i[p],d===null?i[p]=[a]:d.push(a),a.lane=c|536870912),g):null}function Dl(i){if(50<oa)throw oa=0,Zf=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var vs={};function Vk(i,a,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(i,a,c,d){return new Vk(i,a,c,d)}function Gd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gn(i,a){var c=i.alternate;return c===null?(c=Jt(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function i0(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function jl(i,a,c,d,p,g){var S=0;if(d=i,typeof i=="function")Gd(i)&&(S=1);else if(typeof i=="string")S=FT(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case le:return i=Jt(31,c,a,p),i.elementType=le,i.lanes=g,i;case x:return vi(c.children,p,g,a);case E:S=8,p|=24;break;case T:return i=Jt(12,c,a,p|2),i.elementType=T,i.lanes=g,i;case U:return i=Jt(13,c,a,p),i.elementType=U,i.lanes=g,i;case G:return i=Jt(19,c,a,p),i.elementType=G,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:case O:S=10;break e;case N:S=9;break e;case V:S=11;break e;case Y:S=14;break e;case J:S=16,d=null;break e}S=29,c=Error(r(130,i===null?"null":typeof i,"")),d=null}return a=Jt(S,c,a,p),a.elementType=i,a.type=d,a.lanes=g,a}function vi(i,a,c,d){return i=Jt(7,i,d,a),i.lanes=c,i}function Yd(i,a,c){return i=Jt(6,i,null,a),i.lanes=c,i}function Wd(i,a,c){return a=Jt(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var bs=[],xs=0,Ll=null,zl=0,dn=[],fn=0,bi=null,Yn=1,Wn="";function xi(i,a){bs[xs++]=zl,bs[xs++]=Ll,Ll=i,zl=a}function s0(i,a,c){dn[fn++]=Yn,dn[fn++]=Wn,dn[fn++]=bi,bi=i;var d=Yn;i=Wn;var p=32-Yt(d)-1;d&=~(1<<p),c+=1;var g=32-Yt(a)+p;if(30<g){var S=p-p%5;g=(d&(1<<S)-1).toString(32),d>>=S,p-=S,Yn=1<<32-Yt(a)+p|c<<p|d,Wn=g+i}else Yn=1<<g|c<<p|d,Wn=i}function Jd(i){i.return!==null&&(xi(i,1),s0(i,1,0))}function Qd(i){for(;i===Ll;)Ll=bs[--xs],bs[xs]=null,zl=bs[--xs],bs[xs]=null;for(;i===bi;)bi=dn[--fn],dn[fn]=null,Wn=dn[--fn],dn[fn]=null,Yn=dn[--fn],dn[fn]=null}var Rt=null,Ge=null,Ae=!1,Si=null,Rn=!1,Xd=Error(r(519));function wi(i){var a=Error(r(418,""));throw Uo(cn(a,i)),Xd}function o0(i){var a=i.stateNode,c=i.type,d=i.memoizedProps;switch(a[Ct]=i,a[Ut]=d,c){case"dialog":we("cancel",a),we("close",a);break;case"iframe":case"object":case"embed":we("load",a);break;case"video":case"audio":for(c=0;c<la.length;c++)we(la[c],a);break;case"source":we("error",a);break;case"img":case"image":case"link":we("error",a),we("load",a);break;case"details":we("toggle",a);break;case"input":we("invalid",a),Sg(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),wl(a);break;case"select":we("invalid",a);break;case"textarea":we("invalid",a),Eg(a,d.value,d.defaultValue,d.children),wl(a)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||Ev(a.textContent,c)?(d.popover!=null&&(we("beforetoggle",a),we("toggle",a)),d.onScroll!=null&&we("scroll",a),d.onScrollEnd!=null&&we("scrollend",a),d.onClick!=null&&(a.onclick=gc),a=!0):a=!1,a||wi(i)}function a0(i){for(Rt=i.return;Rt;)switch(Rt.tag){case 5:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Rt=Rt.return}}function zo(i){if(i!==Rt)return!1;if(!Ae)return a0(i),Ae=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||mh(i.type,i.memoizedProps)),c=!c),c&&Ge&&wi(i),a0(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(a===0){Ge=En(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;i=i.nextSibling}Ge=null}}else a===27?(a=Ge,Pr(i.type)?(i=bh,bh=null,Ge=i):Ge=a):Ge=Rt?En(i.stateNode.nextSibling):null;return!0}function Bo(){Ge=Rt=null,Ae=!1}function l0(){var i=Si;return i!==null&&($t===null?$t=i:$t.push.apply($t,i),Si=null),i}function Uo(i){Si===null?Si=[i]:Si.push(i)}var Zd=q(null),Ei=null,Jn=null;function kr(i,a,c){Q(Zd,a._currentValue),a._currentValue=c}function Qn(i){i._currentValue=Zd.current,Z(Zd)}function ef(i,a,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===c)break;i=i.return}}function tf(i,a,c,d){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var k=g;g=p;for(var _=0;_<a.length;_++)if(k.context===a[_]){g.lanes|=c,k=g.alternate,k!==null&&(k.lanes|=c),ef(g.return,c,i),d||(S=null);break e}g=k.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(r(341));S.lanes|=c,g=S.alternate,g!==null&&(g.lanes|=c),ef(S,c,i),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===i){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Po(i,a,c,d){i=null;for(var p=a,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var k=p.type;Wt(p.pendingProps.value,S.value)||(i!==null?i.push(k):i=[k])}}else if(p===Ft.current){if(S=p.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(pa):i=[pa])}p=p.return}i!==null&&tf(a,i,c,d),a.flags|=262144}function Bl(i){for(i=i.firstContext;i!==null;){if(!Wt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ki(i){Ei=i,Jn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _t(i){return c0(Ei,i)}function Ul(i,a){return Ei===null&&ki(i),c0(i,a)}function c0(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Jn===null){if(i===null)throw Error(r(308));Jn=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Jn=Jn.next=a;return c}var Kk=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},Fk=n.unstable_scheduleCallback,Gk=n.unstable_NormalPriority,at={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nf(){return{controller:new Kk,data:new Map,refCount:0}}function Ho(i){i.refCount--,i.refCount===0&&Fk(Gk,function(){i.controller.abort()})}var Io=null,rf=0,Ss=0,ws=null;function Yk(i,a){if(Io===null){var c=Io=[];rf=0,Ss=oh(),ws={status:"pending",value:void 0,then:function(d){c.push(d)}}}return rf++,a.then(u0,u0),a}function u0(){if(--rf===0&&Io!==null){ws!==null&&(ws.status="fulfilled");var i=Io;Io=null,Ss=0,ws=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Wk(i,a){var c=[],d={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var p=0;p<c.length;p++)(0,c[p])(a)},function(p){for(d.status="rejected",d.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),d}var d0=P.S;P.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Yk(i,a),d0!==null&&d0(i,a)};var Ti=q(null);function sf(){var i=Ti.current;return i!==null?i:Ue.pooledCache}function Pl(i,a){a===null?Q(Ti,Ti.current):Q(Ti,a.pool)}function f0(){var i=sf();return i===null?null:{parent:at._currentValue,pool:i}}var $o=Error(r(460)),h0=Error(r(474)),Hl=Error(r(542)),of={then:function(){}};function p0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Il(){}function m0(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(Il,Il),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,y0(i),i;default:if(typeof a.status=="string")a.then(Il,Il);else{if(i=Ue,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=d}},function(d){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,y0(i),i}throw qo=a,$o}}var qo=null;function g0(){if(qo===null)throw Error(r(459));var i=qo;return qo=null,i}function y0(i){if(i===$o||i===Hl)throw Error(r(483))}var Tr=!1;function af(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Cr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function _r(i,a,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Me&2)!==0){var p=d.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),d.pending=a,a=Dl(i),r0(i,null,c),a}return Rl(i,d,a,c),Dl(i)}function Vo(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,c|=d,a.lanes=c,ug(i,c)}}function cf(i,a){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,c=c.next}while(c!==null);g===null?p=g=a:g=g.next=a}else p=g=a;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var uf=!1;function Ko(){if(uf){var i=ws;if(i!==null)throw i}}function Fo(i,a,c,d){uf=!1;var p=i.updateQueue;Tr=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var _=k,L=_.next;_.next=null,S===null?g=L:S.next=L,S=_;var H=i.alternate;H!==null&&(H=H.updateQueue,k=H.lastBaseUpdate,k!==S&&(k===null?H.firstBaseUpdate=L:k.next=L,H.lastBaseUpdate=_))}if(g!==null){var $=p.baseState;S=0,H=L=_=null,k=g;do{var z=k.lane&-536870913,B=z!==k.lane;if(B?(Te&z)===z:(d&z)===z){z!==0&&z===Ss&&(uf=!0),H!==null&&(H=H.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ce=i,se=k;z=a;var je=c;switch(se.tag){case 1:if(ce=se.payload,typeof ce=="function"){$=ce.call(je,$,z);break e}$=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=se.payload,z=typeof ce=="function"?ce.call(je,$,z):ce,z==null)break e;$=m({},$,z);break e;case 2:Tr=!0}}z=k.callback,z!==null&&(i.flags|=64,B&&(i.flags|=8192),B=p.callbacks,B===null?p.callbacks=[z]:B.push(z))}else B={lane:z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},H===null?(L=H=B,_=$):H=H.next=B,S|=z;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;B=k,k=B.next,B.next=null,p.lastBaseUpdate=B,p.shared.pending=null}}while(!0);H===null&&(_=$),p.baseState=_,p.firstBaseUpdate=L,p.lastBaseUpdate=H,g===null&&(p.shared.lanes=0),Lr|=S,i.lanes=S,i.memoizedState=$}}function v0(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function b0(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)v0(c[i],a)}var Es=q(null),$l=q(0);function x0(i,a){i=ir,Q($l,i),Q(Es,a),ir=i|a.baseLanes}function df(){Q($l,ir),Q(Es,Es.current)}function ff(){ir=$l.current,Z(Es),Z($l)}var Ar=0,be=null,Re=null,et=null,ql=!1,ks=!1,Ci=!1,Vl=0,Go=0,Ts=null,Jk=0;function Xe(){throw Error(r(321))}function hf(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Wt(i[c],a[c]))return!1;return!0}function pf(i,a,c,d,p,g){return Ar=g,be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?ry:iy,Ci=!1,g=c(d,p),Ci=!1,ks&&(g=w0(a,c,d,p)),S0(i),g}function S0(i){P.H=Jl;var a=Re!==null&&Re.next!==null;if(Ar=0,et=Re=be=null,ql=!1,Go=0,Ts=null,a)throw Error(r(300));i===null||dt||(i=i.dependencies,i!==null&&Bl(i)&&(dt=!0))}function w0(i,a,c,d){be=i;var p=0;do{if(ks&&(Ts=null),Go=0,ks=!1,25<=p)throw Error(r(301));if(p+=1,et=Re=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=rT,g=a(c,d)}while(ks);return g}function Qk(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?Yo(a):a,i=i.useState()[0],(Re!==null?Re.memoizedState:null)!==i&&(be.flags|=1024),a}function mf(){var i=Vl!==0;return Vl=0,i}function gf(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function yf(i){if(ql){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}ql=!1}Ar=0,et=Re=be=null,ks=!1,Go=Vl=0,Ts=null}function Ht(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?be.memoizedState=et=i:et=et.next=i,et}function tt(){if(Re===null){var i=be.alternate;i=i!==null?i.memoizedState:null}else i=Re.next;var a=et===null?be.memoizedState:et.next;if(a!==null)et=a,Re=i;else{if(i===null)throw be.alternate===null?Error(r(467)):Error(r(310));Re=i,i={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},et===null?be.memoizedState=et=i:et=et.next=i}return et}function vf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(i){var a=Go;return Go+=1,Ts===null&&(Ts=[]),i=m0(Ts,i,a),a=be,(et===null?a.memoizedState:et.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?ry:iy),i}function Kl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Yo(i);if(i.$$typeof===O)return _t(i)}throw Error(r(438,String(i)))}function bf(i){var a=null,c=be.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=vf(),be.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),d=0;d<i;d++)c[d]=ke;return a.index++,c}function Xn(i,a){return typeof a=="function"?a(i):a}function Fl(i){var a=tt();return xf(a,Re,i)}function xf(i,a,c){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var p=i.baseQueue,g=d.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}a.baseQueue=p=g,d.pending=null}if(g=i.baseState,p===null)i.memoizedState=g;else{a=p.next;var k=S=null,_=null,L=a,H=!1;do{var $=L.lane&-536870913;if($!==L.lane?(Te&$)===$:(Ar&$)===$){var z=L.revertLane;if(z===0)_!==null&&(_=_.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===Ss&&(H=!0);else if((Ar&z)===z){L=L.next,z===Ss&&(H=!0);continue}else $={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},_===null?(k=_=$,S=g):_=_.next=$,be.lanes|=z,Lr|=z;$=L.action,Ci&&c(g,$),g=L.hasEagerState?L.eagerState:c(g,$)}else z={lane:$,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},_===null?(k=_=z,S=g):_=_.next=z,be.lanes|=$,Lr|=$;L=L.next}while(L!==null&&L!==a);if(_===null?S=g:_.next=k,!Wt(g,i.memoizedState)&&(dt=!0,H&&(c=ws,c!==null)))throw c;i.memoizedState=g,i.baseState=S,i.baseQueue=_,d.lastRenderedState=g}return p===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Sf(i){var a=tt(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var d=c.dispatch,p=c.pending,g=a.memoizedState;if(p!==null){c.pending=null;var S=p=p.next;do g=i(g,S.action),S=S.next;while(S!==p);Wt(g,a.memoizedState)||(dt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),c.lastRenderedState=g}return[g,d]}function E0(i,a,c){var d=be,p=tt(),g=Ae;if(g){if(c===void 0)throw Error(r(407));c=c()}else c=a();var S=!Wt((Re||p).memoizedState,c);S&&(p.memoizedState=c,dt=!0),p=p.queue;var k=C0.bind(null,d,p,i);if(Wo(2048,8,k,[i]),p.getSnapshot!==a||S||et!==null&&et.memoizedState.tag&1){if(d.flags|=2048,Cs(9,Gl(),T0.bind(null,d,p,c,a),null),Ue===null)throw Error(r(349));g||(Ar&124)!==0||k0(d,a,c)}return c}function k0(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=be.updateQueue,a===null?(a=vf(),be.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function T0(i,a,c,d){a.value=c,a.getSnapshot=d,_0(a)&&A0(i)}function C0(i,a,c){return c(function(){_0(a)&&A0(i)})}function _0(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Wt(i,c)}catch{return!0}}function A0(i){var a=ys(i,2);a!==null&&tn(a,i,2)}function wf(i){var a=Ht();if(typeof i=="function"){var c=i;if(i=c(),Ci){Sr(!0);try{c()}finally{Sr(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:i},a}function M0(i,a,c,d){return i.baseState=c,xf(i,Re,typeof d=="function"?d:Xn)}function Xk(i,a,c,d,p){if(Wl(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};P.T!==null?c(!0):g.isTransition=!1,d(g),c=a.pending,c===null?(g.next=a.pending=g,O0(a,g)):(g.next=c.next,a.pending=c.next=g)}}function O0(i,a){var c=a.action,d=a.payload,p=i.state;if(a.isTransition){var g=P.T,S={};P.T=S;try{var k=c(p,d),_=P.S;_!==null&&_(S,k),N0(i,a,k)}catch(L){Ef(i,a,L)}finally{P.T=g}}else try{g=c(p,d),N0(i,a,g)}catch(L){Ef(i,a,L)}}function N0(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){R0(i,a,d)},function(d){return Ef(i,a,d)}):R0(i,a,c)}function R0(i,a,c){a.status="fulfilled",a.value=c,D0(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,O0(i,c)))}function Ef(i,a,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,D0(a),a=a.next;while(a!==d)}i.action=null}function D0(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function j0(i,a){return a}function L0(i,a){if(Ae){var c=Ue.formState;if(c!==null){e:{var d=be;if(Ae){if(Ge){t:{for(var p=Ge,g=Rn;p.nodeType!==8;){if(!g){p=null;break t}if(p=En(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Ge=En(p.nextSibling),d=p.data==="F!";break e}}wi(d)}d=!1}d&&(a=c[0])}}return c=Ht(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j0,lastRenderedState:a},c.queue=d,c=ey.bind(null,be,d),d.dispatch=c,d=wf(!1),g=Af.bind(null,be,!1,d.queue),d=Ht(),p={state:a,dispatch:null,action:i,pending:null},d.queue=p,c=Xk.bind(null,be,p,g,c),p.dispatch=c,d.memoizedState=i,[a,c,!1]}function z0(i){var a=tt();return B0(a,Re,i)}function B0(i,a,c){if(a=xf(i,a,j0)[0],i=Fl(Xn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Yo(a)}catch(S){throw S===$o?Hl:S}else d=a;a=tt();var p=a.queue,g=p.dispatch;return c!==a.memoizedState&&(be.flags|=2048,Cs(9,Gl(),Zk.bind(null,p,c),null)),[d,g,i]}function Zk(i,a){i.action=a}function U0(i){var a=tt(),c=Re;if(c!==null)return B0(a,c,i);tt(),a=a.memoizedState,c=tt();var d=c.queue.dispatch;return c.memoizedState=i,[a,d,!1]}function Cs(i,a,c,d){return i={tag:i,create:c,deps:d,inst:a,next:null},a=be.updateQueue,a===null&&(a=vf(),be.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,a.lastEffect=i),i}function Gl(){return{destroy:void 0,resource:void 0}}function P0(){return tt().memoizedState}function Yl(i,a,c,d){var p=Ht();d=d===void 0?null:d,be.flags|=i,p.memoizedState=Cs(1|a,Gl(),c,d)}function Wo(i,a,c,d){var p=tt();d=d===void 0?null:d;var g=p.memoizedState.inst;Re!==null&&d!==null&&hf(d,Re.memoizedState.deps)?p.memoizedState=Cs(a,g,c,d):(be.flags|=i,p.memoizedState=Cs(1|a,g,c,d))}function H0(i,a){Yl(8390656,8,i,a)}function I0(i,a){Wo(2048,8,i,a)}function $0(i,a){return Wo(4,2,i,a)}function q0(i,a){return Wo(4,4,i,a)}function V0(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function K0(i,a,c){c=c!=null?c.concat([i]):null,Wo(4,4,V0.bind(null,a,i),c)}function kf(){}function F0(i,a){var c=tt();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&hf(a,d[1])?d[0]:(c.memoizedState=[i,a],i)}function G0(i,a){var c=tt();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&hf(a,d[1]))return d[0];if(d=i(),Ci){Sr(!0);try{i()}finally{Sr(!1)}}return c.memoizedState=[d,a],d}function Tf(i,a,c){return c===void 0||(Ar&1073741824)!==0?i.memoizedState=a:(i.memoizedState=c,i=Jy(),be.lanes|=i,Lr|=i,c)}function Y0(i,a,c,d){return Wt(c,a)?c:Es.current!==null?(i=Tf(i,c,d),Wt(i,a)||(dt=!0),i):(Ar&42)===0?(dt=!0,i.memoizedState=c):(i=Jy(),be.lanes|=i,Lr|=i,a)}function W0(i,a,c,d,p){var g=W.p;W.p=g!==0&&8>g?g:8;var S=P.T,k={};P.T=k,Af(i,!1,a,c);try{var _=p(),L=P.S;if(L!==null&&L(k,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var H=Wk(_,d);Jo(i,a,H,en(i))}else Jo(i,a,d,en(i))}catch($){Jo(i,a,{then:function(){},status:"rejected",reason:$},en())}finally{W.p=g,P.T=S}}function eT(){}function Cf(i,a,c,d){if(i.tag!==5)throw Error(r(476));var p=J0(i).queue;W0(i,p,a,ae,c===null?eT:function(){return Q0(i),c(d)})}function J0(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:ae},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Q0(i){var a=J0(i).next.queue;Jo(i,a,{},en())}function _f(){return _t(pa)}function X0(){return tt().memoizedState}function Z0(){return tt().memoizedState}function tT(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=en();i=Cr(c);var d=_r(a,i,c);d!==null&&(tn(d,a,c),Vo(d,a,c)),a={cache:nf()},i.payload=a;return}a=a.return}}function nT(i,a,c){var d=en();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Wl(i)?ty(a,c):(c=Fd(i,a,c,d),c!==null&&(tn(c,i,d),ny(c,a,d)))}function ey(i,a,c){var d=en();Jo(i,a,c,d)}function Jo(i,a,c,d){var p={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Wl(i))ty(a,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var S=a.lastRenderedState,k=g(S,c);if(p.hasEagerState=!0,p.eagerState=k,Wt(k,S))return Rl(i,a,p,0),Ue===null&&Nl(),!1}catch{}finally{}if(c=Fd(i,a,p,d),c!==null)return tn(c,i,d),ny(c,a,d),!0}return!1}function Af(i,a,c,d){if(d={lane:2,revertLane:oh(),action:d,hasEagerState:!1,eagerState:null,next:null},Wl(i)){if(a)throw Error(r(479))}else a=Fd(i,c,d,2),a!==null&&tn(a,i,2)}function Wl(i){var a=i.alternate;return i===be||a!==null&&a===be}function ty(i,a){ks=ql=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function ny(i,a,c){if((c&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,c|=d,a.lanes=c,ug(i,c)}}var Jl={readContext:_t,use:Kl,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe},ry={readContext:_t,use:Kl,useCallback:function(i,a){return Ht().memoizedState=[i,a===void 0?null:a],i},useContext:_t,useEffect:H0,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Yl(4194308,4,V0.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Yl(4194308,4,i,a)},useInsertionEffect:function(i,a){Yl(4,2,i,a)},useMemo:function(i,a){var c=Ht();a=a===void 0?null:a;var d=i();if(Ci){Sr(!0);try{i()}finally{Sr(!1)}}return c.memoizedState=[d,a],d},useReducer:function(i,a,c){var d=Ht();if(c!==void 0){var p=c(a);if(Ci){Sr(!0);try{c(a)}finally{Sr(!1)}}}else p=a;return d.memoizedState=d.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},d.queue=i,i=i.dispatch=nT.bind(null,be,i),[d.memoizedState,i]},useRef:function(i){var a=Ht();return i={current:i},a.memoizedState=i},useState:function(i){i=wf(i);var a=i.queue,c=ey.bind(null,be,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:kf,useDeferredValue:function(i,a){var c=Ht();return Tf(c,i,a)},useTransition:function(){var i=wf(!1);return i=W0.bind(null,be,i.queue,!0,!1),Ht().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var d=be,p=Ht();if(Ae){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Ue===null)throw Error(r(349));(Te&124)!==0||k0(d,a,c)}p.memoizedState=c;var g={value:c,getSnapshot:a};return p.queue=g,H0(C0.bind(null,d,g,i),[i]),d.flags|=2048,Cs(9,Gl(),T0.bind(null,d,g,c,a),null),c},useId:function(){var i=Ht(),a=Ue.identifierPrefix;if(Ae){var c=Wn,d=Yn;c=(d&~(1<<32-Yt(d)-1)).toString(32)+c,a="«"+a+"R"+c,c=Vl++,0<c&&(a+="H"+c.toString(32)),a+="»"}else c=Jk++,a="«"+a+"r"+c.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:_f,useFormState:L0,useActionState:L0,useOptimistic:function(i){var a=Ht();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Af.bind(null,be,!0,c),c.dispatch=a,[i,a]},useMemoCache:bf,useCacheRefresh:function(){return Ht().memoizedState=tT.bind(null,be)}},iy={readContext:_t,use:Kl,useCallback:F0,useContext:_t,useEffect:I0,useImperativeHandle:K0,useInsertionEffect:$0,useLayoutEffect:q0,useMemo:G0,useReducer:Fl,useRef:P0,useState:function(){return Fl(Xn)},useDebugValue:kf,useDeferredValue:function(i,a){var c=tt();return Y0(c,Re.memoizedState,i,a)},useTransition:function(){var i=Fl(Xn)[0],a=tt().memoizedState;return[typeof i=="boolean"?i:Yo(i),a]},useSyncExternalStore:E0,useId:X0,useHostTransitionStatus:_f,useFormState:z0,useActionState:z0,useOptimistic:function(i,a){var c=tt();return M0(c,Re,i,a)},useMemoCache:bf,useCacheRefresh:Z0},rT={readContext:_t,use:Kl,useCallback:F0,useContext:_t,useEffect:I0,useImperativeHandle:K0,useInsertionEffect:$0,useLayoutEffect:q0,useMemo:G0,useReducer:Sf,useRef:P0,useState:function(){return Sf(Xn)},useDebugValue:kf,useDeferredValue:function(i,a){var c=tt();return Re===null?Tf(c,i,a):Y0(c,Re.memoizedState,i,a)},useTransition:function(){var i=Sf(Xn)[0],a=tt().memoizedState;return[typeof i=="boolean"?i:Yo(i),a]},useSyncExternalStore:E0,useId:X0,useHostTransitionStatus:_f,useFormState:U0,useActionState:U0,useOptimistic:function(i,a){var c=tt();return Re!==null?M0(c,Re,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:bf,useCacheRefresh:Z0},_s=null,Qo=0;function Ql(i){var a=Qo;return Qo+=1,_s===null&&(_s=[]),m0(_s,i,a)}function Xo(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Xl(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function sy(i){var a=i._init;return a(i._payload)}function oy(i){function a(D,M){if(i){var j=D.deletions;j===null?(D.deletions=[M],D.flags|=16):j.push(M)}}function c(D,M){if(!i)return null;for(;M!==null;)a(D,M),M=M.sibling;return null}function d(D){for(var M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function p(D,M){return D=Gn(D,M),D.index=0,D.sibling=null,D}function g(D,M,j){return D.index=j,i?(j=D.alternate,j!==null?(j=j.index,j<M?(D.flags|=67108866,M):j):(D.flags|=67108866,M)):(D.flags|=1048576,M)}function S(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function k(D,M,j,I){return M===null||M.tag!==6?(M=Yd(j,D.mode,I),M.return=D,M):(M=p(M,j),M.return=D,M)}function _(D,M,j,I){var ee=j.type;return ee===x?H(D,M,j.props.children,I,j.key):M!==null&&(M.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===J&&sy(ee)===M.type)?(M=p(M,j.props),Xo(M,j),M.return=D,M):(M=jl(j.type,j.key,j.props,null,D.mode,I),Xo(M,j),M.return=D,M)}function L(D,M,j,I){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Wd(j,D.mode,I),M.return=D,M):(M=p(M,j.children||[]),M.return=D,M)}function H(D,M,j,I,ee){return M===null||M.tag!==7?(M=vi(j,D.mode,I,ee),M.return=D,M):(M=p(M,j),M.return=D,M)}function $(D,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Yd(""+M,D.mode,j),M.return=D,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case v:return j=jl(M.type,M.key,M.props,null,D.mode,j),Xo(j,M),j.return=D,j;case b:return M=Wd(M,D.mode,j),M.return=D,M;case J:var I=M._init;return M=I(M._payload),$(D,M,j)}if(pe(M)||Fe(M))return M=vi(M,D.mode,j,null),M.return=D,M;if(typeof M.then=="function")return $(D,Ql(M),j);if(M.$$typeof===O)return $(D,Ul(D,M),j);Xl(D,M)}return null}function z(D,M,j,I){var ee=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ee!==null?null:k(D,M,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===ee?_(D,M,j,I):null;case b:return j.key===ee?L(D,M,j,I):null;case J:return ee=j._init,j=ee(j._payload),z(D,M,j,I)}if(pe(j)||Fe(j))return ee!==null?null:H(D,M,j,I,null);if(typeof j.then=="function")return z(D,M,Ql(j),I);if(j.$$typeof===O)return z(D,M,Ul(D,j),I);Xl(D,j)}return null}function B(D,M,j,I,ee){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return D=D.get(j)||null,k(M,D,""+I,ee);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return D=D.get(I.key===null?j:I.key)||null,_(M,D,I,ee);case b:return D=D.get(I.key===null?j:I.key)||null,L(M,D,I,ee);case J:var xe=I._init;return I=xe(I._payload),B(D,M,j,I,ee)}if(pe(I)||Fe(I))return D=D.get(j)||null,H(M,D,I,ee,null);if(typeof I.then=="function")return B(D,M,j,Ql(I),ee);if(I.$$typeof===O)return B(D,M,j,Ul(M,I),ee);Xl(M,I)}return null}function ce(D,M,j,I){for(var ee=null,xe=null,te=M,oe=M=0,ht=null;te!==null&&oe<j.length;oe++){te.index>oe?(ht=te,te=null):ht=te.sibling;var _e=z(D,te,j[oe],I);if(_e===null){te===null&&(te=ht);break}i&&te&&_e.alternate===null&&a(D,te),M=g(_e,M,oe),xe===null?ee=_e:xe.sibling=_e,xe=_e,te=ht}if(oe===j.length)return c(D,te),Ae&&xi(D,oe),ee;if(te===null){for(;oe<j.length;oe++)te=$(D,j[oe],I),te!==null&&(M=g(te,M,oe),xe===null?ee=te:xe.sibling=te,xe=te);return Ae&&xi(D,oe),ee}for(te=d(te);oe<j.length;oe++)ht=B(te,D,oe,j[oe],I),ht!==null&&(i&&ht.alternate!==null&&te.delete(ht.key===null?oe:ht.key),M=g(ht,M,oe),xe===null?ee=ht:xe.sibling=ht,xe=ht);return i&&te.forEach(function(Vr){return a(D,Vr)}),Ae&&xi(D,oe),ee}function se(D,M,j,I){if(j==null)throw Error(r(151));for(var ee=null,xe=null,te=M,oe=M=0,ht=null,_e=j.next();te!==null&&!_e.done;oe++,_e=j.next()){te.index>oe?(ht=te,te=null):ht=te.sibling;var Vr=z(D,te,_e.value,I);if(Vr===null){te===null&&(te=ht);break}i&&te&&Vr.alternate===null&&a(D,te),M=g(Vr,M,oe),xe===null?ee=Vr:xe.sibling=Vr,xe=Vr,te=ht}if(_e.done)return c(D,te),Ae&&xi(D,oe),ee;if(te===null){for(;!_e.done;oe++,_e=j.next())_e=$(D,_e.value,I),_e!==null&&(M=g(_e,M,oe),xe===null?ee=_e:xe.sibling=_e,xe=_e);return Ae&&xi(D,oe),ee}for(te=d(te);!_e.done;oe++,_e=j.next())_e=B(te,D,oe,_e.value,I),_e!==null&&(i&&_e.alternate!==null&&te.delete(_e.key===null?oe:_e.key),M=g(_e,M,oe),xe===null?ee=_e:xe.sibling=_e,xe=_e);return i&&te.forEach(function(iC){return a(D,iC)}),Ae&&xi(D,oe),ee}function je(D,M,j,I){if(typeof j=="object"&&j!==null&&j.type===x&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:e:{for(var ee=j.key;M!==null;){if(M.key===ee){if(ee=j.type,ee===x){if(M.tag===7){c(D,M.sibling),I=p(M,j.props.children),I.return=D,D=I;break e}}else if(M.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===J&&sy(ee)===M.type){c(D,M.sibling),I=p(M,j.props),Xo(I,j),I.return=D,D=I;break e}c(D,M);break}else a(D,M);M=M.sibling}j.type===x?(I=vi(j.props.children,D.mode,I,j.key),I.return=D,D=I):(I=jl(j.type,j.key,j.props,null,D.mode,I),Xo(I,j),I.return=D,D=I)}return S(D);case b:e:{for(ee=j.key;M!==null;){if(M.key===ee)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){c(D,M.sibling),I=p(M,j.children||[]),I.return=D,D=I;break e}else{c(D,M);break}else a(D,M);M=M.sibling}I=Wd(j,D.mode,I),I.return=D,D=I}return S(D);case J:return ee=j._init,j=ee(j._payload),je(D,M,j,I)}if(pe(j))return ce(D,M,j,I);if(Fe(j)){if(ee=Fe(j),typeof ee!="function")throw Error(r(150));return j=ee.call(j),se(D,M,j,I)}if(typeof j.then=="function")return je(D,M,Ql(j),I);if(j.$$typeof===O)return je(D,M,Ul(D,j),I);Xl(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(c(D,M.sibling),I=p(M,j),I.return=D,D=I):(c(D,M),I=Yd(j,D.mode,I),I.return=D,D=I),S(D)):c(D,M)}return function(D,M,j,I){try{Qo=0;var ee=je(D,M,j,I);return _s=null,ee}catch(te){if(te===$o||te===Hl)throw te;var xe=Jt(29,te,null,D.mode);return xe.lanes=I,xe.return=D,xe}finally{}}}var As=oy(!0),ay=oy(!1),hn=q(null),Dn=null;function Mr(i){var a=i.alternate;Q(lt,lt.current&1),Q(hn,i),Dn===null&&(a===null||Es.current!==null||a.memoizedState!==null)&&(Dn=i)}function ly(i){if(i.tag===22){if(Q(lt,lt.current),Q(hn,i),Dn===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Dn=i)}}else Or()}function Or(){Q(lt,lt.current),Q(hn,hn.current)}function Zn(i){Z(hn),Dn===i&&(Dn=null),Z(lt)}var lt=q(0);function Zl(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||vh(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Mf(i,a,c,d){a=i.memoizedState,c=c(d,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Of={enqueueSetState:function(i,a,c){i=i._reactInternals;var d=en(),p=Cr(d);p.payload=a,c!=null&&(p.callback=c),a=_r(i,p,d),a!==null&&(tn(a,i,d),Vo(a,i,d))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var d=en(),p=Cr(d);p.tag=1,p.payload=a,c!=null&&(p.callback=c),a=_r(i,p,d),a!==null&&(tn(a,i,d),Vo(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=en(),d=Cr(c);d.tag=2,a!=null&&(d.callback=a),a=_r(i,d,c),a!==null&&(tn(a,i,c),Vo(a,i,c))}};function cy(i,a,c,d,p,g,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,S):a.prototype&&a.prototype.isPureReactComponent?!jo(c,d)||!jo(p,g):!0}function uy(i,a,c,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==i&&Of.enqueueReplaceState(a,a.state,null)}function _i(i,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var p in i)c[p]===void 0&&(c[p]=i[p])}return c}var ec=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function dy(i){ec(i)}function fy(i){console.error(i)}function hy(i){ec(i)}function tc(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function py(i,a,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Nf(i,a,c){return c=Cr(c),c.tag=3,c.payload={element:null},c.callback=function(){tc(i,a)},c}function my(i){return i=Cr(i),i.tag=3,i}function gy(i,a,c,d){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var g=d.value;i.payload=function(){return p(g)},i.callback=function(){py(a,c,d)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){py(a,c,d),typeof p!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function iT(i,a,c,d,p){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Po(a,c,p,!0),c=hn.current,c!==null){switch(c.tag){case 13:return Dn===null?th():c.alternate===null&&Ye===0&&(Ye=3),c.flags&=-257,c.flags|=65536,c.lanes=p,d===of?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),rh(i,d,p)),!1;case 22:return c.flags|=65536,d===of?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),rh(i,d,p)),!1}throw Error(r(435,c.tag))}return rh(i,d,p),th(),!1}if(Ae)return a=hn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,d!==Xd&&(i=Error(r(422),{cause:d}),Uo(cn(i,c)))):(d!==Xd&&(a=Error(r(423),{cause:d}),Uo(cn(a,c))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,d=cn(d,c),p=Nf(i.stateNode,d,p),cf(i,p),Ye!==4&&(Ye=2)),!1;var g=Error(r(520),{cause:d});if(g=cn(g,c),sa===null?sa=[g]:sa.push(g),Ye!==4&&(Ye=2),a===null)return!0;d=cn(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=p&-p,c.lanes|=i,i=Nf(c.stateNode,d,i),cf(c,i),!1;case 1:if(a=c.type,g=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(zr===null||!zr.has(g))))return c.flags|=65536,p&=-p,c.lanes|=p,p=my(p),gy(p,i,c,d),cf(c,p),!1}c=c.return}while(c!==null);return!1}var yy=Error(r(461)),dt=!1;function xt(i,a,c,d){a.child=i===null?ay(a,null,c,d):As(a,i.child,c,d)}function vy(i,a,c,d,p){c=c.render;var g=a.ref;if("ref"in d){var S={};for(var k in d)k!=="ref"&&(S[k]=d[k])}else S=d;return ki(a),d=pf(i,a,c,S,g,p),k=mf(),i!==null&&!dt?(gf(i,a,p),er(i,a,p)):(Ae&&k&&Jd(a),a.flags|=1,xt(i,a,d,p),a.child)}function by(i,a,c,d,p){if(i===null){var g=c.type;return typeof g=="function"&&!Gd(g)&&g.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=g,xy(i,a,g,d,p)):(i=jl(c.type,null,d,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!Pf(i,p)){var S=g.memoizedProps;if(c=c.compare,c=c!==null?c:jo,c(S,d)&&i.ref===a.ref)return er(i,a,p)}return a.flags|=1,i=Gn(g,d),i.ref=a.ref,i.return=a,a.child=i}function xy(i,a,c,d,p){if(i!==null){var g=i.memoizedProps;if(jo(g,d)&&i.ref===a.ref)if(dt=!1,a.pendingProps=d=g,Pf(i,p))(i.flags&131072)!==0&&(dt=!0);else return a.lanes=i.lanes,er(i,a,p)}return Rf(i,a,c,d,p)}function Sy(i,a,c){var d=a.pendingProps,p=d.children,g=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=g!==null?g.baseLanes|c:c,i!==null){for(p=a.child=i.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;a.childLanes=g&~d}else a.childLanes=0,a.child=null;return wy(i,a,d,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pl(a,g!==null?g.cachePool:null),g!==null?x0(a,g):df(),ly(a);else return a.lanes=a.childLanes=536870912,wy(i,a,g!==null?g.baseLanes|c:c,c)}else g!==null?(Pl(a,g.cachePool),x0(a,g),Or(),a.memoizedState=null):(i!==null&&Pl(a,null),df(),Or());return xt(i,a,p,c),a.child}function wy(i,a,c,d){var p=sf();return p=p===null?null:{parent:at._currentValue,pool:p},a.memoizedState={baseLanes:c,cachePool:p},i!==null&&Pl(a,null),df(),ly(a),i!==null&&Po(i,a,d,!0),null}function nc(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function Rf(i,a,c,d,p){return ki(a),c=pf(i,a,c,d,void 0,p),d=mf(),i!==null&&!dt?(gf(i,a,p),er(i,a,p)):(Ae&&d&&Jd(a),a.flags|=1,xt(i,a,c,p),a.child)}function Ey(i,a,c,d,p,g){return ki(a),a.updateQueue=null,c=w0(a,d,c,p),S0(i),d=mf(),i!==null&&!dt?(gf(i,a,g),er(i,a,g)):(Ae&&d&&Jd(a),a.flags|=1,xt(i,a,c,g),a.child)}function ky(i,a,c,d,p){if(ki(a),a.stateNode===null){var g=vs,S=c.contextType;typeof S=="object"&&S!==null&&(g=_t(S)),g=new c(d,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Of,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=d,g.state=a.memoizedState,g.refs={},af(a),S=c.contextType,g.context=typeof S=="object"&&S!==null?_t(S):vs,g.state=a.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(Mf(a,c,S,d),g.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Of.enqueueReplaceState(g,g.state,null),Fo(a,d,g,p),Ko(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){g=a.stateNode;var k=a.memoizedProps,_=_i(c,k);g.props=_;var L=g.context,H=c.contextType;S=vs,typeof H=="object"&&H!==null&&(S=_t(H));var $=c.getDerivedStateFromProps;H=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,H||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k||L!==S)&&uy(a,g,d,S),Tr=!1;var z=a.memoizedState;g.state=z,Fo(a,d,g,p),Ko(),L=a.memoizedState,k||z!==L||Tr?(typeof $=="function"&&(Mf(a,c,$,d),L=a.memoizedState),(_=Tr||cy(a,c,_,d,z,L,S))?(H||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=L),g.props=d,g.state=L,g.context=S,d=_):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{g=a.stateNode,lf(i,a),S=a.memoizedProps,H=_i(c,S),g.props=H,$=a.pendingProps,z=g.context,L=c.contextType,_=vs,typeof L=="object"&&L!==null&&(_=_t(L)),k=c.getDerivedStateFromProps,(L=typeof k=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==$||z!==_)&&uy(a,g,d,_),Tr=!1,z=a.memoizedState,g.state=z,Fo(a,d,g,p),Ko();var B=a.memoizedState;S!==$||z!==B||Tr||i!==null&&i.dependencies!==null&&Bl(i.dependencies)?(typeof k=="function"&&(Mf(a,c,k,d),B=a.memoizedState),(H=Tr||cy(a,c,H,d,z,B,_)||i!==null&&i.dependencies!==null&&Bl(i.dependencies))?(L||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,B,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,B,_)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===i.memoizedProps&&z===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&z===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=B),g.props=d,g.state=B,g.context=_,d=H):(typeof g.componentDidUpdate!="function"||S===i.memoizedProps&&z===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&z===i.memoizedState||(a.flags|=1024),d=!1)}return g=d,nc(i,a),d=(a.flags&128)!==0,g||d?(g=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&d?(a.child=As(a,i.child,null,p),a.child=As(a,null,c,p)):xt(i,a,c,p),a.memoizedState=g.state,i=a.child):i=er(i,a,p),i}function Ty(i,a,c,d){return Bo(),a.flags|=256,xt(i,a,c,d),a.child}var Df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jf(i){return{baseLanes:i,cachePool:f0()}}function Lf(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=pn),i}function Cy(i,a,c){var d=a.pendingProps,p=!1,g=(a.flags&128)!==0,S;if((S=g)||(S=i!==null&&i.memoizedState===null?!1:(lt.current&2)!==0),S&&(p=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ae){if(p?Mr(a):Or(),Ae){var k=Ge,_;if(_=k){e:{for(_=k,k=Rn;_.nodeType!==8;){if(!k){k=null;break e}if(_=En(_.nextSibling),_===null){k=null;break e}}k=_}k!==null?(a.memoizedState={dehydrated:k,treeContext:bi!==null?{id:Yn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},_=Jt(18,null,null,0),_.stateNode=k,_.return=a,a.child=_,Rt=a,Ge=null,_=!0):_=!1}_||wi(a)}if(k=a.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return vh(k)?a.lanes=32:a.lanes=536870912,null;Zn(a)}return k=d.children,d=d.fallback,p?(Or(),p=a.mode,k=rc({mode:"hidden",children:k},p),d=vi(d,p,c,null),k.return=a,d.return=a,k.sibling=d,a.child=k,p=a.child,p.memoizedState=jf(c),p.childLanes=Lf(i,S,c),a.memoizedState=Df,d):(Mr(a),zf(a,k))}if(_=i.memoizedState,_!==null&&(k=_.dehydrated,k!==null)){if(g)a.flags&256?(Mr(a),a.flags&=-257,a=Bf(i,a,c)):a.memoizedState!==null?(Or(),a.child=i.child,a.flags|=128,a=null):(Or(),p=d.fallback,k=a.mode,d=rc({mode:"visible",children:d.children},k),p=vi(p,k,c,null),p.flags|=2,d.return=a,p.return=a,d.sibling=p,a.child=d,As(a,i.child,null,c),d=a.child,d.memoizedState=jf(c),d.childLanes=Lf(i,S,c),a.memoizedState=Df,a=p);else if(Mr(a),vh(k)){if(S=k.nextSibling&&k.nextSibling.dataset,S)var L=S.dgst;S=L,d=Error(r(419)),d.stack="",d.digest=S,Uo({value:d,source:null,stack:null}),a=Bf(i,a,c)}else if(dt||Po(i,a,c,!1),S=(c&i.childLanes)!==0,dt||S){if(S=Ue,S!==null&&(d=c&-c,d=(d&42)!==0?1:vd(d),d=(d&(S.suspendedLanes|c))!==0?0:d,d!==0&&d!==_.retryLane))throw _.retryLane=d,ys(i,d),tn(S,i,d),yy;k.data==="$?"||th(),a=Bf(i,a,c)}else k.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=_.treeContext,Ge=En(k.nextSibling),Rt=a,Ae=!0,Si=null,Rn=!1,i!==null&&(dn[fn++]=Yn,dn[fn++]=Wn,dn[fn++]=bi,Yn=i.id,Wn=i.overflow,bi=a),a=zf(a,d.children),a.flags|=4096);return a}return p?(Or(),p=d.fallback,k=a.mode,_=i.child,L=_.sibling,d=Gn(_,{mode:"hidden",children:d.children}),d.subtreeFlags=_.subtreeFlags&65011712,L!==null?p=Gn(L,p):(p=vi(p,k,c,null),p.flags|=2),p.return=a,d.return=a,d.sibling=p,a.child=d,d=p,p=a.child,k=i.child.memoizedState,k===null?k=jf(c):(_=k.cachePool,_!==null?(L=at._currentValue,_=_.parent!==L?{parent:L,pool:L}:_):_=f0(),k={baseLanes:k.baseLanes|c,cachePool:_}),p.memoizedState=k,p.childLanes=Lf(i,S,c),a.memoizedState=Df,d):(Mr(a),c=i.child,i=c.sibling,c=Gn(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=c,a.memoizedState=null,c)}function zf(i,a){return a=rc({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function rc(i,a){return i=Jt(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Bf(i,a,c){return As(a,i.child,null,c),i=zf(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function _y(i,a,c){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),ef(i.return,a,c)}function Uf(i,a,c,d,p){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=p)}function Ay(i,a,c){var d=a.pendingProps,p=d.revealOrder,g=d.tail;if(xt(i,a,d.children,c),d=lt.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_y(i,c,a);else if(i.tag===19)_y(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(Q(lt,d),p){case"forwards":for(c=a.child,p=null;c!==null;)i=c.alternate,i!==null&&Zl(i)===null&&(p=c),c=c.sibling;c=p,c===null?(p=a.child,a.child=null):(p=c.sibling,c.sibling=null),Uf(a,!1,p,c,g);break;case"backwards":for(c=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&Zl(i)===null){a.child=p;break}i=p.sibling,p.sibling=c,c=p,p=i}Uf(a,!0,c,null,g);break;case"together":Uf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function er(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Lr|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(Po(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=Gn(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Gn(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Pf(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Bl(i)))}function sT(i,a,c){switch(a.tag){case 3:Ie(a,a.stateNode.containerInfo),kr(a,at,i.memoizedState.cache),Bo();break;case 27:case 5:hd(a);break;case 4:Ie(a,a.stateNode.containerInfo);break;case 10:kr(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Mr(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Cy(i,a,c):(Mr(a),i=er(i,a,c),i!==null?i.sibling:null);Mr(a);break;case 19:var p=(i.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Po(i,a,c,!1),d=(c&a.childLanes)!==0),p){if(d)return Ay(i,a,c);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(lt,lt.current),d)break;return null;case 22:case 23:return a.lanes=0,Sy(i,a,c);case 24:kr(a,at,i.memoizedState.cache)}return er(i,a,c)}function My(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)dt=!0;else{if(!Pf(i,c)&&(a.flags&128)===0)return dt=!1,sT(i,a,c);dt=(i.flags&131072)!==0}else dt=!1,Ae&&(a.flags&1048576)!==0&&s0(a,zl,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var d=a.elementType,p=d._init;if(d=p(d._payload),a.type=d,typeof d=="function")Gd(d)?(i=_i(d,i),a.tag=1,a=ky(null,a,d,i,c)):(a.tag=0,a=Rf(null,a,d,i,c));else{if(d!=null){if(p=d.$$typeof,p===V){a.tag=11,a=vy(null,a,d,i,c);break e}else if(p===Y){a.tag=14,a=by(null,a,d,i,c);break e}}throw a=ue(d)||d,Error(r(306,a,""))}}return a;case 0:return Rf(i,a,a.type,a.pendingProps,c);case 1:return d=a.type,p=_i(d,a.pendingProps),ky(i,a,d,p,c);case 3:e:{if(Ie(a,a.stateNode.containerInfo),i===null)throw Error(r(387));d=a.pendingProps;var g=a.memoizedState;p=g.element,lf(i,a),Fo(a,d,null,c);var S=a.memoizedState;if(d=S.cache,kr(a,at,d),d!==g.cache&&tf(a,[at],c,!0),Ko(),d=S.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=Ty(i,a,d,c);break e}else if(d!==p){p=cn(Error(r(424)),a),Uo(p),a=Ty(i,a,d,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ge=En(i.firstChild),Rt=a,Ae=!0,Si=null,Rn=!0,c=ay(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Bo(),d===p){a=er(i,a,c);break e}xt(i,a,d,c)}a=a.child}return a;case 26:return nc(i,a),i===null?(c=Dv(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ae||(c=a.type,i=a.pendingProps,d=yc(he.current).createElement(c),d[Ct]=a,d[Ut]=i,wt(d,c,i),ut(d),a.stateNode=d):a.memoizedState=Dv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return hd(a),i===null&&Ae&&(d=a.stateNode=Ov(a.type,a.pendingProps,he.current),Rt=a,Rn=!0,p=Ge,Pr(a.type)?(bh=p,Ge=En(d.firstChild)):Ge=p),xt(i,a,a.pendingProps.children,c),nc(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ae&&((p=d=Ge)&&(d=DT(d,a.type,a.pendingProps,Rn),d!==null?(a.stateNode=d,Rt=a,Ge=En(d.firstChild),Rn=!1,p=!0):p=!1),p||wi(a)),hd(a),p=a.type,g=a.pendingProps,S=i!==null?i.memoizedProps:null,d=g.children,mh(p,g)?d=null:S!==null&&mh(p,S)&&(a.flags|=32),a.memoizedState!==null&&(p=pf(i,a,Qk,null,null,c),pa._currentValue=p),nc(i,a),xt(i,a,d,c),a.child;case 6:return i===null&&Ae&&((i=c=Ge)&&(c=jT(c,a.pendingProps,Rn),c!==null?(a.stateNode=c,Rt=a,Ge=null,i=!0):i=!1),i||wi(a)),null;case 13:return Cy(i,a,c);case 4:return Ie(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=As(a,null,d,c):xt(i,a,d,c),a.child;case 11:return vy(i,a,a.type,a.pendingProps,c);case 7:return xt(i,a,a.pendingProps,c),a.child;case 8:return xt(i,a,a.pendingProps.children,c),a.child;case 12:return xt(i,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,kr(a,a.type,d.value),xt(i,a,d.children,c),a.child;case 9:return p=a.type._context,d=a.pendingProps.children,ki(a),p=_t(p),d=d(p),a.flags|=1,xt(i,a,d,c),a.child;case 14:return by(i,a,a.type,a.pendingProps,c);case 15:return xy(i,a,a.type,a.pendingProps,c);case 19:return Ay(i,a,c);case 31:return d=a.pendingProps,c=a.mode,d={mode:d.mode,children:d.children},i===null?(c=rc(d,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Gn(i.child,d),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return Sy(i,a,c);case 24:return ki(a),d=_t(at),i===null?(p=sf(),p===null&&(p=Ue,g=nf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=c),p=g),a.memoizedState={parent:d,cache:p},af(a),kr(a,at,p)):((i.lanes&c)!==0&&(lf(i,a),Fo(a,null,null,c),Ko()),p=i.memoizedState,g=a.memoizedState,p.parent!==d?(p={parent:d,cache:d},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),kr(a,at,d)):(d=g.cache,kr(a,at,d),d!==p.cache&&tf(a,[at],c,!0))),xt(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function tr(i){i.flags|=4}function Oy(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Uv(a)){if(a=hn.current,a!==null&&((Te&4194048)===Te?Dn!==null:(Te&62914560)!==Te&&(Te&536870912)===0||a!==Dn))throw qo=of,h0;i.flags|=8192}}function ic(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?lg():536870912,i.lanes|=a,Rs|=a)}function Zo(i,a){if(!Ae)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function qe(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(a)for(var p=i.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&65011712,d|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=c,a}function oT(i,a,c){var d=a.pendingProps;switch(Qd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(a),null;case 1:return qe(a),null;case 3:return c=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Qn(at),xr(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(zo(a)?tr(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,l0())),qe(a),null;case 26:return c=a.memoizedState,i===null?(tr(a),c!==null?(qe(a),Oy(a,c)):(qe(a),a.flags&=-16777217)):c?c!==i.memoizedState?(tr(a),qe(a),Oy(a,c)):(qe(a),a.flags&=-16777217):(i.memoizedProps!==d&&tr(a),qe(a),a.flags&=-16777217),null;case 27:ml(a),c=he.current;var p=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==d&&tr(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return qe(a),null}i=ie.current,zo(a)?o0(a):(i=Ov(p,d,c),a.stateNode=i,tr(a))}return qe(a),null;case 5:if(ml(a),c=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&tr(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return qe(a),null}if(i=ie.current,zo(a))o0(a);else{switch(p=yc(he.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?p.createElement("select",{is:d.is}):p.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?p.createElement(c,{is:d.is}):p.createElement(c)}}i[Ct]=a,i[Ut]=d;e:for(p=a.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break e;for(;p.sibling===null;){if(p.return===null||p.return===a)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}a.stateNode=i;e:switch(wt(i,c,d),c){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&tr(a)}}return qe(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&tr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(i=he.current,zo(a)){if(i=a.stateNode,c=a.memoizedProps,d=null,p=Rt,p!==null)switch(p.tag){case 27:case 5:d=p.memoizedProps}i[Ct]=a,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Ev(i.nodeValue,c)),i||wi(a)}else i=yc(i).createTextNode(d),i[Ct]=a,a.stateNode=i}return qe(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=zo(a),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Ct]=a}else Bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qe(a),p=!1}else p=l0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Zn(a),a):(Zn(a),null)}if(Zn(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=d!==null,i=i!==null&&i.memoizedState!==null,c){d=a.child,p=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(p=d.alternate.memoizedState.cachePool.pool);var g=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==p&&(d.flags|=2048)}return c!==i&&c&&(a.child.flags|=8192),ic(a,a.updateQueue),qe(a),null;case 4:return xr(),i===null&&uh(a.stateNode.containerInfo),qe(a),null;case 10:return Qn(a.type),qe(a),null;case 19:if(Z(lt),p=a.memoizedState,p===null)return qe(a),null;if(d=(a.flags&128)!==0,g=p.rendering,g===null)if(d)Zo(p,!1);else{if(Ye!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=Zl(i),g!==null){for(a.flags|=128,Zo(p,!1),i=g.updateQueue,a.updateQueue=i,ic(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)i0(c,i),c=c.sibling;return Q(lt,lt.current&1|2),a.child}i=i.sibling}p.tail!==null&&Nn()>ac&&(a.flags|=128,d=!0,Zo(p,!1),a.lanes=4194304)}else{if(!d)if(i=Zl(g),i!==null){if(a.flags|=128,d=!0,i=i.updateQueue,a.updateQueue=i,ic(a,i),Zo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Ae)return qe(a),null}else 2*Nn()-p.renderingStartTime>ac&&c!==536870912&&(a.flags|=128,d=!0,Zo(p,!1),a.lanes=4194304);p.isBackwards?(g.sibling=a.child,a.child=g):(i=p.last,i!==null?i.sibling=g:a.child=g,p.last=g)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Nn(),a.sibling=null,i=lt.current,Q(lt,d?i&1|2:i&1),a):(qe(a),null);case 22:case 23:return Zn(a),ff(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(qe(a),a.subtreeFlags&6&&(a.flags|=8192)):qe(a),c=a.updateQueue,c!==null&&ic(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),i!==null&&Z(Ti),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Qn(at),qe(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function aT(i,a){switch(Qd(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Qn(at),xr(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ml(a),null;case 13:if(Zn(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Bo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Z(lt),null;case 4:return xr(),null;case 10:return Qn(a.type),null;case 22:case 23:return Zn(a),ff(),i!==null&&Z(Ti),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Qn(at),null;case 25:return null;default:return null}}function Ny(i,a){switch(Qd(a),a.tag){case 3:Qn(at),xr();break;case 26:case 27:case 5:ml(a);break;case 4:xr();break;case 13:Zn(a);break;case 19:Z(lt);break;case 10:Qn(a.type);break;case 22:case 23:Zn(a),ff(),i!==null&&Z(Ti);break;case 24:Qn(at)}}function ea(i,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var p=d.next;c=p;do{if((c.tag&i)===i){d=void 0;var g=c.create,S=c.inst;d=g(),S.destroy=d}c=c.next}while(c!==p)}}catch(k){ze(a,a.return,k)}}function Nr(i,a,c){try{var d=a.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var g=p.next;d=g;do{if((d.tag&i)===i){var S=d.inst,k=S.destroy;if(k!==void 0){S.destroy=void 0,p=a;var _=c,L=k;try{L()}catch(H){ze(p,_,H)}}}d=d.next}while(d!==g)}}catch(H){ze(a,a.return,H)}}function Ry(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{b0(a,c)}catch(d){ze(i,i.return,d)}}}function Dy(i,a,c){c.props=_i(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){ze(i,a,d)}}function ta(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(p){ze(i,a,p)}}function jn(i,a){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(p){ze(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){ze(i,a,p)}else c.current=null}function jy(i){var a=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(p){ze(i,i.return,p)}}function Hf(i,a,c){try{var d=i.stateNode;AT(d,i.type,c,a),d[Ut]=a}catch(p){ze(i,i.return,p)}}function Ly(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Pr(i.type)||i.tag===4}function If(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ly(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Pr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $f(i,a,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=gc));else if(d!==4&&(d===27&&Pr(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for($f(i,a,c),i=i.sibling;i!==null;)$f(i,a,c),i=i.sibling}function sc(i,a,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(d!==4&&(d===27&&Pr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(sc(i,a,c),i=i.sibling;i!==null;)sc(i,a,c),i=i.sibling}function zy(i){var a=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);wt(a,d,c),a[Ct]=i,a[Ut]=c}catch(g){ze(i,i.return,g)}}var nr=!1,Ze=!1,qf=!1,By=typeof WeakSet=="function"?WeakSet:Set,ft=null;function lT(i,a){if(i=i.containerInfo,hh=Ec,i=Yg(i),Hd(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var S=0,k=-1,_=-1,L=0,H=0,$=i,z=null;t:for(;;){for(var B;$!==c||p!==0&&$.nodeType!==3||(k=S+p),$!==g||d!==0&&$.nodeType!==3||(_=S+d),$.nodeType===3&&(S+=$.nodeValue.length),(B=$.firstChild)!==null;)z=$,$=B;for(;;){if($===i)break t;if(z===c&&++L===p&&(k=S),z===g&&++H===d&&(_=S),(B=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=B}c=k===-1||_===-1?null:{start:k,end:_}}else c=null}c=c||{start:0,end:0}}else c=null;for(ph={focusedElem:i,selectionRange:c},Ec=!1,ft=a;ft!==null;)if(a=ft,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,ft=i;else for(;ft!==null;){switch(a=ft,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,c=a,p=g.memoizedProps,g=g.memoizedState,d=c.stateNode;try{var ce=_i(c.type,p,c.elementType===c.type);i=d.getSnapshotBeforeUpdate(ce,g),d.__reactInternalSnapshotBeforeUpdate=i}catch(se){ze(c,c.return,se)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)yh(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,ft=i;break}ft=a.return}}function Uy(i,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Rr(i,c),d&4&&ea(5,c);break;case 1:if(Rr(i,c),d&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(S){ze(c,c.return,S)}else{var p=_i(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ze(c,c.return,S)}}d&64&&Ry(c),d&512&&ta(c,c.return);break;case 3:if(Rr(i,c),d&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{b0(i,a)}catch(S){ze(c,c.return,S)}}break;case 27:a===null&&d&4&&zy(c);case 26:case 5:Rr(i,c),a===null&&d&4&&jy(c),d&512&&ta(c,c.return);break;case 12:Rr(i,c);break;case 13:Rr(i,c),d&4&&Iy(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=yT.bind(null,c),LT(i,c))));break;case 22:if(d=c.memoizedState!==null||nr,!d){a=a!==null&&a.memoizedState!==null||Ze,p=nr;var g=Ze;nr=d,(Ze=a)&&!g?Dr(i,c,(c.subtreeFlags&8772)!==0):Rr(i,c),nr=p,Ze=g}break;case 30:break;default:Rr(i,c)}}function Py(i){var a=i.alternate;a!==null&&(i.alternate=null,Py(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Sd(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $e=null,It=!1;function rr(i,a,c){for(c=c.child;c!==null;)Hy(i,a,c),c=c.sibling}function Hy(i,a,c){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(wo,c)}catch{}switch(c.tag){case 26:Ze||jn(c,a),rr(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ze||jn(c,a);var d=$e,p=It;Pr(c.type)&&($e=c.stateNode,It=!1),rr(i,a,c),ua(c.stateNode),$e=d,It=p;break;case 5:Ze||jn(c,a);case 6:if(d=$e,p=It,$e=null,rr(i,a,c),$e=d,It=p,$e!==null)if(It)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(c.stateNode)}catch(g){ze(c,a,g)}else try{$e.removeChild(c.stateNode)}catch(g){ze(c,a,g)}break;case 18:$e!==null&&(It?(i=$e,Av(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),va(i)):Av($e,c.stateNode));break;case 4:d=$e,p=It,$e=c.stateNode.containerInfo,It=!0,rr(i,a,c),$e=d,It=p;break;case 0:case 11:case 14:case 15:Ze||Nr(2,c,a),Ze||Nr(4,c,a),rr(i,a,c);break;case 1:Ze||(jn(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Dy(c,a,d)),rr(i,a,c);break;case 21:rr(i,a,c);break;case 22:Ze=(d=Ze)||c.memoizedState!==null,rr(i,a,c),Ze=d;break;default:rr(i,a,c)}}function Iy(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{va(i)}catch(c){ze(a,a.return,c)}}function cT(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new By),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new By),a;default:throw Error(r(435,i.tag))}}function Vf(i,a){var c=cT(i);a.forEach(function(d){var p=vT.bind(null,i,d);c.has(d)||(c.add(d),d.then(p,p))})}function Qt(i,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d],g=i,S=a,k=S;e:for(;k!==null;){switch(k.tag){case 27:if(Pr(k.type)){$e=k.stateNode,It=!1;break e}break;case 5:$e=k.stateNode,It=!1;break e;case 3:case 4:$e=k.stateNode.containerInfo,It=!0;break e}k=k.return}if($e===null)throw Error(r(160));Hy(g,S,p),$e=null,It=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)$y(a,i),a=a.sibling}var wn=null;function $y(i,a){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Qt(a,i),Xt(i),d&4&&(Nr(3,i,i.return),ea(3,i),Nr(5,i,i.return));break;case 1:Qt(a,i),Xt(i),d&512&&(Ze||c===null||jn(c,c.return)),d&64&&nr&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var p=wn;if(Qt(a,i),Xt(i),d&512&&(Ze||c===null||jn(c,c.return)),d&4){var g=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,p=p.ownerDocument||p;t:switch(d){case"title":g=p.getElementsByTagName("title")[0],(!g||g[To]||g[Ct]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(d),p.head.insertBefore(g,p.querySelector("head > title"))),wt(g,d,c),g[Ct]=i,ut(g),d=g;break e;case"link":var S=zv("link","href",p).get(d+(c.href||""));if(S){for(var k=0;k<S.length;k++)if(g=S[k],g.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&g.getAttribute("rel")===(c.rel==null?null:c.rel)&&g.getAttribute("title")===(c.title==null?null:c.title)&&g.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(k,1);break t}}g=p.createElement(d),wt(g,d,c),p.head.appendChild(g);break;case"meta":if(S=zv("meta","content",p).get(d+(c.content||""))){for(k=0;k<S.length;k++)if(g=S[k],g.getAttribute("content")===(c.content==null?null:""+c.content)&&g.getAttribute("name")===(c.name==null?null:c.name)&&g.getAttribute("property")===(c.property==null?null:c.property)&&g.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&g.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(k,1);break t}}g=p.createElement(d),wt(g,d,c),p.head.appendChild(g);break;default:throw Error(r(468,d))}g[Ct]=i,ut(g),d=g}i.stateNode=d}else Bv(p,i.type,i.stateNode);else i.stateNode=Lv(p,d,i.memoizedProps);else g!==d?(g===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):g.count--,d===null?Bv(p,i.type,i.stateNode):Lv(p,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Hf(i,i.memoizedProps,c.memoizedProps)}break;case 27:Qt(a,i),Xt(i),d&512&&(Ze||c===null||jn(c,c.return)),c!==null&&d&4&&Hf(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Qt(a,i),Xt(i),d&512&&(Ze||c===null||jn(c,c.return)),i.flags&32){p=i.stateNode;try{us(p,"")}catch(B){ze(i,i.return,B)}}d&4&&i.stateNode!=null&&(p=i.memoizedProps,Hf(i,p,c!==null?c.memoizedProps:p)),d&1024&&(qf=!0);break;case 6:if(Qt(a,i),Xt(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(B){ze(i,i.return,B)}}break;case 3:if(xc=null,p=wn,wn=vc(a.containerInfo),Qt(a,i),wn=p,Xt(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{va(a.containerInfo)}catch(B){ze(i,i.return,B)}qf&&(qf=!1,qy(i));break;case 4:d=wn,wn=vc(i.stateNode.containerInfo),Qt(a,i),Xt(i),wn=d;break;case 12:Qt(a,i),Xt(i);break;case 13:Qt(a,i),Xt(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Jf=Nn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Vf(i,d)));break;case 22:p=i.memoizedState!==null;var _=c!==null&&c.memoizedState!==null,L=nr,H=Ze;if(nr=L||p,Ze=H||_,Qt(a,i),Ze=H,nr=L,Xt(i),d&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(c===null||_||nr||Ze||Ai(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){_=c=a;try{if(g=_.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=_.stateNode;var $=_.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;k.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){ze(_,_.return,B)}}}else if(a.tag===6){if(c===null){_=a;try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch(B){ze(_,_.return,B)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Vf(i,c))));break;case 19:Qt(a,i),Xt(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Vf(i,d)));break;case 30:break;case 21:break;default:Qt(a,i),Xt(i)}}function Xt(i){var a=i.flags;if(a&2){try{for(var c,d=i.return;d!==null;){if(Ly(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var p=c.stateNode,g=If(i);sc(i,g,p);break;case 5:var S=c.stateNode;c.flags&32&&(us(S,""),c.flags&=-33);var k=If(i);sc(i,k,S);break;case 3:case 4:var _=c.stateNode.containerInfo,L=If(i);$f(i,L,_);break;default:throw Error(r(161))}}catch(H){ze(i,i.return,H)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function qy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;qy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Rr(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Uy(i,a.alternate,a),a=a.sibling}function Ai(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Nr(4,a,a.return),Ai(a);break;case 1:jn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Dy(a,a.return,c),Ai(a);break;case 27:ua(a.stateNode);case 26:case 5:jn(a,a.return),Ai(a);break;case 22:a.memoizedState===null&&Ai(a);break;case 30:Ai(a);break;default:Ai(a)}i=i.sibling}}function Dr(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,p=i,g=a,S=g.flags;switch(g.tag){case 0:case 11:case 15:Dr(p,g,c),ea(4,g);break;case 1:if(Dr(p,g,c),d=g,p=d.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(L){ze(d,d.return,L)}if(d=g,p=d.updateQueue,p!==null){var k=d.stateNode;try{var _=p.shared.hiddenCallbacks;if(_!==null)for(p.shared.hiddenCallbacks=null,p=0;p<_.length;p++)v0(_[p],k)}catch(L){ze(d,d.return,L)}}c&&S&64&&Ry(g),ta(g,g.return);break;case 27:zy(g);case 26:case 5:Dr(p,g,c),c&&d===null&&S&4&&jy(g),ta(g,g.return);break;case 12:Dr(p,g,c);break;case 13:Dr(p,g,c),c&&S&4&&Iy(p,g);break;case 22:g.memoizedState===null&&Dr(p,g,c),ta(g,g.return);break;case 30:break;default:Dr(p,g,c)}a=a.sibling}}function Kf(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Ho(c))}function Ff(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ho(i))}function Ln(i,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Vy(i,a,c,d),a=a.sibling}function Vy(i,a,c,d){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Ln(i,a,c,d),p&2048&&ea(9,a);break;case 1:Ln(i,a,c,d);break;case 3:Ln(i,a,c,d),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ho(i)));break;case 12:if(p&2048){Ln(i,a,c,d),i=a.stateNode;try{var g=a.memoizedProps,S=g.id,k=g.onPostCommit;typeof k=="function"&&k(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(_){ze(a,a.return,_)}}else Ln(i,a,c,d);break;case 13:Ln(i,a,c,d);break;case 23:break;case 22:g=a.stateNode,S=a.alternate,a.memoizedState!==null?g._visibility&2?Ln(i,a,c,d):na(i,a):g._visibility&2?Ln(i,a,c,d):(g._visibility|=2,Ms(i,a,c,d,(a.subtreeFlags&10256)!==0)),p&2048&&Kf(S,a);break;case 24:Ln(i,a,c,d),p&2048&&Ff(a.alternate,a);break;default:Ln(i,a,c,d)}}function Ms(i,a,c,d,p){for(p=p&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,S=a,k=c,_=d,L=S.flags;switch(S.tag){case 0:case 11:case 15:Ms(g,S,k,_,p),ea(8,S);break;case 23:break;case 22:var H=S.stateNode;S.memoizedState!==null?H._visibility&2?Ms(g,S,k,_,p):na(g,S):(H._visibility|=2,Ms(g,S,k,_,p)),p&&L&2048&&Kf(S.alternate,S);break;case 24:Ms(g,S,k,_,p),p&&L&2048&&Ff(S.alternate,S);break;default:Ms(g,S,k,_,p)}a=a.sibling}}function na(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,d=a,p=d.flags;switch(d.tag){case 22:na(c,d),p&2048&&Kf(d.alternate,d);break;case 24:na(c,d),p&2048&&Ff(d.alternate,d);break;default:na(c,d)}a=a.sibling}}var ra=8192;function Os(i){if(i.subtreeFlags&ra)for(i=i.child;i!==null;)Ky(i),i=i.sibling}function Ky(i){switch(i.tag){case 26:Os(i),i.flags&ra&&i.memoizedState!==null&&YT(wn,i.memoizedState,i.memoizedProps);break;case 5:Os(i);break;case 3:case 4:var a=wn;wn=vc(i.stateNode.containerInfo),Os(i),wn=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=ra,ra=16777216,Os(i),ra=a):Os(i));break;default:Os(i)}}function Fy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function ia(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];ft=d,Yy(d,i)}Fy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Gy(i),i=i.sibling}function Gy(i){switch(i.tag){case 0:case 11:case 15:ia(i),i.flags&2048&&Nr(9,i,i.return);break;case 3:ia(i);break;case 12:ia(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,oc(i)):ia(i);break;default:ia(i)}}function oc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];ft=d,Yy(d,i)}Fy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Nr(8,a,a.return),oc(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,oc(a));break;default:oc(a)}i=i.sibling}}function Yy(i,a){for(;ft!==null;){var c=ft;switch(c.tag){case 0:case 11:case 15:Nr(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ho(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ft=d;else e:for(c=i;ft!==null;){d=ft;var p=d.sibling,g=d.return;if(Py(d),d===c){ft=null;break e}if(p!==null){p.return=g,ft=p;break e}ft=g}}}var uT={getCacheForType:function(i){var a=_t(at),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c}},dT=typeof WeakMap=="function"?WeakMap:Map,Me=0,Ue=null,Se=null,Te=0,Oe=0,Zt=null,jr=!1,Ns=!1,Gf=!1,ir=0,Ye=0,Lr=0,Mi=0,Yf=0,pn=0,Rs=0,sa=null,$t=null,Wf=!1,Jf=0,ac=1/0,lc=null,zr=null,St=0,Br=null,Ds=null,js=0,Qf=0,Xf=null,Wy=null,oa=0,Zf=null;function en(){if((Me&2)!==0&&Te!==0)return Te&-Te;if(P.T!==null){var i=Ss;return i!==0?i:oh()}return dg()}function Jy(){pn===0&&(pn=(Te&536870912)===0||Ae?ag():536870912);var i=hn.current;return i!==null&&(i.flags|=32),pn}function tn(i,a,c){(i===Ue&&(Oe===2||Oe===9)||i.cancelPendingCommit!==null)&&(Ls(i,0),Ur(i,Te,pn,!1)),ko(i,c),((Me&2)===0||i!==Ue)&&(i===Ue&&((Me&2)===0&&(Mi|=c),Ye===4&&Ur(i,Te,pn,!1)),zn(i))}function Qy(i,a,c){if((Me&6)!==0)throw Error(r(327));var d=!c&&(a&124)===0&&(a&i.expiredLanes)===0||Eo(i,a),p=d?pT(i,a):nh(i,a,!0),g=d;do{if(p===0){Ns&&!d&&Ur(i,a,0,!1);break}else{if(c=i.current.alternate,g&&!fT(c)){p=nh(i,a,!1),g=!1;continue}if(p===2){if(g=a,i.errorRecoveryDisabledLanes&g)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var k=i;p=sa;var _=k.current.memoizedState.isDehydrated;if(_&&(Ls(k,S).flags|=256),S=nh(k,S,!1),S!==2){if(Gf&&!_){k.errorRecoveryDisabledLanes|=g,Mi|=g,p=4;break e}g=$t,$t=p,g!==null&&($t===null?$t=g:$t.push.apply($t,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Ls(i,0),Ur(i,a,0,!0);break}e:{switch(d=i,g=p,g){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ur(d,a,pn,!jr);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Jf+300-Nn(),10<p)){if(Ur(d,a,pn,!jr),bl(d,0,!0)!==0)break e;d.timeoutHandle=Cv(Xy.bind(null,d,c,$t,lc,Wf,a,pn,Mi,Rs,jr,g,2,-0,0),p);break e}Xy(d,c,$t,lc,Wf,a,pn,Mi,Rs,jr,g,0,-0,0)}}break}while(!0);zn(i)}function Xy(i,a,c,d,p,g,S,k,_,L,H,$,z,B){if(i.timeoutHandle=-1,$=a.subtreeFlags,($&8192||($&16785408)===16785408)&&(ha={stylesheets:null,count:0,unsuspend:GT},Ky(a),$=WT(),$!==null)){i.cancelPendingCommit=$(sv.bind(null,i,a,g,c,d,p,S,k,_,H,1,z,B)),Ur(i,g,S,!L);return}sv(i,a,g,c,d,p,S,k,_)}function fT(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var p=c[d],g=p.getSnapshot;p=p.value;try{if(!Wt(g(),p))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ur(i,a,c,d){a&=~Yf,a&=~Mi,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var p=a;0<p;){var g=31-Yt(p),S=1<<g;d[g]=-1,p&=~S}c!==0&&cg(i,c,a)}function cc(){return(Me&6)===0?(aa(0),!1):!0}function eh(){if(Se!==null){if(Oe===0)var i=Se.return;else i=Se,Jn=Ei=null,yf(i),_s=null,Qo=0,i=Se;for(;i!==null;)Ny(i.alternate,i),i=i.return;Se=null}}function Ls(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,OT(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),eh(),Ue=i,Se=c=Gn(i.current,null),Te=a,Oe=0,Zt=null,jr=!1,Ns=Eo(i,a),Gf=!1,Rs=pn=Yf=Mi=Lr=Ye=0,$t=sa=null,Wf=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var p=31-Yt(d),g=1<<p;a|=i[p],d&=~g}return ir=a,Nl(),c}function Zy(i,a){be=null,P.H=Jl,a===$o||a===Hl?(a=g0(),Oe=3):a===h0?(a=g0(),Oe=4):Oe=a===yy?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Zt=a,Se===null&&(Ye=1,tc(i,cn(a,i.current)))}function ev(){var i=P.H;return P.H=Jl,i===null?Jl:i}function tv(){var i=P.A;return P.A=uT,i}function th(){Ye=4,jr||(Te&4194048)!==Te&&hn.current!==null||(Ns=!0),(Lr&134217727)===0&&(Mi&134217727)===0||Ue===null||Ur(Ue,Te,pn,!1)}function nh(i,a,c){var d=Me;Me|=2;var p=ev(),g=tv();(Ue!==i||Te!==a)&&(lc=null,Ls(i,a)),a=!1;var S=Ye;e:do try{if(Oe!==0&&Se!==null){var k=Se,_=Zt;switch(Oe){case 8:eh(),S=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(a=!0);var L=Oe;if(Oe=0,Zt=null,zs(i,k,_,L),c&&Ns){S=0;break e}break;default:L=Oe,Oe=0,Zt=null,zs(i,k,_,L)}}hT(),S=Ye;break}catch(H){Zy(i,H)}while(!0);return a&&i.shellSuspendCounter++,Jn=Ei=null,Me=d,P.H=p,P.A=g,Se===null&&(Ue=null,Te=0,Nl()),S}function hT(){for(;Se!==null;)nv(Se)}function pT(i,a){var c=Me;Me|=2;var d=ev(),p=tv();Ue!==i||Te!==a?(lc=null,ac=Nn()+500,Ls(i,a)):Ns=Eo(i,a);e:do try{if(Oe!==0&&Se!==null){a=Se;var g=Zt;t:switch(Oe){case 1:Oe=0,Zt=null,zs(i,a,g,1);break;case 2:case 9:if(p0(g)){Oe=0,Zt=null,rv(a);break}a=function(){Oe!==2&&Oe!==9||Ue!==i||(Oe=7),zn(i)},g.then(a,a);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:p0(g)?(Oe=0,Zt=null,rv(a)):(Oe=0,Zt=null,zs(i,a,g,7));break;case 5:var S=null;switch(Se.tag){case 26:S=Se.memoizedState;case 5:case 27:var k=Se;if(!S||Uv(S)){Oe=0,Zt=null;var _=k.sibling;if(_!==null)Se=_;else{var L=k.return;L!==null?(Se=L,uc(L)):Se=null}break t}}Oe=0,Zt=null,zs(i,a,g,5);break;case 6:Oe=0,Zt=null,zs(i,a,g,6);break;case 8:eh(),Ye=6;break e;default:throw Error(r(462))}}mT();break}catch(H){Zy(i,H)}while(!0);return Jn=Ei=null,P.H=d,P.A=p,Me=c,Se!==null?0:(Ue=null,Te=0,Nl(),Ye)}function mT(){for(;Se!==null&&!BE();)nv(Se)}function nv(i){var a=My(i.alternate,i,ir);i.memoizedProps=i.pendingProps,a===null?uc(i):Se=a}function rv(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Ey(c,a,a.pendingProps,a.type,void 0,Te);break;case 11:a=Ey(c,a,a.pendingProps,a.type.render,a.ref,Te);break;case 5:yf(a);default:Ny(c,a),a=Se=i0(a,ir),a=My(c,a,ir)}i.memoizedProps=i.pendingProps,a===null?uc(i):Se=a}function zs(i,a,c,d){Jn=Ei=null,yf(a),_s=null,Qo=0;var p=a.return;try{if(iT(i,p,a,c,Te)){Ye=1,tc(i,cn(c,i.current)),Se=null;return}}catch(g){if(p!==null)throw Se=p,g;Ye=1,tc(i,cn(c,i.current)),Se=null;return}a.flags&32768?(Ae||d===1?i=!0:Ns||(Te&536870912)!==0?i=!1:(jr=i=!0,(d===2||d===9||d===3||d===6)&&(d=hn.current,d!==null&&d.tag===13&&(d.flags|=16384))),iv(a,i)):uc(a)}function uc(i){var a=i;do{if((a.flags&32768)!==0){iv(a,jr);return}i=a.return;var c=oT(a.alternate,a,ir);if(c!==null){Se=c;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=i}while(a!==null);Ye===0&&(Ye=5)}function iv(i,a){do{var c=aT(i.alternate,i);if(c!==null){c.flags&=32767,Se=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){Se=i;return}Se=i=c}while(i!==null);Ye=6,Se=null}function sv(i,a,c,d,p,g,S,k,_){i.cancelPendingCommit=null;do dc();while(St!==0);if((Me&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(g=a.lanes|a.childLanes,g|=Kd,GE(i,c,g,S,k,_),i===Ue&&(Se=Ue=null,Te=0),Ds=a,Br=i,js=c,Qf=g,Xf=p,Wy=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bT(gl,function(){return uv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,p=W.p,W.p=2,S=Me,Me|=4;try{lT(i,a,c)}finally{Me=S,W.p=p,P.T=d}}St=1,ov(),av(),lv()}}function ov(){if(St===1){St=0;var i=Br,a=Ds,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=W.p;W.p=2;var p=Me;Me|=4;try{$y(a,i);var g=ph,S=Yg(i.containerInfo),k=g.focusedElem,_=g.selectionRange;if(S!==k&&k&&k.ownerDocument&&Gg(k.ownerDocument.documentElement,k)){if(_!==null&&Hd(k)){var L=_.start,H=_.end;if(H===void 0&&(H=L),"selectionStart"in k)k.selectionStart=L,k.selectionEnd=Math.min(H,k.value.length);else{var $=k.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var B=z.getSelection(),ce=k.textContent.length,se=Math.min(_.start,ce),je=_.end===void 0?se:Math.min(_.end,ce);!B.extend&&se>je&&(S=je,je=se,se=S);var D=Fg(k,se),M=Fg(k,je);if(D&&M&&(B.rangeCount!==1||B.anchorNode!==D.node||B.anchorOffset!==D.offset||B.focusNode!==M.node||B.focusOffset!==M.offset)){var j=$.createRange();j.setStart(D.node,D.offset),B.removeAllRanges(),se>je?(B.addRange(j),B.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),B.addRange(j))}}}}for($=[],B=k;B=B.parentNode;)B.nodeType===1&&$.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<$.length;k++){var I=$[k];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Ec=!!hh,ph=hh=null}finally{Me=p,W.p=d,P.T=c}}i.current=a,St=2}}function av(){if(St===2){St=0;var i=Br,a=Ds,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=W.p;W.p=2;var p=Me;Me|=4;try{Uy(i,a.alternate,a)}finally{Me=p,W.p=d,P.T=c}}St=3}}function lv(){if(St===4||St===3){St=0,UE();var i=Br,a=Ds,c=js,d=Wy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?St=5:(St=0,Ds=Br=null,cv(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(zr=null),bd(c),a=a.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(wo,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=P.T,p=W.p,W.p=2,P.T=null;try{for(var g=i.onRecoverableError,S=0;S<d.length;S++){var k=d[S];g(k.value,{componentStack:k.stack})}}finally{P.T=a,W.p=p}}(js&3)!==0&&dc(),zn(i),p=i.pendingLanes,(c&4194090)!==0&&(p&42)!==0?i===Zf?oa++:(oa=0,Zf=i):oa=0,aa(0)}}function cv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ho(a)))}function dc(i){return ov(),av(),lv(),uv()}function uv(){if(St!==5)return!1;var i=Br,a=Qf;Qf=0;var c=bd(js),d=P.T,p=W.p;try{W.p=32>c?32:c,P.T=null,c=Xf,Xf=null;var g=Br,S=js;if(St=0,Ds=Br=null,js=0,(Me&6)!==0)throw Error(r(331));var k=Me;if(Me|=4,Gy(g.current),Vy(g,g.current,S,c),Me=k,aa(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(wo,g)}catch{}return!0}finally{W.p=p,P.T=d,cv(i,a)}}function dv(i,a,c){a=cn(c,a),a=Nf(i.stateNode,a,2),i=_r(i,a,2),i!==null&&(ko(i,2),zn(i))}function ze(i,a,c){if(i.tag===3)dv(i,i,c);else for(;a!==null;){if(a.tag===3){dv(a,i,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zr===null||!zr.has(d))){i=cn(c,i),c=my(2),d=_r(a,c,2),d!==null&&(gy(c,d,a,i),ko(d,2),zn(d));break}}a=a.return}}function rh(i,a,c){var d=i.pingCache;if(d===null){d=i.pingCache=new dT;var p=new Set;d.set(a,p)}else p=d.get(a),p===void 0&&(p=new Set,d.set(a,p));p.has(c)||(Gf=!0,p.add(c),i=gT.bind(null,i,a,c),a.then(i,i))}function gT(i,a,c){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Ue===i&&(Te&c)===c&&(Ye===4||Ye===3&&(Te&62914560)===Te&&300>Nn()-Jf?(Me&2)===0&&Ls(i,0):Yf|=c,Rs===Te&&(Rs=0)),zn(i)}function fv(i,a){a===0&&(a=lg()),i=ys(i,a),i!==null&&(ko(i,a),zn(i))}function yT(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),fv(i,c)}function vT(i,a){var c=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),fv(i,c)}function bT(i,a){return md(i,a)}var fc=null,Bs=null,ih=!1,hc=!1,sh=!1,Oi=0;function zn(i){i!==Bs&&i.next===null&&(Bs===null?fc=Bs=i:Bs=Bs.next=i),hc=!0,ih||(ih=!0,ST())}function aa(i,a){if(!sh&&hc){sh=!0;do for(var c=!1,d=fc;d!==null;){if(i!==0){var p=d.pendingLanes;if(p===0)var g=0;else{var S=d.suspendedLanes,k=d.pingedLanes;g=(1<<31-Yt(42|i)+1)-1,g&=p&~(S&~k),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(c=!0,gv(d,g))}else g=Te,g=bl(d,d===Ue?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||Eo(d,g)||(c=!0,gv(d,g));d=d.next}while(c);sh=!1}}function xT(){hv()}function hv(){hc=ih=!1;var i=0;Oi!==0&&(MT()&&(i=Oi),Oi=0);for(var a=Nn(),c=null,d=fc;d!==null;){var p=d.next,g=pv(d,a);g===0?(d.next=null,c===null?fc=p:c.next=p,p===null&&(Bs=c)):(c=d,(i!==0||(g&3)!==0)&&(hc=!0)),d=p}aa(i)}function pv(i,a){for(var c=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var S=31-Yt(g),k=1<<S,_=p[S];_===-1?((k&c)===0||(k&d)!==0)&&(p[S]=FE(k,a)):_<=a&&(i.expiredLanes|=k),g&=~k}if(a=Ue,c=Te,c=bl(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===a&&(Oe===2||Oe===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&gd(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Eo(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(d!==null&&gd(d),bd(c)){case 2:case 8:c=sg;break;case 32:c=gl;break;case 268435456:c=og;break;default:c=gl}return d=mv.bind(null,i),c=md(c,d),i.callbackPriority=a,i.callbackNode=c,a}return d!==null&&d!==null&&gd(d),i.callbackPriority=2,i.callbackNode=null,2}function mv(i,a){if(St!==0&&St!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(dc()&&i.callbackNode!==c)return null;var d=Te;return d=bl(i,i===Ue?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Qy(i,d,a),pv(i,Nn()),i.callbackNode!=null&&i.callbackNode===c?mv.bind(null,i):null)}function gv(i,a){if(dc())return null;Qy(i,a,!0)}function ST(){NT(function(){(Me&6)!==0?md(ig,xT):hv()})}function oh(){return Oi===0&&(Oi=ag()),Oi}function yv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kl(""+i)}function vv(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function wT(i,a,c,d,p){if(a==="submit"&&c&&c.stateNode===p){var g=yv((p[Ut]||null).action),S=d.submitter;S&&(a=(a=S[Ut]||null)?yv(a.formAction):S.getAttribute("formAction"),a!==null&&(g=a,S=null));var k=new Al("action","action",null,d,p);i.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Oi!==0){var _=S?vv(p,S):new FormData(p);Cf(c,{pending:!0,data:_,method:p.method,action:g},null,_)}}else typeof g=="function"&&(k.preventDefault(),_=S?vv(p,S):new FormData(p),Cf(c,{pending:!0,data:_,method:p.method,action:g},g,_))},currentTarget:p}]})}}for(var ah=0;ah<Vd.length;ah++){var lh=Vd[ah],ET=lh.toLowerCase(),kT=lh[0].toUpperCase()+lh.slice(1);Sn(ET,"on"+kT)}Sn(Qg,"onAnimationEnd"),Sn(Xg,"onAnimationIteration"),Sn(Zg,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(Ik,"onTransitionRun"),Sn($k,"onTransitionStart"),Sn(qk,"onTransitionCancel"),Sn(e0,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(la));function bv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],p=d.event;d=d.listeners;e:{var g=void 0;if(a)for(var S=d.length-1;0<=S;S--){var k=d[S],_=k.instance,L=k.currentTarget;if(k=k.listener,_!==g&&p.isPropagationStopped())break e;g=k,p.currentTarget=L;try{g(p)}catch(H){ec(H)}p.currentTarget=null,g=_}else for(S=0;S<d.length;S++){if(k=d[S],_=k.instance,L=k.currentTarget,k=k.listener,_!==g&&p.isPropagationStopped())break e;g=k,p.currentTarget=L;try{g(p)}catch(H){ec(H)}p.currentTarget=null,g=_}}}}function we(i,a){var c=a[xd];c===void 0&&(c=a[xd]=new Set);var d=i+"__bubble";c.has(d)||(xv(a,i,2,!1),c.add(d))}function ch(i,a,c){var d=0;a&&(d|=4),xv(c,i,d,a)}var pc="_reactListening"+Math.random().toString(36).slice(2);function uh(i){if(!i[pc]){i[pc]=!0,hg.forEach(function(c){c!=="selectionchange"&&(TT.has(c)||ch(c,!1,i),ch(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[pc]||(a[pc]=!0,ch("selectionchange",!1,a))}}function xv(i,a,c,d){switch(Vv(a)){case 2:var p=XT;break;case 8:p=ZT;break;default:p=kh}c=p.bind(null,a,c,i),p=void 0,!Nd||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(a,c,{capture:!0,passive:p}):i.addEventListener(a,c,!0):p!==void 0?i.addEventListener(a,c,{passive:p}):i.addEventListener(a,c,!1)}function dh(i,a,c,d,p){var g=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var k=d.stateNode.containerInfo;if(k===p)break;if(S===4)for(S=d.return;S!==null;){var _=S.tag;if((_===3||_===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;k!==null;){if(S=rs(k),S===null)return;if(_=S.tag,_===5||_===6||_===26||_===27){d=g=S;continue e}k=k.parentNode}}d=d.return}_g(function(){var L=g,H=Md(c),$=[];e:{var z=t0.get(i);if(z!==void 0){var B=Al,ce=i;switch(i){case"keypress":if(Cl(c)===0)break e;case"keydown":case"keyup":B=bk;break;case"focusin":ce="focus",B=Ld;break;case"focusout":ce="blur",B=Ld;break;case"beforeblur":case"afterblur":B=Ld;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=wk;break;case Qg:case Xg:case Zg:B=uk;break;case e0:B=kk;break;case"scroll":case"scrollend":B=sk;break;case"wheel":B=Ck;break;case"copy":case"cut":case"paste":B=fk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Rg;break;case"toggle":case"beforetoggle":B=Ak}var se=(a&4)!==0,je=!se&&(i==="scroll"||i==="scrollend"),D=se?z!==null?z+"Capture":null:z;se=[];for(var M=L,j;M!==null;){var I=M;if(j=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||j===null||D===null||(I=_o(M,D),I!=null&&se.push(ca(M,I,j))),je)break;M=M.return}0<se.length&&(z=new B(z,ce,null,c,H),$.push({event:z,listeners:se}))}}if((a&7)===0){e:{if(z=i==="mouseover"||i==="pointerover",B=i==="mouseout"||i==="pointerout",z&&c!==Ad&&(ce=c.relatedTarget||c.fromElement)&&(rs(ce)||ce[ns]))break e;if((B||z)&&(z=H.window===H?H:(z=H.ownerDocument)?z.defaultView||z.parentWindow:window,B?(ce=c.relatedTarget||c.toElement,B=L,ce=ce?rs(ce):null,ce!==null&&(je=o(ce),se=ce.tag,ce!==je||se!==5&&se!==27&&se!==6)&&(ce=null)):(B=null,ce=L),B!==ce)){if(se=Og,I="onMouseLeave",D="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(se=Rg,I="onPointerLeave",D="onPointerEnter",M="pointer"),je=B==null?z:Co(B),j=ce==null?z:Co(ce),z=new se(I,M+"leave",B,c,H),z.target=je,z.relatedTarget=j,I=null,rs(H)===L&&(se=new se(D,M+"enter",ce,c,H),se.target=j,se.relatedTarget=je,I=se),je=I,B&&ce)t:{for(se=B,D=ce,M=0,j=se;j;j=Us(j))M++;for(j=0,I=D;I;I=Us(I))j++;for(;0<M-j;)se=Us(se),M--;for(;0<j-M;)D=Us(D),j--;for(;M--;){if(se===D||D!==null&&se===D.alternate)break t;se=Us(se),D=Us(D)}se=null}else se=null;B!==null&&Sv($,z,B,se,!1),ce!==null&&je!==null&&Sv($,je,ce,se,!0)}}e:{if(z=L?Co(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ee=Hg;else if(Ug(z))if(Ig)ee=Uk;else{ee=zk;var xe=Lk}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&_d(L.elementType)&&(ee=Hg):ee=Bk;if(ee&&(ee=ee(i,L))){Pg($,ee,c,H);break e}xe&&xe(i,z,L),i==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&Cd(z,"number",z.value)}switch(xe=L?Co(L):window,i){case"focusin":(Ug(xe)||xe.contentEditable==="true")&&(ps=xe,Id=L,Lo=null);break;case"focusout":Lo=Id=ps=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,Wg($,c,H);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":Wg($,c,H)}var te;if(Bd)e:{switch(i){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else hs?zg(i,c)&&(oe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(oe="onCompositionStart");oe&&(Dg&&c.locale!=="ko"&&(hs||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&hs&&(te=Ag()):(Er=H,Rd="value"in Er?Er.value:Er.textContent,hs=!0)),xe=mc(L,oe),0<xe.length&&(oe=new Ng(oe,i,null,c,H),$.push({event:oe,listeners:xe}),te?oe.data=te:(te=Bg(c),te!==null&&(oe.data=te)))),(te=Ok?Nk(i,c):Rk(i,c))&&(oe=mc(L,"onBeforeInput"),0<oe.length&&(xe=new Ng("onBeforeInput","beforeinput",null,c,H),$.push({event:xe,listeners:oe}),xe.data=te)),wT($,i,L,c,H)}bv($,a)})}function ca(i,a,c){return{instance:i,listener:a,currentTarget:c}}function mc(i,a){for(var c=a+"Capture",d=[];i!==null;){var p=i,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=_o(i,c),p!=null&&d.unshift(ca(i,p,g)),p=_o(i,a),p!=null&&d.push(ca(i,p,g))),i.tag===3)return d;i=i.return}return[]}function Us(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Sv(i,a,c,d,p){for(var g=a._reactName,S=[];c!==null&&c!==d;){var k=c,_=k.alternate,L=k.stateNode;if(k=k.tag,_!==null&&_===d)break;k!==5&&k!==26&&k!==27||L===null||(_=L,p?(L=_o(c,g),L!=null&&S.unshift(ca(c,L,_))):p||(L=_o(c,g),L!=null&&S.push(ca(c,L,_)))),c=c.return}S.length!==0&&i.push({event:a,listeners:S})}var CT=/\r\n?/g,_T=/\u0000|\uFFFD/g;function wv(i){return(typeof i=="string"?i:""+i).replace(CT,`
`).replace(_T,"")}function Ev(i,a){return a=wv(a),wv(i)===a}function gc(){}function De(i,a,c,d,p,g){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||us(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&us(i,""+d);break;case"className":Sl(i,"class",d);break;case"tabIndex":Sl(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(i,c,d);break;case"style":Tg(i,d,g);break;case"data":if(a!=="object"){Sl(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=kl(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(c==="formAction"?(a!=="input"&&De(i,a,"name",p.name,p,null),De(i,a,"formEncType",p.formEncType,p,null),De(i,a,"formMethod",p.formMethod,p,null),De(i,a,"formTarget",p.formTarget,p,null)):(De(i,a,"encType",p.encType,p,null),De(i,a,"method",p.method,p,null),De(i,a,"target",p.target,p,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=kl(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=gc);break;case"onScroll":d!=null&&we("scroll",i);break;case"onScrollEnd":d!=null&&we("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=kl(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":we("beforetoggle",i),we("toggle",i),xl(i,"popover",d);break;case"xlinkActuate":Kn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Kn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Kn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Kn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Kn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Kn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Kn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":xl(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=rk.get(c)||c,xl(i,c,d))}}function fh(i,a,c,d,p,g){switch(c){case"style":Tg(i,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof d=="string"?us(i,d):(typeof d=="number"||typeof d=="bigint")&&us(i,""+d);break;case"onScroll":d!=null&&we("scroll",i);break;case"onScrollEnd":d!=null&&we("scrollend",i);break;case"onClick":d!=null&&(i.onclick=gc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pg.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),a=c.slice(2,p?c.length-7:void 0),g=i[Ut]||null,g=g!=null?g[c]:null,typeof g=="function"&&i.removeEventListener(a,g,p),typeof d=="function")){typeof g!="function"&&g!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,d,p);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):xl(i,c,d)}}}function wt(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",i),we("load",i);var d=!1,p=!1,g;for(g in c)if(c.hasOwnProperty(g)){var S=c[g];if(S!=null)switch(g){case"src":d=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:De(i,a,g,S,c,null)}}p&&De(i,a,"srcSet",c.srcSet,c,null),d&&De(i,a,"src",c.src,c,null);return;case"input":we("invalid",i);var k=g=S=p=null,_=null,L=null;for(d in c)if(c.hasOwnProperty(d)){var H=c[d];if(H!=null)switch(d){case"name":p=H;break;case"type":S=H;break;case"checked":_=H;break;case"defaultChecked":L=H;break;case"value":g=H;break;case"defaultValue":k=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,a));break;default:De(i,a,d,H,c,null)}}Sg(i,g,k,_,L,S,p,!1),wl(i);return;case"select":we("invalid",i),d=S=g=null;for(p in c)if(c.hasOwnProperty(p)&&(k=c[p],k!=null))switch(p){case"value":g=k;break;case"defaultValue":S=k;break;case"multiple":d=k;default:De(i,a,p,k,c,null)}a=g,c=S,i.multiple=!!d,a!=null?cs(i,!!d,a,!1):c!=null&&cs(i,!!d,c,!0);return;case"textarea":we("invalid",i),g=p=d=null;for(S in c)if(c.hasOwnProperty(S)&&(k=c[S],k!=null))switch(S){case"value":d=k;break;case"defaultValue":p=k;break;case"children":g=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:De(i,a,S,k,c,null)}Eg(i,d,p,g),wl(i);return;case"option":for(_ in c)if(c.hasOwnProperty(_)&&(d=c[_],d!=null))switch(_){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:De(i,a,_,d,c,null)}return;case"dialog":we("beforetoggle",i),we("toggle",i),we("cancel",i),we("close",i);break;case"iframe":case"object":we("load",i);break;case"video":case"audio":for(d=0;d<la.length;d++)we(la[d],i);break;case"image":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"embed":case"source":case"link":we("error",i),we("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:De(i,a,L,d,c,null)}return;default:if(_d(a)){for(H in c)c.hasOwnProperty(H)&&(d=c[H],d!==void 0&&fh(i,a,H,d,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(d=c[k],d!=null&&De(i,a,k,d,c,null))}function AT(i,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,k=null,_=null,L=null,H=null;for(B in c){var $=c[B];if(c.hasOwnProperty(B)&&$!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":_=$;default:d.hasOwnProperty(B)||De(i,a,B,null,d,$)}}for(var z in d){var B=d[z];if($=c[z],d.hasOwnProperty(z)&&(B!=null||$!=null))switch(z){case"type":g=B;break;case"name":p=B;break;case"checked":L=B;break;case"defaultChecked":H=B;break;case"value":S=B;break;case"defaultValue":k=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,a));break;default:B!==$&&De(i,a,z,B,d,$)}}Td(i,S,k,_,L,H,g,p);return;case"select":B=S=k=z=null;for(g in c)if(_=c[g],c.hasOwnProperty(g)&&_!=null)switch(g){case"value":break;case"multiple":B=_;default:d.hasOwnProperty(g)||De(i,a,g,null,d,_)}for(p in d)if(g=d[p],_=c[p],d.hasOwnProperty(p)&&(g!=null||_!=null))switch(p){case"value":z=g;break;case"defaultValue":k=g;break;case"multiple":S=g;default:g!==_&&De(i,a,p,g,d,_)}a=k,c=S,d=B,z!=null?cs(i,!!c,z,!1):!!d!=!!c&&(a!=null?cs(i,!!c,a,!0):cs(i,!!c,c?[]:"",!1));return;case"textarea":B=z=null;for(k in c)if(p=c[k],c.hasOwnProperty(k)&&p!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:De(i,a,k,null,d,p)}for(S in d)if(p=d[S],g=c[S],d.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":z=p;break;case"defaultValue":B=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==g&&De(i,a,S,p,d,g)}wg(i,z,B);return;case"option":for(var ce in c)if(z=c[ce],c.hasOwnProperty(ce)&&z!=null&&!d.hasOwnProperty(ce))switch(ce){case"selected":i.selected=!1;break;default:De(i,a,ce,null,d,z)}for(_ in d)if(z=d[_],B=c[_],d.hasOwnProperty(_)&&z!==B&&(z!=null||B!=null))switch(_){case"selected":i.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:De(i,a,_,z,d,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in c)z=c[se],c.hasOwnProperty(se)&&z!=null&&!d.hasOwnProperty(se)&&De(i,a,se,null,d,z);for(L in d)if(z=d[L],B=c[L],d.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,a));break;default:De(i,a,L,z,d,B)}return;default:if(_d(a)){for(var je in c)z=c[je],c.hasOwnProperty(je)&&z!==void 0&&!d.hasOwnProperty(je)&&fh(i,a,je,void 0,d,z);for(H in d)z=d[H],B=c[H],!d.hasOwnProperty(H)||z===B||z===void 0&&B===void 0||fh(i,a,H,z,d,B);return}}for(var D in c)z=c[D],c.hasOwnProperty(D)&&z!=null&&!d.hasOwnProperty(D)&&De(i,a,D,null,d,z);for($ in d)z=d[$],B=c[$],!d.hasOwnProperty($)||z===B||z==null&&B==null||De(i,a,$,z,d,B)}var hh=null,ph=null;function yc(i){return i.nodeType===9?i:i.ownerDocument}function kv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function mh(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gh=null;function MT(){var i=window.event;return i&&i.type==="popstate"?i===gh?!1:(gh=i,!0):(gh=null,!1)}var Cv=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(RT)}:Cv;function RT(i){setTimeout(function(){throw i})}function Pr(i){return i==="head"}function Av(i,a){var c=a,d=0,p=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(0<d&&8>d){c=d;var S=i.ownerDocument;if(c&1&&ua(S.documentElement),c&2&&ua(S.body),c&4)for(c=S.head,ua(c),S=c.firstChild;S;){var k=S.nextSibling,_=S.nodeName;S[To]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=k}}if(p===0){i.removeChild(g),va(a);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:d=c.charCodeAt(0)-48;else d=0;c=g}while(c);va(a)}function yh(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":yh(c),Sd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function DT(i,a,c,d){for(;i.nodeType===1;){var p=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[To])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=En(i.nextSibling),i===null)break}return null}function jT(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=En(i.nextSibling),i===null))return null;return i}function vh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function LT(i,a){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function En(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var bh=null;function Mv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}function Ov(i,a,c){switch(a=yc(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function ua(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Sd(i)}var mn=new Map,Nv=new Set;function vc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var sr=W.d;W.d={f:zT,r:BT,D:UT,C:PT,L:HT,m:IT,X:qT,S:$T,M:VT};function zT(){var i=sr.f(),a=cc();return i||a}function BT(i){var a=is(i);a!==null&&a.tag===5&&a.type==="form"?Q0(a):sr.r(i)}var Ps=typeof document>"u"?null:document;function Rv(i,a,c){var d=Ps;if(d&&typeof a=="string"&&a){var p=ln(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),Nv.has(p)||(Nv.add(p),i={rel:i,crossOrigin:c,href:a},d.querySelector(p)===null&&(a=d.createElement("link"),wt(a,"link",i),ut(a),d.head.appendChild(a)))}}function UT(i){sr.D(i),Rv("dns-prefetch",i,null)}function PT(i,a){sr.C(i,a),Rv("preconnect",i,a)}function HT(i,a,c){sr.L(i,a,c);var d=Ps;if(d&&i&&a){var p='link[rel="preload"][as="'+ln(a)+'"]';a==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+ln(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+ln(c.imageSizes)+'"]')):p+='[href="'+ln(i)+'"]';var g=p;switch(a){case"style":g=Hs(i);break;case"script":g=Is(i)}mn.has(g)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),mn.set(g,i),d.querySelector(p)!==null||a==="style"&&d.querySelector(da(g))||a==="script"&&d.querySelector(fa(g))||(a=d.createElement("link"),wt(a,"link",i),ut(a),d.head.appendChild(a)))}}function IT(i,a){sr.m(i,a);var c=Ps;if(c&&i){var d=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+ln(d)+'"][href="'+ln(i)+'"]',g=p;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Is(i)}if(!mn.has(g)&&(i=m({rel:"modulepreload",href:i},a),mn.set(g,i),c.querySelector(p)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fa(g)))return}d=c.createElement("link"),wt(d,"link",i),ut(d),c.head.appendChild(d)}}}function $T(i,a,c){sr.S(i,a,c);var d=Ps;if(d&&i){var p=ss(d).hoistableStyles,g=Hs(i);a=a||"default";var S=p.get(g);if(!S){var k={loading:0,preload:null};if(S=d.querySelector(da(g)))k.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=mn.get(g))&&xh(i,c);var _=S=d.createElement("link");ut(_),wt(_,"link",i),_._p=new Promise(function(L,H){_.onload=L,_.onerror=H}),_.addEventListener("load",function(){k.loading|=1}),_.addEventListener("error",function(){k.loading|=2}),k.loading|=4,bc(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:k},p.set(g,S)}}}function qT(i,a){sr.X(i,a);var c=Ps;if(c&&i){var d=ss(c).hoistableScripts,p=Is(i),g=d.get(p);g||(g=c.querySelector(fa(p)),g||(i=m({src:i,async:!0},a),(a=mn.get(p))&&Sh(i,a),g=c.createElement("script"),ut(g),wt(g,"link",i),c.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function VT(i,a){sr.M(i,a);var c=Ps;if(c&&i){var d=ss(c).hoistableScripts,p=Is(i),g=d.get(p);g||(g=c.querySelector(fa(p)),g||(i=m({src:i,async:!0,type:"module"},a),(a=mn.get(p))&&Sh(i,a),g=c.createElement("script"),ut(g),wt(g,"link",i),c.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(p,g))}}function Dv(i,a,c,d){var p=(p=he.current)?vc(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Hs(c.href),c=ss(p).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Hs(c.href);var g=ss(p).hoistableStyles,S=g.get(i);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,S),(g=p.querySelector(da(i)))&&!g._p&&(S.instance=g,S.state.loading=5),mn.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},mn.set(i,c),g||KT(p,i,c,S.state))),a&&d===null)throw Error(r(528,""));return S}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Is(c),c=ss(p).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Hs(i){return'href="'+ln(i)+'"'}function da(i){return'link[rel="stylesheet"]['+i+"]"}function jv(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function KT(i,a,c,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),wt(a,"link",c),ut(a),i.head.appendChild(a))}function Is(i){return'[src="'+ln(i)+'"]'}function fa(i){return"script[async]"+i}function Lv(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+ln(c.href)+'"]');if(d)return a.instance=d,ut(d),d;var p=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),ut(d),wt(d,"style",p),bc(d,c.precedence,i),a.instance=d;case"stylesheet":p=Hs(c.href);var g=i.querySelector(da(p));if(g)return a.state.loading|=4,a.instance=g,ut(g),g;d=jv(c),(p=mn.get(p))&&xh(d,p),g=(i.ownerDocument||i).createElement("link"),ut(g);var S=g;return S._p=new Promise(function(k,_){S.onload=k,S.onerror=_}),wt(g,"link",d),a.state.loading|=4,bc(g,c.precedence,i),a.instance=g;case"script":return g=Is(c.src),(p=i.querySelector(fa(g)))?(a.instance=p,ut(p),p):(d=c,(p=mn.get(g))&&(d=m({},c),Sh(d,p)),i=i.ownerDocument||i,p=i.createElement("script"),ut(p),wt(p,"link",d),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,bc(d,c.precedence,i));return a.instance}function bc(i,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=d.length?d[d.length-1]:null,g=p,S=0;S<d.length;S++){var k=d[S];if(k.dataset.precedence===a)g=k;else if(g!==p)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function xh(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Sh(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var xc=null;function zv(i,a,c){if(xc===null){var d=new Map,p=xc=new Map;p.set(c,d)}else p=xc,d=p.get(c),d||(d=new Map,p.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),p=0;p<c.length;p++){var g=c[p];if(!(g[To]||g[Ct]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(a)||"";S=i+S;var k=d.get(S);k?k.push(g):d.set(S,[g])}}return d}function Bv(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function FT(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Uv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ha=null;function GT(){}function YT(i,a,c){if(ha===null)throw Error(r(475));var d=ha;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Hs(c.href),g=i.querySelector(da(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=Sc.bind(d),i.then(d,d)),a.state.loading|=4,a.instance=g,ut(g);return}g=i.ownerDocument||i,c=jv(c),(p=mn.get(p))&&xh(c,p),g=g.createElement("link"),ut(g);var S=g;S._p=new Promise(function(k,_){S.onload=k,S.onerror=_}),wt(g,"link",c),a.instance=g}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=Sc.bind(d),i.addEventListener("load",a),i.addEventListener("error",a))}}function WT(){if(ha===null)throw Error(r(475));var i=ha;return i.stylesheets&&i.count===0&&wh(i,i.stylesheets),0<i.count?function(a){var c=setTimeout(function(){if(i.stylesheets&&wh(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Sc(){if(this.count--,this.count===0){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wc=null;function wh(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wc=new Map,a.forEach(JT,i),wc=null,Sc.call(i))}function JT(i,a){if(!(a.state.loading&4)){var c=wc.get(i);if(c)var d=c.get(null);else{c=new Map,wc.set(i,c);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),d=S)}d&&c.set(null,d)}p=a.instance,S=p.getAttribute("data-precedence"),g=c.get(S)||d,g===d&&c.set(null,p),c.set(S,p),this.count++,d=Sc.bind(this),p.addEventListener("load",d),p.addEventListener("error",d),g?g.parentNode.insertBefore(p,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var pa={$$typeof:O,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function QT(i,a,c,d,p,g,S,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.hiddenUpdates=yd(null),this.identifierPrefix=d,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Pv(i,a,c,d,p,g,S,k,_,L,H,$){return i=new QT(i,a,c,S,k,_,L,$),a=1,g===!0&&(a|=24),g=Jt(3,null,null,a),i.current=g,g.stateNode=i,a=nf(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:d,isDehydrated:c,cache:a},af(g),i}function Hv(i){return i?(i=vs,i):vs}function Iv(i,a,c,d,p,g){p=Hv(p),d.context===null?d.context=p:d.pendingContext=p,d=Cr(a),d.payload={element:c},g=g===void 0?null:g,g!==null&&(d.callback=g),c=_r(i,d,a),c!==null&&(tn(c,i,a),Vo(c,i,a))}function $v(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Eh(i,a){$v(i,a),(i=i.alternate)&&$v(i,a)}function qv(i){if(i.tag===13){var a=ys(i,67108864);a!==null&&tn(a,i,67108864),Eh(i,67108864)}}var Ec=!0;function XT(i,a,c,d){var p=P.T;P.T=null;var g=W.p;try{W.p=2,kh(i,a,c,d)}finally{W.p=g,P.T=p}}function ZT(i,a,c,d){var p=P.T;P.T=null;var g=W.p;try{W.p=8,kh(i,a,c,d)}finally{W.p=g,P.T=p}}function kh(i,a,c,d){if(Ec){var p=Th(d);if(p===null)dh(i,a,d,kc,c),Kv(i,d);else if(tC(p,i,a,c,d))d.stopPropagation();else if(Kv(i,d),a&4&&-1<eC.indexOf(i)){for(;p!==null;){var g=is(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=hi(g.pendingLanes);if(S!==0){var k=g;for(k.pendingLanes|=2,k.entangledLanes|=2;S;){var _=1<<31-Yt(S);k.entanglements[1]|=_,S&=~_}zn(g),(Me&6)===0&&(ac=Nn()+500,aa(0))}}break;case 13:k=ys(g,2),k!==null&&tn(k,g,2),cc(),Eh(g,2)}if(g=Th(d),g===null&&dh(i,a,d,kc,c),g===p)break;p=g}p!==null&&d.stopPropagation()}else dh(i,a,d,null,c)}}function Th(i){return i=Md(i),Ch(i)}var kc=null;function Ch(i){if(kc=null,i=rs(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return kc=i,null}function Vv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(PE()){case ig:return 2;case sg:return 8;case gl:case HE:return 32;case og:return 268435456;default:return 32}default:return 32}}var _h=!1,Hr=null,Ir=null,$r=null,ma=new Map,ga=new Map,qr=[],eC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kv(i,a){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":ma.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(a.pointerId)}}function ya(i,a,c,d,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},a!==null&&(a=is(a),a!==null&&qv(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function tC(i,a,c,d,p){switch(a){case"focusin":return Hr=ya(Hr,i,a,c,d,p),!0;case"dragenter":return Ir=ya(Ir,i,a,c,d,p),!0;case"mouseover":return $r=ya($r,i,a,c,d,p),!0;case"pointerover":var g=p.pointerId;return ma.set(g,ya(ma.get(g)||null,i,a,c,d,p)),!0;case"gotpointercapture":return g=p.pointerId,ga.set(g,ya(ga.get(g)||null,i,a,c,d,p)),!0}return!1}function Fv(i){var a=rs(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,YE(i.priority,function(){if(c.tag===13){var d=en();d=vd(d);var p=ys(c,d);p!==null&&tn(p,c,d),Eh(c,d)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Tc(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Th(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Ad=d,c.target.dispatchEvent(d),Ad=null}else return a=is(c),a!==null&&qv(a),i.blockedOn=c,!1;a.shift()}return!0}function Gv(i,a,c){Tc(i)&&c.delete(a)}function nC(){_h=!1,Hr!==null&&Tc(Hr)&&(Hr=null),Ir!==null&&Tc(Ir)&&(Ir=null),$r!==null&&Tc($r)&&($r=null),ma.forEach(Gv),ga.forEach(Gv)}function Cc(i,a){i.blockedOn===a&&(i.blockedOn=null,_h||(_h=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nC)))}var _c=null;function Yv(i){_c!==i&&(_c=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_c===i&&(_c=null);for(var a=0;a<i.length;a+=3){var c=i[a],d=i[a+1],p=i[a+2];if(typeof d!="function"){if(Ch(d||c)===null)continue;break}var g=is(c);g!==null&&(i.splice(a,3),a-=3,Cf(g,{pending:!0,data:p,method:c.method,action:d},d,p))}}))}function va(i){function a(_){return Cc(_,i)}Hr!==null&&Cc(Hr,i),Ir!==null&&Cc(Ir,i),$r!==null&&Cc($r,i),ma.forEach(a),ga.forEach(a);for(var c=0;c<qr.length;c++){var d=qr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<qr.length&&(c=qr[0],c.blockedOn===null);)Fv(c),c.blockedOn===null&&qr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var p=c[d],g=c[d+1],S=p[Ut]||null;if(typeof g=="function")S||Yv(c);else if(S){var k=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Ut]||null)k=S.formAction;else if(Ch(p)!==null)continue}else k=S.action;typeof k=="function"?c[d+1]=k:(c.splice(d,3),d-=3),Yv(c)}}}function Ah(i){this._internalRoot=i}Ac.prototype.render=Ah.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,d=en();Iv(c,d,i,a,null,null)},Ac.prototype.unmount=Ah.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Iv(i.current,2,null,i,null,null),cc(),a[ns]=null}};function Ac(i){this._internalRoot=i}Ac.prototype.unstable_scheduleHydration=function(i){if(i){var a=dg();i={blockedOn:null,target:i,priority:a};for(var c=0;c<qr.length&&a!==0&&a<qr[c].priority;c++);qr.splice(c,0,i),c===0&&Fv(i)}};var Wv=e.version;if(Wv!=="19.1.1")throw Error(r(527,Wv,"19.1.1"));W.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var rC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{wo=Mc.inject(rC),Gt=Mc}catch{}}return xa.createRoot=function(i,a){if(!s(i))throw Error(r(299));var c=!1,d="",p=dy,g=fy,S=hy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks)),a=Pv(i,1,!1,null,null,c,d,p,g,S,k,null),i[ns]=a.current,uh(i),new Ah(a)},xa.hydrateRoot=function(i,a,c){if(!s(i))throw Error(r(299));var d=!1,p="",g=dy,S=fy,k=hy,_=null,L=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(g=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(_=c.unstable_transitionCallbacks),c.formState!==void 0&&(L=c.formState)),a=Pv(i,1,!0,a,c??null,d,p,g,S,k,_,L),a.context=Hv(null),c=a.current,d=en(),d=vd(d),p=Cr(d),p.callback=null,_r(c,p,d),c=d,a.current.lanes=c,ko(a,c),zn(a),i[ns]=a.current,uh(i),new Ac(a)},xa.version="19.1.1",xa}var sb;function hC(){if(sb)return Nh.exports;sb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nh.exports=fC(),Nh.exports}var pC=hC();/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ob="popstate";function mC(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Sp("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Ka(s)}return yC(e,t,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Hn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gC(){return Math.random().toString(36).substring(2,10)}function ab(n,e){return{usr:n.state,key:n.key,idx:e}}function Sp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vo(e):e,state:t,key:e&&e.key||r||gC()}}function Ka({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function yC(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",f=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function y(){u="POP";let T=m(),C=T==null?null:T-h;h=T,f&&f({action:u,location:E.location,delta:C})}function v(T,C){u="PUSH";let N=Sp(E.location,T,C);h=m()+1;let O=ab(N,h),V=E.createHref(N);try{l.pushState(O,"",V)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(V)}o&&f&&f({action:u,location:E.location,delta:1})}function b(T,C){u="REPLACE";let N=Sp(E.location,T,C);h=m();let O=ab(N,h),V=E.createHref(N);l.replaceState(O,"",V),o&&f&&f({action:u,location:E.location,delta:0})}function x(T){return vC(T)}let E={get action(){return u},get location(){return n(s,l)},listen(T){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(ob,y),f=T,()=>{s.removeEventListener(ob,y),f=null}},createHref(T){return e(s,T)},createURL:x,encodeLocation(T){let C=x(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:b,go(T){return l.go(T)}};return E}function vC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ka(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function fx(n,e,t="/"){return bC(n,e,t,!1)}function bC(n,e,t,r){let s=typeof e=="string"?vo(e):e,o=vr(s.pathname||"/",t);if(o==null)return null;let l=hx(n);xC(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=NC(o);u=MC(l[f],h,r)}return u}function hx(n,e=[],t=[],r=""){let s=(o,l,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(Ke(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let h=mr([r,f.relativePath]),m=t.concat(f);o.children&&o.children.length>0&&(Ke(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),hx(o.children,e,m,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:_C(h,o.index),routesMeta:m})};return n.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))s(o,l);else for(let u of px(o.path))s(o,l,u)}),e}function px(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=px(r.join("/")),u=[];return u.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&u.push(...l),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function xC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var SC=/^:[\w-]+$/,wC=3,EC=2,kC=1,TC=10,CC=-2,lb=n=>n==="*";function _C(n,e){let t=n.split("/"),r=t.length;return t.some(lb)&&(r+=CC),e&&(r+=EC),t.filter(s=>!lb(s)).reduce((s,o)=>s+(SC.test(o)?wC:o===""?kC:TC),r)}function AC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function MC(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=tu({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},m),v=f.route;if(!y&&h&&t&&!r[r.length-1].route.index&&(y=tu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:mr([o,y.pathname]),pathnameBase:LC(mr([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=mr([o,y.pathnameBase]))}return l}function tu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=OC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:y},v)=>{if(m==="*"){let x=u[v]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const b=u[v];return y&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function OC(n,e=!1,t=!0){Hn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function vr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function RC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?vo(n):n;return{pathname:t?t.startsWith("/")?t:DC(t,e):e,search:zC(r),hash:BC(s)}}function DC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Lh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mx(n){let e=jC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function gx(n,e,t,r=!1){let s;typeof n=="string"?s=vo(n):(s={...n},Ke(!s.pathname||!s.pathname.includes("?"),Lh("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),Lh("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),Lh("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let f=RC(s,u),h=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(h||m)&&(f.pathname+="/"),f}var mr=n=>n.join("/").replace(/\/\/+/g,"/"),LC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function UC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var yx=["POST","PUT","PATCH","DELETE"];new Set(yx);var PC=["GET",...yx];new Set(PC);var bo=R.createContext(null);bo.displayName="DataRouter";var Gu=R.createContext(null);Gu.displayName="DataRouterState";R.createContext(!1);var vx=R.createContext({isTransitioning:!1});vx.displayName="ViewTransition";var HC=R.createContext(new Map);HC.displayName="Fetchers";var IC=R.createContext(null);IC.displayName="Await";var qn=R.createContext(null);qn.displayName="Navigation";var sl=R.createContext(null);sl.displayName="Location";var Vn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var um=R.createContext(null);um.displayName="RouteError";function $C(n,{relative:e}={}){Ke(ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=R.useContext(qn),{hash:s,pathname:o,search:l}=al(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:mr([t,o])),r.createHref({pathname:u,search:l,hash:s})}function ol(){return R.useContext(sl)!=null}function Xi(){return Ke(ol(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(sl).location}var bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xx(n){R.useContext(qn).static||R.useLayoutEffect(n)}function dm(){let{isDataRoute:n}=R.useContext(Vn);return n?n_():qC()}function qC(){Ke(ol(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(bo),{basename:e,navigator:t}=R.useContext(qn),{matches:r}=R.useContext(Vn),{pathname:s}=Xi(),o=JSON.stringify(mx(r)),l=R.useRef(!1);return xx(()=>{l.current=!0}),R.useCallback((f,h={})=>{if(Hn(l.current,bx),!l.current)return;if(typeof f=="number"){t.go(f);return}let m=gx(f,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:mr([e,m.pathname])),(h.replace?t.replace:t.push)(m,h.state,h)},[e,t,o,s,n])}R.createContext(null);function VC(){let{matches:n}=R.useContext(Vn),e=n[n.length-1];return e?e.params:{}}function al(n,{relative:e}={}){let{matches:t}=R.useContext(Vn),{pathname:r}=Xi(),s=JSON.stringify(mx(t));return R.useMemo(()=>gx(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function KC(n,e){return Sx(n,e)}function Sx(n,e,t,r){Ke(ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(qn),{matches:o}=R.useContext(Vn),l=o[o.length-1],u=l?l.params:{},f=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let C=m&&m.path||"";wx(f,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=Xi(),v;if(e){let C=typeof e=="string"?vo(e):e;Ke(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=y;let b=v.pathname||"/",x=b;if(h!=="/"){let C=h.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=fx(n,{pathname:x});Hn(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Hn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=JC(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:mr([h,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:mr([h,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,r);return e&&T?R.createElement(sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function FC(){let n=t_(),e=UC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:s},t):null,l)}var GC=R.createElement(FC,null),YC=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?R.createElement(Vn.Provider,{value:this.props.routeContext},R.createElement(um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WC({routeContext:n,match:e,children:t}){let r=R.useContext(bo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Vn.Provider,{value:n},t)}function JC(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t?.errors;if(o!=null){let f=s.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Ke(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,u=-1;if(t)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:y}=t,v=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,h,m)=>{let y,v=!1,b=null,x=null;t&&(y=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||GC,l&&(u<0&&m===0?(wx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):u===m&&(v=!0,x=h.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,m+1)),T=()=>{let C;return y?C=b:v?C=x:h.route.Component?C=R.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=f,R.createElement(WC,{match:h,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:C})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?R.createElement(YC,{location:t.location,revalidation:t.revalidation,component:b,error:y,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):T()},null)}function fm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QC(n){let e=R.useContext(bo);return Ke(e,fm(n)),e}function XC(n){let e=R.useContext(Gu);return Ke(e,fm(n)),e}function ZC(n){let e=R.useContext(Vn);return Ke(e,fm(n)),e}function hm(n){let e=ZC(n),t=e.matches[e.matches.length-1];return Ke(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function e_(){return hm("useRouteId")}function t_(){let n=R.useContext(um),e=XC("useRouteError"),t=hm("useRouteError");return n!==void 0?n:e.errors?.[t]}function n_(){let{router:n}=QC("useNavigate"),e=hm("useNavigate"),t=R.useRef(!1);return xx(()=>{t.current=!0}),R.useCallback(async(s,o={})=>{Hn(t.current,bx),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var cb={};function wx(n,e,t){!e&&!cb[n]&&(cb[n]=!0,Hn(!1,t))}R.memo(r_);function r_({routes:n,future:e,state:t}){return Sx(n,void 0,t,e)}function wp(n){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i_({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Ke(!ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=vo(t));let{pathname:f="/",search:h="",hash:m="",state:y=null,key:v="default"}=t,b=R.useMemo(()=>{let x=vr(f,l);return x==null?null:{location:{pathname:x,search:h,hash:m,state:y,key:v},navigationType:r}},[l,f,h,m,y,v,r]);return Hn(b!=null,`<Router basename="${l}"> is not able to match the URL "${f}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:R.createElement(qn.Provider,{value:u},R.createElement(sl.Provider,{children:e,value:b}))}function s_({children:n,location:e}){return KC(Ep(n),e)}function Ep(n,e=[]){let t=[];return R.Children.forEach(n,(r,s)=>{if(!R.isValidElement(r))return;let o=[...e,s];if(r.type===R.Fragment){t.push.apply(t,Ep(r.props.children,o));return}Ke(r.type===wp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ep(r.props.children,o)),t.push(l)}),t}var Yc="get",Wc="application/x-www-form-urlencoded";function Yu(n){return n!=null&&typeof n.tagName=="string"}function o_(n){return Yu(n)&&n.tagName.toLowerCase()==="button"}function a_(n){return Yu(n)&&n.tagName.toLowerCase()==="form"}function l_(n){return Yu(n)&&n.tagName.toLowerCase()==="input"}function c_(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function u_(n,e){return n.button===0&&(!e||e==="_self")&&!c_(n)}var Oc=null;function d_(){if(Oc===null)try{new FormData(document.createElement("form"),0),Oc=!1}catch{Oc=!0}return Oc}var f_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zh(n){return n!=null&&!f_.has(n)?(Hn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wc}"`),null):n}function h_(n,e){let t,r,s,o,l;if(a_(n)){let u=n.getAttribute("action");r=u?vr(u,e):null,t=n.getAttribute("method")||Yc,s=zh(n.getAttribute("enctype"))||Wc,o=new FormData(n)}else if(o_(n)||l_(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||u.getAttribute("action");if(r=f?vr(f,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Yc,s=zh(n.getAttribute("formenctype"))||zh(u.getAttribute("enctype"))||Wc,o=new FormData(u,n),!d_()){let{name:h,type:m,value:y}=n;if(m==="image"){let v=h?`${h}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else h&&o.append(h,y)}}else{if(Yu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yc,r=null,s=Wc,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function p_(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&vr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function m_(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g_(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function y_(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await m_(o,t);return l.links?l.links():[]}return[]}));return S_(r.flat(1).filter(g_).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ub(n,e,t,r,s,o){let l=(f,h)=>t[h]?f.route.id!==t[h].route.id:!0,u=(f,h)=>t[h].pathname!==f.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,h)=>l(f,h)||u(f,h)):o==="data"?e.filter((f,h)=>{let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(l(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function v_(n,e,{includeHydrateFallback:t}={}){return b_(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function b_(n){return[...new Set(n)]}function x_(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function S_(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(x_(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function Ex(){let n=R.useContext(bo);return pm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function w_(){let n=R.useContext(Gu);return pm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var mm=R.createContext(void 0);mm.displayName="FrameworkContext";function kx(){let n=R.useContext(mm);return pm(n,"You must render this element inside a <HydratedRouter> element"),n}function E_(n,e){let t=R.useContext(mm),[r,s]=R.useState(!1),[o,l]=R.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:m,onTouchStart:y}=e,v=R.useRef(null);R.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let E=C=>{C.forEach(N=>{l(N.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[n]),R.useEffect(()=>{if(r){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[r]);let b=()=>{s(!0)},x=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:Sa(u,b),onBlur:Sa(f,x),onMouseEnter:Sa(h,b),onMouseLeave:Sa(m,x),onTouchStart:Sa(y,b)}]:[!1,v,{}]}function Sa(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function k_({page:n,...e}){let{router:t}=Ex(),r=R.useMemo(()=>fx(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?R.createElement(C_,{page:n,matches:r,...e}):null}function T_(n){let{manifest:e,routeModules:t}=kx(),[r,s]=R.useState([]);return R.useEffect(()=>{let o=!1;return y_(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function C_({page:n,matches:e,...t}){let r=Xi(),{manifest:s,routeModules:o}=kx(),{basename:l}=Ex(),{loaderData:u,matches:f}=w_(),h=R.useMemo(()=>ub(n,e,f,s,r,"data"),[n,e,f,s,r]),m=R.useMemo(()=>ub(n,e,f,s,r,"assets"),[n,e,f,s,r]),y=R.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,E=!1;if(e.forEach(C=>{let N=s.routes[C.route.id];!N||!N.hasLoader||(!h.some(O=>O.route.id===C.route.id)&&C.route.id in u&&o[C.route.id]?.shouldRevalidate||N.hasClientLoader?E=!0:x.add(C.route.id))}),x.size===0)return[];let T=p_(n,l,"data");return E&&x.size>0&&T.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[l,u,r,s,h,e,n,o]),v=R.useMemo(()=>v_(m,s),[m,s]),b=T_(m);return R.createElement(R.Fragment,null,y.map(x=>R.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>R.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),b.map(({key:x,link:E})=>R.createElement("link",{key:x,nonce:t.nonce,...E})))}function __(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tx&&(window.__reactRouterVersion="7.8.0")}catch{}function A_({basename:n,children:e,window:t}){let r=R.useRef();r.current==null&&(r.current=mC({window:t,v5Compat:!0}));let s=r.current,[o,l]=R.useState({action:s.action,location:s.location}),u=R.useCallback(f=>{R.startTransition(()=>l(f))},[l]);return R.useLayoutEffect(()=>s.listen(u),[s,u]),R.createElement(i_,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var Cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dt=R.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:f,to:h,preventScrollReset:m,viewTransition:y,...v},b){let{basename:x}=R.useContext(qn),E=typeof h=="string"&&Cx.test(h),T,C=!1;if(typeof h=="string"&&E&&(T=h,Tx))try{let le=new URL(window.location.href),ke=h.startsWith("//")?new URL(le.protocol+h):new URL(h),ot=vr(ke.pathname,x);ke.origin===le.origin&&ot!=null?h=ot+ke.search+ke.hash:C=!0}catch{Hn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=$C(h,{relative:s}),[O,V,U]=E_(r,v),G=R_(h,{replace:l,state:u,target:f,preventScrollReset:m,relative:s,viewTransition:y});function Y(le){e&&e(le),le.defaultPrevented||G(le)}let J=R.createElement("a",{...v,...U,href:T||N,onClick:C||o?e:Y,ref:__(b,V),target:f,"data-discover":!E&&t==="render"?"true":void 0});return O&&!E?R.createElement(R.Fragment,null,J,R.createElement(k_,{page:N})):J});Dt.displayName="Link";var M_=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:f,...h},m){let y=al(l,{relative:h.relative}),v=Xi(),b=R.useContext(Gu),{navigator:x,basename:E}=R.useContext(qn),T=b!=null&&B_(y)&&u===!0,C=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,N=v.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(N=N.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&E&&(O=vr(O,E)||O);const V=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let U=N===C||!s&&N.startsWith(C)&&N.charAt(V)==="/",G=O!=null&&(O===C||!s&&O.startsWith(C)&&O.charAt(C.length)==="/"),Y={isActive:U,isPending:G,isTransitioning:T},J=U?e:void 0,le;typeof r=="function"?le=r(Y):le=[r,U?"active":null,G?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ke=typeof o=="function"?o(Y):o;return R.createElement(Dt,{...h,"aria-current":J,className:le,ref:m,style:ke,to:l,viewTransition:u},typeof f=="function"?f(Y):f)});M_.displayName="NavLink";var O_=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Yc,action:u,onSubmit:f,relative:h,preventScrollReset:m,viewTransition:y,...v},b)=>{let x=L_(),E=z_(u,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&Cx.test(u),N=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let V=O.nativeEvent.submitter,U=V?.getAttribute("formmethod")||l;x(V||O.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:o,relative:h,preventScrollReset:m,viewTransition:y})};return R.createElement("form",{ref:b,method:T,action:E,onSubmit:r?f:N,...v,"data-discover":!C&&n==="render"?"true":void 0})});O_.displayName="Form";function N_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _x(n){let e=R.useContext(bo);return Ke(e,N_(n)),e}function R_(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=dm(),f=Xi(),h=al(n,{relative:o});return R.useCallback(m=>{if(u_(m,e)){m.preventDefault();let y=t!==void 0?t:Ka(f)===Ka(h);u(n,{replace:y,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[f,u,h,t,r,e,n,s,o,l])}var D_=0,j_=()=>`__${String(++D_)}__`;function L_(){let{router:n}=_x("useSubmit"),{basename:e}=R.useContext(qn),t=e_();return R.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:f,body:h}=h_(r,e);if(s.navigate===!1){let m=s.fetcherKey||j_();await n.fetch(m,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function z_(n,{relative:e}={}){let{basename:t}=R.useContext(qn),r=R.useContext(Vn);Ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...al(n||".",{relative:e})},l=Xi();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(m=>m==="")){u.delete("index"),f.filter(y=>y).forEach(y=>u.append("index",y));let m=u.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:mr([t,o.pathname])),Ka(o)}function B_(n,{relative:e}={}){let t=R.useContext(vx);Ke(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_x("useViewTransitionState"),s=al(n,{relative:e});if(!t.isTransitioning)return!1;let o=vr(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=vr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return tu(s.pathname,l)!=null||tu(s.pathname,o)!=null}var Ax=dx();const U_=Fu(Ax),db=n=>{let e;const t=new Set,r=(h,m)=>{const y=typeof h=="function"?h(e):h;if(!Object.is(y,e)){const v=e;e=m??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,v))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>f,subscribe:h=>(t.add(h),()=>t.delete(h))},f=e=n(r,s,u);return u},P_=n=>n?db(n):db,H_=n=>n;function I_(n,e=H_){const t=_n.useSyncExternalStore(n.subscribe,_n.useCallback(()=>e(n.getState()),[n,e]),_n.useCallback(()=>e(n.getInitialState()),[n,e]));return _n.useDebugValue(t),t}const fb=n=>{const e=P_(n),t=r=>I_(e,r);return Object.assign(t,e),t},Wu=n=>n?fb(n):fb,$_="modulepreload",q_=function(n){return"/"+n},hb={},ll=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=h(t.map(m=>{if(m=q_(m),m in hb)return;hb[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":$_,y||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),y)return new Promise((x,E)=>{b.addEventListener("load",x),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})},V_=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>xo);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class gm extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class K_ extends gm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pb extends gm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mb extends gm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var kp;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(kp||(kp={}));var F_=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};class G_{constructor(e,{headers:t={},customFetch:r,region:s=kp.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=V_(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return F_(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let u={},{region:f}=t;f||(f=this.region);const h=new URL(`${this.url}/${e}`);f&&f!=="any"&&(u["x-region"]=f,h.searchParams.set("forceFunctionRegion",f));let m;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)));const y=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:m}).catch(E=>{throw new K_(E)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new pb(y);if(!y.ok)throw new mb(y);let b=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return b==="application/json"?x=yield y.json():b==="application/octet-stream"?x=yield y.blob():b==="text/event-stream"?x=y:b==="multipart/form-data"?x=yield y.formData():x=yield y.text(),{data:x,error:null,response:y}}catch(s){return{data:null,error:s,response:s instanceof mb||s instanceof pb?s.context:void 0}}})}}var pt={},$s={},qs={},Vs={},Ks={},Fs={},Y_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},uo=Y_();const W_=uo.fetch,Mx=uo.fetch.bind(uo),Ox=uo.Headers,J_=uo.Request,Q_=uo.Response,xo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ox,Request:J_,Response:Q_,default:Mx,fetch:W_},Symbol.toStringTag,{value:"Module"})),X_=sC(xo);var Nc={},gb;function Nx(){if(gb)return Nc;gb=1,Object.defineProperty(Nc,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Nc.default=n,Nc}var yb;function Rx(){if(yb)return Fs;yb=1;var n=Fs&&Fs.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fs,"__esModule",{value:!0});const e=n(X_),t=n(Nx());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,y,v;let b=null,x=null,E=null,T=h.status,C=h.statusText;if(h.ok){if(this.method!=="HEAD"){const U=await h.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=U:x=JSON.parse(U))}const O=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),V=(y=h.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&V&&V.length>1&&(E=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(b={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,E=null,T=406,C="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const O=await h.text();try{b=JSON.parse(O),Array.isArray(b)&&h.status===404&&(x=[],b=null,T=200,C="OK")}catch{h.status===404&&O===""?(T=204,C="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,T=200,C="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:x,count:E,status:T,statusText:C}});return this.shouldThrowOnError||(f=f.catch(h=>{var m,y,v;return{error:{message:`${(m=h?.name)!==null&&m!==void 0?m:"FetchError"}: ${h?.message}`,details:`${(y=h?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}}return Fs.default=r,Fs}var vb;function Dx(){if(vb)return Ks;vb=1;var n=Ks&&Ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ks,"__esModule",{value:!0});const e=n(Rx());class t extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:f=u}={}){const h=f?`${f}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:f=!1,format:h="text"}={}){var m;const y=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${y};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ks.default=t,Ks}var bb;function ym(){if(bb)return Vs;bb=1;var n=Vs&&Vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vs,"__esModule",{value:!0});const e=n(Dx());class t extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${f}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Vs.default=t,Vs}var xb;function jx(){if(xb)return qs;xb=1;var n=qs&&qs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qs,"__esModule",{value:!0});const e=n(ym());class t{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let f=!1;const h=(s??"*").split("").map(m=>/\s/.test(m)&&!f?"":(m==='"'&&(f=!f),m)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),o&&f.push(`count=${o}`),l||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(s)){const h=s.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(h.length>0){const m=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:f=!0}={}){const h="POST",m=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&m.push(this.headers.Prefer),u&&m.push(`count=${u}`),f||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(s)){const y=s.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return qs.default=t,qs}var wa={},Ea={},Sb;function Z_(){return Sb||(Sb=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.version=void 0,Ea.version="0.0.0-automated"),Ea}var wb;function e2(){if(wb)return wa;wb=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.DEFAULT_HEADERS=void 0;const n=Z_();return wa.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},wa}var Eb;function t2(){if(Eb)return $s;Eb=1;var n=$s&&$s.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty($s,"__esModule",{value:!0});const e=n(jx()),t=n(ym()),r=e2();class s{constructor(l,{headers:u={},schema:f,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=f,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:h=!1,count:m}={}){let y;const v=new URL(`${this.url}/rpc/${l}`);let b;f||h?(y=f?"HEAD":"GET",Object.entries(u).filter(([E,T])=>T!==void 0).map(([E,T])=>[E,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([E,T])=>{v.searchParams.append(E,T)})):(y="POST",b=u);const x=Object.assign({},this.headers);return m&&(x.Prefer=`count=${m}`),new t.default({method:y,url:v,headers:x,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return $s.default=s,$s}var kb;function n2(){if(kb)return pt;kb=1;var n=pt&&pt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(pt,"__esModule",{value:!0}),pt.PostgrestError=pt.PostgrestBuilder=pt.PostgrestTransformBuilder=pt.PostgrestFilterBuilder=pt.PostgrestQueryBuilder=pt.PostgrestClient=void 0;const e=n(t2());pt.PostgrestClient=e.default;const t=n(jx());pt.PostgrestQueryBuilder=t.default;const r=n(ym());pt.PostgrestFilterBuilder=r.default;const s=n(Dx());pt.PostgrestTransformBuilder=s.default;const o=n(Rx());pt.PostgrestBuilder=o.default;const l=n(Nx());return pt.PostgrestError=l.default,pt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},pt}var r2=n2();const i2=Fu(r2),{PostgrestClient:s2,PostgrestQueryBuilder:u3,PostgrestFilterBuilder:d3,PostgrestTransformBuilder:f3,PostgrestBuilder:h3,PostgrestError:p3}=i2;class o2{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);if(r>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const s=this.dynamicRequire("undici");if(s&&s.WebSocket)return{type:"native",constructor:s.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const s=this.dynamicRequire("ws");if(s)return{type:"ws",constructor:(t=s.WebSocket)!==null&&t!==void 0?t:s};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const a2="2.15.0",l2=`realtime-js/${a2}`,c2="1.0.0",Tp=1e4,u2=1e3,d2=100;var Ra;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ra||(Ra={}));var ct;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ct||(ct={}));var Tn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Tn||(Tn={}));var Cp;(function(n){n.websocket="websocket"})(Cp||(Cp={}));var Li;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Li||(Li={}));class f2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:f,payload:h}}}class Lx{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Pe||(Pe={}));const Tb=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=h2(l,n,e,s),o),{})},h2=(n,e,t,r)=>{const s=e.find(u=>u.name===n),o=s?.type,l=t[n];return o&&!r.includes(o)?zx(o,l):_p(l)},zx=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return y2(e,t)}switch(n){case Pe.bool:return p2(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return m2(e);case Pe.json:case Pe.jsonb:return g2(e);case Pe.timestamp:return v2(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return _p(e);default:return _p(e)}},_p=n=>n,p2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},m2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},g2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},y2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>zx(e,u))}return n},v2=n=>typeof n=="string"?n.replace(" ","T"):n,Bx=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Bh{constructor(e,t,r={},s=Tp){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cb;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Cb||(Cb={}));class Da{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,s,o,l),this.pendingDiffs.forEach(f=>{this.state=Da.syncDiff(this.state,f,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Da.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),u={},f={};return this.map(o,(h,m)=>{l[h]||(f[h]=m)}),this.map(l,(h,m)=>{const y=o[h];if(y){const v=m.map(T=>T.presence_ref),b=y.map(T=>T.presence_ref),x=m.filter(T=>b.indexOf(T.presence_ref)<0),E=y.filter(T=>v.indexOf(T.presence_ref)<0);x.length>0&&(u[h]=x),E.length>0&&(f[h]=E)}else u[h]=m}),this.syncDiff(o,{joins:u,leaves:f},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,f)=>{var h;const m=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),m.length>0){const y=e[u].map(b=>b.presence_ref),v=m.filter(b=>y.indexOf(b.presence_ref)<0);e[u].unshift(...v)}r(u,m,f)}),this.map(l,(u,f)=>{let h=e[u];if(!h)return;const m=f.map(y=>y.presence_ref);h=h.filter(y=>m.indexOf(y.presence_ref)<0),e[u]=h,s(u,h,f),h.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _b;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(_b||(_b={}));var ja;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ja||(ja={}));var dr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class vm{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Bh(this,Tn.join,this.params,this.timeout),this.rejoinTimer=new Lx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Da(this),this.broadcastEndpointURL=Bx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[ja.PRESENCE]&&this.bindings[ja.PRESENCE].length>0,m={},y={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:f,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e?.(dr.CHANNEL_ERROR,v)),this._onClose(()=>e?.(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket.setAuth(),v===void 0){e?.(dr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,E=(b=x?.length)!==null&&b!==void 0?b:0,T=[];for(let C=0;C<E;C++){const N=x[C],{filter:{event:O,schema:V,table:U,filter:G}}=N,Y=v&&v[C];if(Y&&Y.event===O&&Y.schema===V&&Y.table===U&&Y.filter===G)T.push(Object.assign(Object.assign({},N),{id:Y.id}));else{this.unsubscribe(),this.state=ct.errored,e?.(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(dr.SUBSCRIBED);return}}).receive("error",v=>{this.state=ct.errored,e?.(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e?.(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===ct.joined&&e===ja.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,f;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ct.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Bh(this,Tn.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ct.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Bh(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>d2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:m}=Tn;if(r&&[u,f,h,m].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var x,E,T;return((x=b.filter)===null||x===void 0?void 0:x.event)==="*"||((T=(E=b.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===l}).map(b=>b.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var x,E,T,C,N,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const V=b.id,U=(x=b.filter)===null||x===void 0?void 0:x.event;return V&&((E=t.ids)===null||E===void 0?void 0:E.includes(V))&&(U==="*"||U?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const V=(N=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return V==="*"||V===((O=t?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const x=v.data,{schema:E,table:T,commit_timestamp:C,type:N,errors:O}=x;v=Object.assign(Object.assign({},{schema:E,table:T,commit_timestamp:C,eventType:N,new:{},old:{},errors:O}),this._getPayloadRecords(x))}b.callback(v,r)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&vm.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tn.close,{},e)}_onError(e){this._on(Tn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Tb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Tb(e.columns,e.old_record)),t}}const Ab=()=>{},Rc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b2=[1e3,2e3,5e3,1e4],x2=1e4,S2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w2{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tp,this.transport=null,this.heartbeatIntervalMs=Rc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ab,this.ref=0,this.reconnectTimer=null,this.logger=Ab,this.conn=null,this.sendBuffer=[],this.serializer=new f2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>ll(async()=>{const{default:u}=await Promise.resolve().then(()=>xo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Cp.websocket}`,this.httpEndpoint=Bx(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=o2.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:c2}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ra.connecting:return Li.Connecting;case Ra.open:return Li.Open;case Ra.closing:return Li.Closing;default:return Li.Closed}}isConnected(){return this.connectionState()===Li.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new vm(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(u2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Rc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:l}=t,u=l?`(${l})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${s} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([S2],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:l2};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Tn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Lx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,o,l,u,f,h;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Tp,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:Rc.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:m=>b2[m-1]||x2,this.encode=(f=e?.encode)!==null&&f!==void 0?f:(m,y)=>y(JSON.stringify(m)),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class bm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class E2 extends bm{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ap extends bm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var k2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};const Ux=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},T2=()=>k2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ll(()=>Promise.resolve().then(()=>xo),void 0)).Response:Response}),Mp=n=>{if(Array.isArray(n))return n.map(t=>Mp(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Mp(r)}),e},C2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Zi=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};const Uh=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_2=(n,e,t)=>Zi(void 0,void 0,void 0,function*(){const r=yield T2();n instanceof r&&!t?.noResolveJson?n.json().then(s=>{const o=n.status||500,l=s?.statusCode||o+"";e(new E2(Uh(s),o,l))}).catch(s=>{e(new Ap(Uh(s),s))}):e(new Ap(Uh(n),n))}),A2=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"||!r?s:(C2(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),t))};function cl(n,e,t,r,s,o){return Zi(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,A2(e,r,s,o)).then(f=>{if(!f.ok)throw f;return r?.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>_2(f,u,r))})})}function nu(n,e,t,r){return Zi(this,void 0,void 0,function*(){return cl(n,"GET",e,t,r)})}function fr(n,e,t,r,s){return Zi(this,void 0,void 0,function*(){return cl(n,"POST",e,r,s,t)})}function Op(n,e,t,r,s){return Zi(this,void 0,void 0,function*(){return cl(n,"PUT",e,r,s,t)})}function M2(n,e,t,r){return Zi(this,void 0,void 0,function*(){return cl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Px(n,e,t,r,s){return Zi(this,void 0,void 0,function*(){return cl(n,"DELETE",e,r,s,t)})}var qt=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};const O2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class N2{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ux(s)}uploadOrUpdate(e,t,r,s){return qt(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},Mb),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s?.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(t),m=this._getFinalPath(h),y=yield(e=="PUT"?Op:fr)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(mt(o))return{data:null,error:o};throw o}})}upload(e,t,r){return qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return qt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let f;const h=Object.assign({upsert:Mb.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const y=yield Op(this.fetch,u.toString(),f,{headers:m});return{data:{path:o,fullPath:y.Key},error:null}}catch(f){if(mt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return qt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const o=yield fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new bm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}update(e,t,r){return qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return qt(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return qt(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return qt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return qt(this,void 0,void 0,function*(){try{const s=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}download(e,t){return qt(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield nu(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(mt(u))return{data:null,error:u};throw u}})}info(e){return qt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield nu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Mp(r),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}exists(e){return qt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield M2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(mt(r)&&r instanceof Ap){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const u=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&s.push(f);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return qt(this,void 0,void 0,function*(){try{return{data:yield Px(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}})}list(e,t,r){return qt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},O2),t),{prefix:e||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const R2="2.10.4",D2={"X-Client-Info":`storage-js/${R2}`};var Gs=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};class j2{constructor(e,t={},r,s){const o=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},D2),t),this.fetch=Ux(r)}listBuckets(){return Gs(this,void 0,void 0,function*(){try{return{data:yield nu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield nu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Gs(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Gs(this,void 0,void 0,function*(){try{return{data:yield Op(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Gs(this,void 0,void 0,function*(){try{return{data:yield Px(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}})}}class L2 extends j2{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new N2(this.url,this.headers,e,this.fetch)}}const z2="2.54.0";let _a="";typeof Deno<"u"?_a="deno":typeof document<"u"?_a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_a="react-native":_a="node";const B2={"X-Client-Info":`supabase-js-${_a}/${z2}`},U2={headers:B2},P2={schema:"public"},H2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I2={};var $2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};const q2=n=>{let e;return n?e=n:typeof fetch>"u"?e=Mx:e=fetch,(...t)=>e(...t)},V2=()=>typeof Headers>"u"?Ox:Headers,K2=(n,e,t)=>{const r=q2(t),s=V2();return(o,l)=>$2(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:n;let h=new s(l?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var F2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};function G2(n){return n.endsWith("/")?n:n+"/"}function Y2(n,e){var t,r;const{db:s,auth:o,realtime:l,global:u}=n,{db:f,auth:h,realtime:m,global:y}=e,v={db:Object.assign(Object.assign({},f),s),auth:Object.assign(Object.assign({},h),o),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},y),u),{headers:Object.assign(Object.assign({},(t=y?.headers)!==null&&t!==void 0?t:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>F2(this,void 0,void 0,function*(){return""})};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}const Hx="2.71.1",to=30*1e3,Np=3,Ph=Np*to,W2="http://localhost:9999",J2="supabase.auth.token",Q2={"X-Client-Info":`gotrue-js/${Hx}`},Rp="X-Supabase-Api-Version",Ix={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},X2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Z2=600*1e3;class xm extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class eA extends xm{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function tA(n){return me(n)&&n.name==="AuthApiError"}class $x extends xm{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ui extends xm{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Gr extends ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nA(n){return me(n)&&n.name==="AuthSessionMissingError"}class Dc extends ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jc extends ui{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lc extends ui{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rA(n){return me(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ob extends ui{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dp extends ui{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hh(n){return me(n)&&n.name==="AuthRetryableFetchError"}class Nb extends ui{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class jp extends ui{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ru="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rb=` 	
\r=`.split(""),iA=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Rb.length;e+=1)n[Rb[e].charCodeAt(0)]=-2;for(let e=0;e<ru.length;e+=1)n[ru[e].charCodeAt(0)]=e;return n})();function Db(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ru[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ru[r]),e.queuedBits-=6}}function qx(n,e,t){const r=iA[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function jb(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{aA(l,r,t)};for(let l=0;l<n.length;l+=1)qx(n.charCodeAt(l),s,o);return e.join("")}function sA(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function oA(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}sA(r,e)}}function aA(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function lA(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)qx(n.charCodeAt(s),t,r);return new Uint8Array(e)}function cA(n){const e=[];return oA(n,t=>e.push(t)),new Uint8Array(e)}function uA(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Db(s,t,r)),Db(null,t,r),e.join("")}function dA(n){return Math.round(Date.now()/1e3)+n}function fA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const kn=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},Vx=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function hA(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Kx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ll(async()=>{const{default:r}=await Promise.resolve().then(()=>xo);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},pA=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",no=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ri=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Kr=async(n,e)=>{await n.removeItem(e)};class Ju{constructor(){this.promise=new Ju.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ju.promiseConstructor=Promise;function Ih(n){const e=n.split(".");if(e.length!==3)throw new jp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!X2.test(e[r]))throw new jp("JWT not in base64url format");return{header:JSON.parse(jb(e[0])),payload:JSON.parse(jb(e[1])),signature:lA(e[2]),raw:{header:e[0],payload:e[1]}}}async function mA(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function gA(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function yA(n){return("0"+n.toString(16)).substr(-2)}function vA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,yA).join("")}async function bA(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function xA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await bA(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(n,e,t=!1){const r=vA();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await no(n,`${e}-code-verifier`,s);const o=await xA(r);return[o,r===o?"plain":"s256"]}const SA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wA(n){const e=n.headers.get(Rp);if(!e||!e.match(SA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function EA(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function kA(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const TA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ws(n){if(!TA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $h(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lb(n){return JSON.parse(JSON.stringify(n))}var CA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ji=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_A=[502,503,504];async function zb(n){var e;if(!pA(n))throw new Dp(ji(n),0);if(_A.includes(n.status))throw new Dp(ji(n),n.status);let t;try{t=await n.json()}catch(o){throw new $x(ji(o),o)}let r;const s=wA(n);if(s&&s.getTime()>=Ix["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Nb(ji(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Gr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Nb(ji(t),n.status,t.weak_password.reasons);throw new eA(ji(t),n.status||500,r)}const AA=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Ee(n,e,t,r){var s;const o=Object.assign({},r?.headers);o[Rp]||(o[Rp]=Ix["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await MA(n,e,t+u,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function MA(n,e,t,r,s,o){const l=AA(e,r,s,o);let u;try{u=await n(t,Object.assign({},l))}catch(f){throw console.error(f),new Dp(ji(f),0)}if(u.ok||await zb(u),r?.noResolveJson)return u;try{return await u.json()}catch(f){await zb(f)}}function cr(n){var e;let t=null;DA(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=dA(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Bb(n){const e=cr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Xr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function OA(n){return{data:n,error:null}}function NA(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=CA(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function RA(n){return n}function DA(n){return n.access_token&&n.refresh_token&&n.expires_in}const qh=["global","local","others"];var jA=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class LA{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Kx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=qh[0]){if(qh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qh.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=jA(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NA,redirectTo:t?.redirectTo})}catch(t){if(me(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xr})}catch(t){if(me(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},m=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:RA});if(m.error)throw m.error;const y=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(f=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(x=>{const E=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(x.split(";")[1].split("=")[1]);h[`${T}Page`]=E}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ws(e);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xr})}catch(t){if(me(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ws(e);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ws(e);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xr})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ws(e.userId);try{const{data:t,error:r}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(me(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ws(e.userId),Ws(e.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}}}function Ub(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function zA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Js={debug:!!(globalThis&&Vx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class BA extends Fx{}async function UA(n,e,t){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Js.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new BA(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Js.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}zA();const PA={url:W2,storageKey:J2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pb(n,e,t){return await t()}const Qs={};class Fa{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fa.nextInstanceID,Fa.nextInstanceID+=1,this.instanceID>0&&kn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},PA),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new LA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Kx(s.fetch),this.lock=s.lock||Pb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kn()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=UA:this.lock=Pb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Vx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ub(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ub(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Qs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Qs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Hx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=hA(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),kn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),rA(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return me(t)?{error:t}:{error:new $x("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:cr}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:m,password:y,options:v}=e;let b=null,x=null;this.flowType==="pkce"&&([b,x]=await Ys(this.storage,this.storageKey)),o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:m,password:y,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:x},xform:cr})}else if("phone"in e){const{phone:m,password:y,options:v}=e;o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:cr})}else throw new jc("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Bb})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Bb})}else throw new jc("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Dc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,o,l,u,f,h,m,y,v,b;let x,E;if("message"in e)x=e.message,E=e.signature;else{const{chain:T,wallet:C,statement:N,options:O}=e;let V;if(kn())if(typeof C=="object")V=C;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))V=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=C}const U=new URL((t=O?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in V&&V.signIn){const G=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),N?{statement:N}:null));let Y;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")Y=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)Y=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)x=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),E=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${U.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(s=(r=O?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=O?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((h=O?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(m=O?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const G=await V.signMessage(new TextEncoder().encode(x),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=G}}try{const{data:T,error:C}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:uA(E)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:cr});if(C)throw C;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new Dc}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:C})}catch(T){if(me(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const t=await Ri(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:l}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:cr});if(await Kr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Dc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,u=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:cr}),{data:f,error:h}=u;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Dc}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:u,options:f}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Ys(this.storage,this.storageKey));const{error:y}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:m}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=f?.data)!==null&&s!==void 0?s:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(l=f?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new jc("You must provide either an email or phone number.")}catch(u){if(me(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:cr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Ys(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:OA})}catch(o){if(me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Gr;const{error:s}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Ee(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new jc("You must provide either an email or phone number and a type")}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ri(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ph:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Ri(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=$h()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,h,m)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,m))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xr}):await this._useSession(async t=>{var r,s,o;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gr}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Xr})})}catch(t){if(me(t))return nA(t)&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Gr;const l=s.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Ys(this.storage,this.storageKey));const{data:h,error:m}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:Xr});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gr;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=Ih(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(me(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Gr;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!kn())throw new Lc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ob("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lc("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ob("No code detected.");const{data:N,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!l||!h)throw new Lc("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(u);let v=m+y;f&&(v=parseInt(f));const b=v-m;b*1e3<=to&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const x=v-y;m-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,v,m):m-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,v,m);const{data:E,error:T}=await this._getUser(o);if(T)throw T;const C={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:h,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(r){if(me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ri(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(tA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=fA(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ys(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,f,h,m;const{data:y,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(h=y.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return kn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(me(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await gA(async s=>(s>0&&await mA(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cr})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Hh(o)&&Date.now()+l-r<to})}catch(r){if(this._debug(t,"error",r),me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),kn()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Ri(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Ri(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await no(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l?.user)!==null&&e!==void 0?e:$h()}else if(s&&!s.user&&!s.user){const l=await Ri(this.storage,this.storageKey+"-user");l&&l?.user?(s.user=l.user,await Kr(this.storage,this.storageKey+"-user"),await no(this.storage,this.storageKey,s)):s.user=$h()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ph;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Ph}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Hh(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&l?.user?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Gr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ju;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Gr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),me(o)){const l={session:null,error:o};return Hh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(f){o.push(f)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await no(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const o=Lb(s);await no(this.storage,this.storageKey,o)}else{const s=Lb(t);await no(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Kr(this.storage,this.storageKey),await Kr(this.storage,this.storageKey+"-code-verifier"),await Kr(this.storage,this.storageKey+"-user"),this.userStorage&&await Kr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),to);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/to);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${to}ms, refresh threshold is ${Np} ticks`),s<=Np&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Fx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Ys(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(me(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:h}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=f?.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(me(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:u}=await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(me(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(me(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ih(s.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const m=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+Z2>s)return r;const{data:o,error:l}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:b,error:x}=await this.getSession();if(x||!b.session)return{data:null,error:x};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:f}}=Ih(r);t?.allowExpired||EA(o.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!h){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const m=kA(s.alg),y=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,cA(`${u}.${f}`)))throw new jp("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}Fa.nextInstanceID=0;const HA=Fa;class IA extends HA{constructor(e){super(e)}}var $A=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(m){try{h(r.next(m))}catch(y){l(y)}}function f(m){try{h(r.throw(m))}catch(y){l(y)}}function h(m){m.done?o(m.value):s(m.value).then(u,f)}h((r=r.apply(n,e||[])).next())})};class qA{constructor(e,t,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=G2(e),f=new URL(u);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,m={db:P2,realtime:I2,auth:Object.assign(Object.assign({},H2),{storageKey:h}),global:U2},y=Y2(r??{},m);this.storageKey=(s=y.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=y.global.headers)!==null&&o!==void 0?o:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,y.global.fetch),this.fetch=K2(t,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new s2(new URL("rest/v1",f).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new L2(this.storageUrl.href,this.headers,this.fetch,r?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new G_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $A(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:f},h,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IA({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:f,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new w2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VA=(n,e,t)=>new qA(n,e,t);function KA(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KA()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const FA="https://pxmouonbnyeofvlqgini.supabase.co",GA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB4bW91b25ibnllb2Z2bHFnaW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODQ0NzcsImV4cCI6MjA3MDU2MDQ3N30.lvPShUeBpX7JH2j9rxNWtpwZxFN9MYgWYWNiJ-7_NtI",de=VA(FA,GA,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),ul=Wu((n,e)=>({user:null,userProfile:null,session:null,loading:!0,initialize:async()=>{try{const{data:{session:t}}=await de.auth.getSession();t?.user&&(n({user:t.user,session:t}),await e().loadUserProfile()),de.auth.onAuthStateChange(async(r,s)=>{s?.user?(n({user:s.user,session:s}),await e().loadUserProfile()):n({user:null,session:null,userProfile:null})})}catch(t){console.error("Auth initialization error:",t)}finally{n({loading:!1})}},login:async(t,r)=>{const{data:s,error:o}=await de.auth.signInWithPassword({email:t,password:r});if(o)throw o;s.user&&(n({user:s.user,session:s.session}),await e().loadUserProfile())},register:async(t,r,s)=>{const{error:o}=await de.auth.signUp({email:t,password:r,options:{data:{username:s||t.split("@")[0]}}});if(o)throw o},logout:async()=>{const{error:t}=await de.auth.signOut();if(t)throw t;n({user:null,session:null,userProfile:null})},loadUserProfile:async()=>{const{user:t}=e();if(t)try{const{data:r,error:s}=await de.from("users").select("*").eq("id",t.id).single();if(s){console.error("Error loading user profile:",s);return}n({userProfile:r})}catch(r){console.error("Error loading user profile:",r)}},updateProfile:async t=>{const{user:r,userProfile:s}=e();if(!r||!s)throw new Error("User not authenticated");const{data:o,error:l}=await de.from("users").update({...t,updated_at:new Date().toISOString()}).eq("id",r.id).select().single();if(l)throw l;n({userProfile:o})},resetPassword:async t=>{const{error:r}=await de.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw r}}));ul.getState().initialize();const YA=Wu((n,e)=>({notifications:[],unreadCount:0,loading:!1,loadNotifications:async()=>{try{n({loading:!0});const{data:t,error:r}=await de.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);if(r)throw r;const s=t?.filter(o=>!o.is_read).length||0;n({notifications:t||[],unreadCount:s})}catch(t){throw console.error("Error loading notifications:",t),t}finally{n({loading:!1})}},markAsRead:async t=>{try{const{error:r}=await de.from("notifications").update({is_read:!0}).eq("id",t);if(r)throw r;n(s=>({notifications:s.notifications.map(o=>o.id===t?{...o,is_read:!0}:o),unreadCount:Math.max(0,s.unreadCount-1)}))}catch(r){throw console.error("Error marking notification as read:",r),r}},markAllAsRead:async()=>{try{const{error:t}=await de.from("notifications").update({is_read:!0}).eq("is_read",!1);if(t)throw t;n(r=>({notifications:r.notifications.map(s=>({...s,is_read:!0})),unreadCount:0}))}catch(t){throw console.error("Error marking all notifications as read:",t),t}},addNotification:t=>{n(r=>({notifications:[t,...r.notifications],unreadCount:t.is_read?r.unreadCount:r.unreadCount+1}))},deleteNotification:async t=>{try{const{error:r}=await de.from("notifications").delete().eq("id",t);if(r)throw r;n(s=>{const o=s.notifications.find(l=>l.id===t);return{notifications:s.notifications.filter(l=>l.id!==t),unreadCount:o&&!o.is_read?Math.max(0,s.unreadCount-1):s.unreadCount}})}catch(r){throw console.error("Error deleting notification:",r),r}},subscribeToRealtime:t=>{const r=de.channel(`notifications:user_id=eq.${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t}`},s=>{const o=s.new;e().addNotification(o),Notification.permission==="granted"&&new Notification(o.title,{body:o.message,icon:"/favicon.ico"})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${t}`},s=>{const o=s.new;n(l=>({notifications:l.notifications.map(u=>u.id===o.id?o:u)}))}).subscribe();return()=>{de.removeChannel(r)}}})),WA=()=>{const{user:n}=ul(),{subscribeToRealtime:e}=YA();R.useEffect(()=>n?e(n.id):void 0,[n?.id,e])};class Gx{async getPosts(e){let t=de.from("posts").select(`
        *,
        users!inner(id, username, avatar_url, role),
        categories!inner(id, name_de, name_fr, name_it),
        therapists(id, form_of_address, first_name, last_name, designation, institution, canton)
      `).eq("is_published",!0).eq("is_active",!0).eq("is_banned",!1).order("created_at",{ascending:!1});e&&(t=t.eq("category_id",e));const{data:r,error:s}=await t;if(s)throw console.error("Error fetching posts:",s),s;return r||[]}async getPost(e){const{data:t,error:r}=await de.from("posts").select(`
        *,
        users!inner(id, username, avatar_url, role),
        categories!inner(id, name_de, name_fr, name_it),
        therapists(id, form_of_address, first_name, last_name, designation, institution, canton)
      `).eq("id",e).eq("is_published",!0).eq("is_active",!0).eq("is_banned",!1).single();if(r)throw console.error("Error fetching post:",r),r;return t}async createPost(e){console.log("🔧 PostsService: Starting createPost with data:",e);const{data:{user:t},error:r}=await de.auth.getUser();if(r)throw console.error("❌ PostsService: Auth error:",r),new Error("Authentication failed: "+r.message);if(!t)throw console.error("❌ PostsService: No authenticated user"),new Error("User not authenticated");console.log("👤 PostsService: Authenticated user:",t.email,"ID:",t.id);const s={...e,user_id:t.id,is_published:e.is_published??!0,designation:"Allgemein"};console.log("📤 PostsService: Inserting data:",s);const{data:o,error:l}=await de.from("posts").insert([s]).select().single();if(l)throw console.error("❌ PostsService: Database error:",l),new Error("Database error: "+l.message);return console.log("✅ PostsService: Post created successfully:",o),o}async getCategories(){const{data:e,error:t}=await de.from("categories").select("*").eq("is_active",!0).order("id",{ascending:!0});if(t)throw console.error("Error fetching categories:",t),t;return e||[]}async searchPosts(e){const{data:t,error:r}=await de.from("posts").select(`
        *,
        users!inner(id, username, avatar_url, role),
        categories!inner(id, name_de, name_fr, name_it),
        therapists(id, form_of_address, first_name, last_name, designation, institution, canton)
      `).eq("is_published",!0).eq("is_active",!0).eq("is_banned",!1).or(`title.ilike.%${e}%,content.ilike.%${e}%`).order("created_at",{ascending:!1});if(r)throw console.error("Error searching posts:",r),r;return t||[]}}const ka={page:1,limit:20,hasMore:!0,total:0},Xs=new Gx,Bi=Wu((n,e)=>({posts:[],currentPost:null,loading:!1,filters:{},pagination:ka,categories:[],categoriesLoading:!1,loadPosts:async t=>{try{n({loading:!0}),t&&n({filters:t,pagination:ka});const r=t||e().filters,s=await Xs.getPosts(r.category);n({posts:s,pagination:{...e().pagination,total:s.length,hasMore:s.length>=e().pagination.limit}})}catch(r){throw console.error("Error loading posts:",r),r}finally{n({loading:!1})}},loadMorePosts:async()=>{const{pagination:t,filters:r,posts:s}=e();if(t.hasMore)try{n({loading:!0});const o=t.page+1,l=await Xs.getPosts(r.category);n({posts:[...s,...l],pagination:{...t,page:o,hasMore:l.length>=t.limit}})}catch(o){throw console.error("Error loading more posts:",o),o}finally{n({loading:!1})}},loadPost:async t=>{try{n({loading:!0});const r=await Xs.getPost(t);n({currentPost:r})}catch(r){throw console.error("Error loading post:",r),r}finally{n({loading:!1})}},createPost:async t=>{try{const r=await Xs.createPost(t);n(s=>({posts:[r,...s.posts]}))}catch(r){throw console.error("Error creating post:",r),r}},updatePost:async(t,r)=>{try{n(s=>({posts:s.posts.map(o=>o.id===t?{...o,...r}:o),currentPost:s.currentPost?.id===t?{...s.currentPost,...r}:s.currentPost}))}catch(s){throw console.error("Error updating post:",s),s}},deletePost:async t=>{try{n(r=>({posts:r.posts.filter(s=>s.id!==t),currentPost:r.currentPost?.id===t?null:r.currentPost}))}catch(r){throw console.error("Error deleting post:",r),r}},setFilters:t=>{n(r=>({filters:{...r.filters,...t},pagination:ka}))},clearFilters:()=>{n({filters:{},pagination:ka})},loadCategories:async()=>{try{n({categoriesLoading:!0});const t=await Xs.getCategories();n({categories:t})}catch(t){throw console.error("Error loading categories:",t),t}finally{n({categoriesLoading:!1})}},searchPosts:async t=>{try{n({loading:!0});const r=await Xs.searchPosts(t);n({posts:r,filters:{...e().filters,search:t},pagination:{...ka,total:r.length}})}catch(r){throw console.error("Error searching posts:",r),r}finally{n({loading:!1})}}}));Bi.getState().loadCategories();const JA=()=>{const n=Bi();R.useEffect(()=>{const e=de.channel("posts:realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"is_published=eq.true"},async t=>{const r=t.new,{filters:s}=Bi.getState();let o=!0;if(s.category&&r.category_id!==s.category&&(o=!1),o){const{data:l}=await de.from("posts").select(`
                *,
                users!inner(id, username, avatar_url, role),
                categories!inner(id, name_de, name_fr, name_it),
                therapists(*)
              `).eq("id",r.id).single();if(l){const u=Bi.getState().posts;Bi.setState({posts:[l,...u]})}}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts"},async t=>{const r=t.new,{data:s}=await de.from("posts").select(`
              *,
              users!inner(id, username, avatar_url, role),
              categories!inner(id, name_de, name_fr, name_it),
              therapists(*)
            `).eq("id",r.id).single();s&&n.updatePost(r.id,s)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts"},t=>{const r=t.old;n.deletePost(r.id)}).subscribe();return()=>{de.removeChannel(e)}},[n])};async function QA(){try{console.log("🔍 Testing Supabase connection...");const{error:n}=await de.from("categories").select("count").limit(1);if(n)return console.error("❌ Health check failed:",n),!1;console.log("✅ Health check passed");const{data:e,error:t}=await de.from("categories").select("*").limit(5);t?console.error("❌ Categories query failed:",t):(console.log("✅ Categories found:",e?.length||0),console.log("📊 Sample categories:",e));const{data:r,error:s}=await de.from("users").select("*").limit(5);s?console.error("❌ Users query failed:",s):console.log("✅ Users found:",r?.length||0);const{data:o,error:l}=await de.from("posts").select("*").limit(5);l?console.error("❌ Posts query failed:",l):console.log("✅ Posts found:",o?.length||0);const{data:{user:u},error:f}=await de.auth.getUser();return f?console.error("❌ Auth check failed:",f):u?console.log("✅ Authenticated user:",u.email):console.log("ℹ️ No authenticated user"),!0}catch(n){return console.error("💥 Connection test failed:",n),!1}}const XA=({onCreatePost:n,showCreatePostButton:e=!0})=>{const{user:t,logout:r}=ul(),[s,o]=R.useState(!1),l=async()=>{await r()};return w.jsx("nav",{className:"bg-white shadow-lg border-b border-gray-200",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[w.jsxs("div",{className:"flex justify-between items-center h-16",children:[w.jsx("div",{className:"flex items-center",children:w.jsxs(Dt,{to:"/",className:"flex items-center space-x-2",children:[w.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center",children:w.jsx("span",{className:"text-white font-bold text-lg",children:"R"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-headline font-bold text-primary-600",children:"Remy Forum"}),w.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Psychotherapie Community"})]})]})}),w.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[w.jsxs("div",{className:"flex items-center space-x-6",children:[w.jsx(Dt,{to:"/",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"🏠 Forum"}),w.jsx(Dt,{to:"/therapists",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"👩‍⚕️ Therapeuten"}),w.jsx(Dt,{to:"/messages",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"💬 Nachrichten"})]}),e&&w.jsxs("button",{onClick:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-all transform hover:scale-105 shadow-md flex items-center space-x-2",style:{backgroundColor:"#0284c7",boxShadow:"0 2px 4px -1px rgba(0, 0, 0, 0.1)"},children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),w.jsx("span",{children:"Beitrag erstellen"})]}),t?w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsxs(Dt,{to:"/profile",className:"flex items-center space-x-2 text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[w.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-primary-600 font-semibold text-sm",children:t.email?.charAt(0)?.toUpperCase()||"?"})}),w.jsx("span",{className:"hidden lg:inline",children:"Profil"})]}),w.jsx("button",{onClick:l,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Abmelden"})]}):w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(Dt,{to:"/login",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Anmelden"}),w.jsx(Dt,{to:"/register",className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Registrieren"})]})]}),w.jsx("div",{className:"md:hidden",children:w.jsx("button",{onClick:()=>o(!s),className:"text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s?w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),s&&w.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:w.jsxs("div",{className:"flex flex-col space-y-2",children:[w.jsx(Dt,{to:"/",className:"text-gray-700 hover:text-primary-600 px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"🏠 Forum"}),w.jsx(Dt,{to:"/therapists",className:"text-gray-700 hover:text-primary-600 px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"👩‍⚕️ Therapeuten"}),w.jsx(Dt,{to:"/messages",className:"text-gray-700 hover:text-primary-600 px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"💬 Nachrichten"}),e&&w.jsxs("button",{onClick:()=>{n(),o(!1)},className:"mx-4 mt-2 bg-primary-600 hover:bg-primary-700 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center space-x-2",style:{backgroundColor:"#0284c7"},children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),w.jsx("span",{children:"Beitrag erstellen"})]}),t?w.jsxs("div",{className:"border-t border-gray-200 mt-4 pt-4",children:[w.jsxs("div",{className:"flex items-center px-4 py-2 text-sm text-gray-700",children:[w.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:w.jsx("span",{className:"text-primary-600 font-semibold",children:t.email?.charAt(0)?.toUpperCase()||"?"})}),w.jsx("span",{children:t.email})]}),w.jsx(Dt,{to:"/profile",className:"block text-gray-700 hover:text-primary-600 px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"👤 Profil"}),w.jsx("button",{onClick:()=>{l(),o(!1)},className:"w-full text-left text-gray-700 hover:text-red-600 px-4 py-3 rounded-md text-base font-medium transition-colors",children:"🚪 Abmelden"})]}):w.jsxs("div",{className:"border-t border-gray-200 mt-4 pt-4 flex flex-col space-y-2 px-4",children:[w.jsx(Dt,{to:"/login",className:"text-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"Anmelden"}),w.jsx(Dt,{to:"/register",className:"text-center bg-primary-600 hover:bg-primary-700 text-white px-4 py-3 rounded-md text-base font-medium transition-colors",onClick:()=>o(!1),children:"Registrieren"})]})]})})]})})},ZA=({children:n,onCreatePost:e=()=>{},showCreatePostButton:t=!0})=>w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx(XA,{onCreatePost:e,showCreatePostButton:t}),w.jsx("main",{className:"flex-1",children:n}),w.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4",children:"Über Remy Forum"}),w.jsx("p",{className:"text-gray-600 text-sm",children:"Eine sichere Community für Psychotherapie-Patienten zum Austausch von Erfahrungen und gegenseitiger Unterstützung."})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4",children:"Hilfreiche Links"}),w.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"📋 Community-Regeln"})}),w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"🔒 Datenschutz"})}),w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"📞 Krisenhilfe"})}),w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"❓ FAQ"})})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider mb-4",children:"Kontakt & Support"}),w.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[w.jsx("li",{children:w.jsx("a",{href:"mailto:support@remy-forum.ch",className:"hover:text-primary-600 transition-colors",children:"✉️ Support kontaktieren"})}),w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"🚨 Problem melden"})}),w.jsx("li",{children:w.jsx("a",{href:"#",className:"hover:text-primary-600 transition-colors",children:"💡 Feedback geben"})})]})]})]}),w.jsx("div",{className:"border-t border-gray-200 mt-8 pt-6",children:w.jsxs("p",{className:"text-center text-sm text-gray-500",children:["© 2024 Remy Forum. Alle Rechte vorbehalten.",w.jsx("span",{className:"mx-2",children:"•"}),"Behandle andere respektvoll und teile keine persönlichen Daten."]})})]})})]});class Qu{async getComments(e){const{data:t,error:r}=await de.from("comments").select(`
        *,
        users!inner(id, username, avatar_url, role)
      `).eq("post_id",e).order("created_at",{ascending:!0});if(r)throw console.error("Error fetching comments:",r),r;return t||[]}async getReplies(e){return console.log("⚠️ Threaded comments not supported in current schema"),[]}async createComment(e){const{data:{user:t}}=await de.auth.getUser();if(!t)throw new Error("User not authenticated");const r={post_id:e.post_id,content:e.content,user_id:t.id},{data:s,error:o}=await de.from("comments").insert([r]).select().single();if(o)throw console.error("Error creating comment:",o),o;return s}async updateComment(e,t){const{data:{user:r}}=await de.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:s,error:o}=await de.from("comments").update({content:t}).eq("id",e).eq("user_id",r.id).select().single();if(o)throw console.error("Error updating comment:",o),o;return s}async deleteComment(e){const{data:{user:t}}=await de.auth.getUser();if(!t)throw new Error("User not authenticated");const{error:r}=await de.from("comments").delete().eq("id",e).eq("user_id",t.id);if(r)throw console.error("Error deleting comment:",r),r}async getCommentCount(e){const{count:t,error:r}=await de.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",e);if(r)throw console.error("Error getting comment count:",r),r;return t||0}}function eM(n){const e=[];n.form_of_address&&e.push(n.form_of_address),e.push(n.first_name),e.push(n.last_name);const t=e.join(" "),r=[];n.designation&&r.push(n.designation),n.institution&&r.push(n.institution);let s=t;return r.length>0&&(s+=` ${r.join(", ")}`),n.canton&&(s+=` und ${n.canton}`),s}function tM(n){return`Erfahrung mit ${eM(n)}`}function nM(n,e){return n===1&&!!e}function Yx(n){return nM(n.category_id,n.therapists)?tM(n.therapists):n.title}const rM=({post:n,onClick:e})=>{const t=dm(),[r,s]=R.useState(0),o=new Qu;R.useEffect(()=>{l()},[n.id]);const l=async()=>{try{const y=await o.getCommentCount(n.id);s(y)}catch(y){console.error("Error loading comment count:",y)}},u=()=>{e?e():t(`/post/${n.id}`)},f=y=>new Date(y).toLocaleDateString("de-DE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=y=>({1:"bg-blue-100 text-blue-800",2:"bg-green-100 text-green-800",3:"bg-purple-100 text-purple-800",4:"bg-red-100 text-red-800",5:"bg-yellow-100 text-yellow-800"})[y]||"bg-gray-100 text-gray-800",m=(y,v=150)=>y.length<=v?y:y.substring(0,v)+"...";return w.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4 hover:shadow-md transition-shadow cursor-pointer",onClick:u,children:[w.jsxs("div",{className:"flex items-start justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-primary-600 font-semibold text-sm",children:n.users?.username?.charAt(0)?.toUpperCase()||"?"})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-gray-900",children:n.users?.username}),w.jsx("p",{className:"text-sm text-gray-500",children:f(n.created_at)})]})]}),w.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(n.category_id)}`,children:n.categories?.name_de})]}),w.jsx("h3",{className:"text-lg font-headline font-semibold text-gray-900 mb-2",children:Yx(n)}),w.jsx("div",{className:"text-gray-600 mb-4",children:m(n.content)}),w.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[n.canton&&w.jsxs("span",{className:"inline-flex items-center",children:[w.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),n.canton]}),n.designation&&w.jsxs("span",{className:"inline-flex items-center",children:[w.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),n.designation]})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),w.jsxs("span",{children:[r," Kommentare"]})]})]})]})};var Vh={exports:{}},Kh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function iM(){if(Hb)return Kh;Hb=1;var n=il();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,v){var b=v(),x=r({inst:{value:b,getSnapshot:v}}),E=x[0].inst,T=x[1];return o(function(){E.value=b,E.getSnapshot=v,f(E)&&T({inst:E})},[y,b,v]),s(function(){return f(E)&&T({inst:E}),y(function(){f(E)&&T({inst:E})})},[y]),l(b),b}function f(y){var v=y.getSnapshot;y=y.value;try{var b=v();return!t(y,b)}catch{return!0}}function h(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Kh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Kh}var Ib;function Wx(){return Ib||(Ib=1,Vh.exports=iM()),Vh.exports}var Jx=Wx();function Et(n){this.content=n}Et.prototype={constructor:Et,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Et(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Et(t)},addToStart:function(n,e){return new Et([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Et(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Et(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Et.from(n),n.size?new Et(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Et.from(n),n.size?new Et(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Et.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Et.from=function(n){if(n instanceof Et)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Et(e)};function Qx(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let l=0;s.text[l]==o.text[l];l++)t++;return t}if(s.content.size||o.content.size){let l=Qx(s.content,o.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function Xx(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let l=n.child(--s),u=e.child(--o),f=l.nodeSize;if(l==u){t-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,m=Math.min(l.text.length,u.text.length);for(;h<m&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=Xx(l.content,u.content,t-1,r-1);if(h)return h}t-=f,r-=f}}class K{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let l=0,u=0;u<t;l++){let f=this.content[l],h=u+f.nodeSize;if(h>e&&r(f,s+u,o||null,l)!==!1&&f.content.size){let m=u+1;f.nodesBetween(Math.max(0,e-m),Math.min(f.content.size,t-m),r,s+m)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",l=!0;return this.nodesBetween(e,t,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,t-f):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new K(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],f=l+u.nodeSize;f>e&&((l<e||f>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=f}return new K(r,s)}cutByIndex(e,t){return e==t?K.empty:e==0&&t==this.content.length?this:new K(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new K(s,o)}addToStart(e){return new K([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new K(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return Qx(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Xx(this,e,t,r)}findIndex(e){if(e==0)return zc(0,e);if(e==this.size)return zc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),o=r+s.nodeSize;if(o>=e)return o==e?zc(t+1,o):zc(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return K.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new K(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return K.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new K(t||e,r)}static from(e){if(!e)return K.empty;if(e instanceof K)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new K([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}K.empty=new K([],0);const Fh={index:0,offset:0};function zc(n,e){return Fh.index=n,Fh.offset=e,Fh}function iu(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!iu(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!iu(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Be=class Lp{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&iu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Lp.none;if(e instanceof Lp)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Be.none=[];class su extends Error{}class X{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=eS(this.content,e+this.openStart,t);return r&&new X(r,this.openStart,this.openEnd)}removeBetween(e,t){return new X(Zx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return X.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new X(K.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new X(e,r,s)}}X.empty=new X(K.empty,0,0);function Zx(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(Zx(o.content,e-s-1,t-s-1)))}function eS(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),l=n.maybeChild(s);if(o==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=eS(l.content,e-o-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function sM(n,e,t){if(t.openStart>n.depth)throw new su("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new su("Inconsistent open depths");return tS(n,e,t,0)}function tS(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=tS(n,e,t,r+1);return o.copy(o.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return qi(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=oM(t,n);return qi(o,rS(n,l,u,e,r))}else return qi(o,ou(n,e,r))}function nS(n,e){if(!e.type.compatibleContent(n.type))throw new su("Cannot join "+e.type.name+" onto "+n.type.name)}function zp(n,e,t){let r=n.node(t);return nS(r,e.node(t)),r}function $i(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function La(n,e,t,r){let s=(e||n).node(t),o=0,l=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&($i(n.nodeAfter,r),o++));for(let u=o;u<l;u++)$i(s.child(u),r);e&&e.depth==t&&e.textOffset&&$i(e.nodeBefore,r)}function qi(n,e){return n.type.checkContent(e),n.copy(e)}function rS(n,e,t,r,s){let o=n.depth>s&&zp(n,e,s+1),l=r.depth>s&&zp(t,r,s+1),u=[];return La(null,n,s,u),o&&l&&e.index(s)==t.index(s)?(nS(o,l),$i(qi(o,rS(n,e,t,r,s+1)),u)):(o&&$i(qi(o,ou(n,e,s+1)),u),La(e,t,s,u),l&&$i(qi(l,ou(t,r,s+1)),u)),La(r,null,s,u),new K(u)}function ou(n,e,t){let r=[];if(La(null,n,t,r),n.depth>t){let s=zp(n,e,t+1);$i(qi(s,ou(n,e,t+1)),r)}return La(e,null,t,r),new K(r)}function oM(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(K.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Ga{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Be.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!s||!o[l].isInSet(s.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new au(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(o),h=o-f;if(r.push(l,u,s+f),!h||(l=l.child(u),l.isText))break;o=h-1,s+=f+1}return new Ga(t,r,o)}static resolveCached(e,t){let r=$b.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else $b.set(e,r=new aM);let s=r.elts[r.i]=Ga.resolve(e,t);return r.i=(r.i+1)%lM,s}}class aM{constructor(){this.elts=[],this.i=0}}const lM=12,$b=new WeakMap;class au{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const cM=Object.create(null);class Mn{constructor(e,t,r,s=Be.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||K.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&iu(this.attrs,t||e.defaultAttrs||cM)&&Be.sameSet(this.marks,r||Be.none)}copy(e=null){return e==this.content?this:new Mn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Mn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return X.empty;let s=this.resolve(e),o=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,o.pos-u);return new X(h,s.depth-l,o.depth-l)}replace(e,t,r){return sM(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Ga.resolveCached(this,e)}resolveNoCache(e){return Ga.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),iS(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=K.empty,s=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let f=s;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Be.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Be.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=K.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}}Mn.prototype.text=void 0;class lu extends Mn{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):iS(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function iS(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Gi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new uM(e,t);if(r.next==null)return Gi.empty;let s=sS(r);r.next&&r.err("Unexpected trailing text");let o=yM(gM(s));return vM(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(l,u){let f=l.matchFragment(e,r);if(f&&(!t||f.validEnd))return K.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:m,next:y}=l.next[h];if(!(m.isText||m.hasRequiredAttrs())&&s.indexOf(y)==-1){s.push(y);let v=o(y,u.concat(m));if(v)return v}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:f}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Gi.empty=new Gi(!0);class uM{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function sS(n){let e=[];do e.push(dM(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function dM(n){let e=[];do e.push(fM(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fM(n){let e=mM(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=hM(n,e);else break;return e}function qb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function hM(n,e){let t=qb(n),r=t;return n.eat(",")&&(n.next!="}"?r=qb(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function pM(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let l=t[o];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function mM(n){if(n.eat("(")){let e=sS(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=pM(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gM(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,f){let h={term:f,to:u};return e[l].push(h),h}function s(l,u){l.forEach(f=>f.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((f,h)=>f.concat(o(h,u)),[]);if(l.type=="seq")for(let f=0;;f++){let h=o(l.exprs[f],u);if(f==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let f=t();return r(u,f),s(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=t();return s(o(l.expr,u),f),s(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let f=u;for(let h=0;h<l.min;h++){let m=t();s(o(l.expr,f),m),f=m}if(l.max==-1)s(o(l.expr,f),f);else for(let h=l.min;h<l.max;h++){let m=t();r(f,m),s(o(l.expr,f),m),f=m}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function oS(n,e){return e-n}function Vb(n,e){let t=[];return r(e),t.sort(oS);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let l=0;l<o.length;l++){let{term:u,to:f}=o[l];!u&&t.indexOf(f)==-1&&r(f)}}}function yM(n){let e=Object.create(null);return t(Vb(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let m=0;m<s.length;m++)s[m][0]==u&&(h=s[m][1]);Vb(n,f).forEach(m=>{h||s.push([u,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let o=e[r.join(",")]=new Gi(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(oS);o.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return o}}function vM(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:f,next:h}=s.next[u];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function aS(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function lS(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function cS(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function uS(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new xM(n,r,e[r]);return t}let Kb=class dS{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=uS(e,r.attrs),this.defaultAttrs=aS(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Gi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:lS(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mn(this,this.computeAttrs(e),K.from(t),Be.setFrom(r))}createChecked(e=null,t,r){return t=K.from(t),this.checkContent(t),new Mn(this,this.computeAttrs(e),t,Be.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=K.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(K.empty,!0);return o?new Mn(this,e,t.append(o),Be.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){cS(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Be.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new dS(o,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bM(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class xM{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bM(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Xu{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=uS(e,s.attrs),this.excluded=null;let o=aS(this.attrs);this.instance=o?new Be(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Be(this,lS(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,l)=>r[o]=new Xu(o,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){cS(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class fS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Et.from(e.nodes),t.marks=Et.from(e.marks||{}),this.nodes=Kb.compile(this.spec.nodes,this),this.marks=Xu.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Gi.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?Fb(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:Fb(this,l.split(" "))}this.nodeFromJSON=s=>Mn.fromJSON(this,s),this.markFromJSON=s=>Be.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Kb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new lu(r,r.defaultAttrs,e,Be.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Fb(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],l=o;if(o)t.push(o);else for(let u in n.marks){let f=n.marks[u];(s=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function SM(n){return n.tag!=null}function wM(n){return n.style!=null}class ii{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(SM(s))this.tags.push(s);else if(wM(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Yb(this,t,!1);return r.addAll(e,Be.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Yb(this,t,!0);return r.addAll(e,Be.none,t.from,t.to),X.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(TM(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let f=l.getAttrs(t);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(l=>{r(l=Wb(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(l=>{r(l=Wb(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ii(e,ii.schemaRules(e)))}}const hS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},EM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},pS={ol:!0,ul:!0},Ya=1,Bp=2,za=4;function Gb(n,e,t){return e!=null?(e?Ya:0)|(e==="full"?Bp:0):n&&n.whitespace=="pre"?Ya|Bp:t&~za}class Bc{constructor(e,t,r,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=Be.none,this.match=o||(l&za?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(K.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ya)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=K.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(K.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!hS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Yb{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,o,l=Gb(null,t.preserveWhitespace,0)|(r?za:0);s?o=new Bc(s.type,s.attrs,Be.none,!0,t.topMatch||s.type.contentMatch,l):r?o=new Bc(null,null,Be.none,!0,null,l):o=new Bc(e.schema.topNodeType,null,Be.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,o=s.options&Bp?"full":this.localPreserveWS||(s.options&Ya)>0;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],u=e.previousSibling;(!l||u&&u.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;pS.hasOwnProperty(l)&&this.parser.normalizeLists&&kM(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:EM.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,m=this.needsBlock;if(hS.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=f&&f.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),h&&this.sync(o),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(o,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return t}addElementByRule(e,t,r,s){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(l,t.attrs||null,r,t.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,s){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let s,o;for(let l=this.open,u=0;l>=0;l--){let f=this.nodes[l],h=f.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=f,!h.length))break;if(f.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Be.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):Jb(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,s)),o}enterInner(e,t,r,s=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=Gb(e,o,l.options);l.options&za&&l.content.length==0&&(u|=za);let f=Be.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):Jb(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new Bc(e,t,f,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Ya)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),l=(u,f)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;f>=o;f--)if(l(u-1,f))return!0;return!1}else{let m=f>0||f==0&&s?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;f--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function kM(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&pS.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function TM(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Wb(n){let e={};for(let t in n)e[t]=n[t];return e}function Jb(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:m}=u.edge(f);if(h==e||o.indexOf(m)<0&&l(m))return!0}};if(l(s.contentMatch))return!0}}class es{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Gh(t).createDocumentFragment());let s=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,f=0;for(;u<o.length&&f<l.marks.length;){let h=l.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)s=o.pop()[1];for(;f<l.marks.length;){let h=l.marks[f++],m=this.serializeMark(h,l.isInline,t);m&&(o.push([h,s]),s.appendChild(m.dom),s=m.contentDOM||m.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=Jc(Gh(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&Jc(Gh(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return Jc(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new es(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Qb(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Qb(e.marks)}}function Qb(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Gh(n){return n.document||window.document}const Xb=new WeakMap;function CM(n){let e=Xb.get(n);return e===void 0&&Xb.set(n,e=_M(n)),e}function _M(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function Jc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=CM(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,f=t?n.createElementNS(t,s):n.createElement(s),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let y in h)if(h[y]!=null){let v=y.indexOf(" ");v>0?f.setAttributeNS(y.slice(0,v),y.slice(v+1),h[y]):y=="style"&&f.style?f.style.cssText=h[y]:f.setAttribute(y,h[y])}}for(let y=m;y<e.length;y++){let v=e[y];if(v===0){if(y<e.length-1||y>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:b,contentDOM:x}=Jc(n,v,t,r);if(f.appendChild(b),x){if(u)throw new RangeError("Multiple content holes");u=x}}}return{dom:f,contentDOM:u}}const mS=65535,gS=Math.pow(2,16);function AM(n,e){return n+e*gS}function Zb(n){return n&mS}function MM(n){return(n-(n&mS))/gS}const yS=1,vS=2,Qc=4,bS=8;class Up{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&bS)>0}get deletedBefore(){return(this.delInfo&(yS|Qc))>0}get deletedAfter(){return(this.delInfo&(vS|Qc))>0}get deletedAcross(){return(this.delInfo&Qc)>0}}class nn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&nn.empty)return nn.empty}recover(e){let t=0,r=Zb(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+MM(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?s:0);if(f>e)break;let h=this.ranges[u+o],m=this.ranges[u+l],y=f+h;if(e<=y){let v=h?e==f?-1:e==y?1:t:t,b=f+s+(v<0?0:m);if(r)return b;let x=e==(t<0?f:y)?null:AM(u/3,e-f),E=e==f?vS:e==y?yS:Qc;return(t<0?e!=f:e!=y)&&(E|=bS),new Up(b,E,x)}s+=m-h}return r?e+s:new Up(e+s,0,null)}touches(e,t){let r=0,s=Zb(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+o],m=f+h;if(e<=m&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?o:0),f=l+(this.inverted?0:o),h=this.ranges[s+t],m=this.ranges[s+r];e(u,u+h,f,f+m),o+=m-h}}invert(){return new nn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nn.empty:new nn(e<0?[0,-e,0]:[0,0,e])}}nn.empty=new nn([]);class Wa{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Wa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Wa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Up(e,s,null)}}const Yh=Object.create(null);class Nt{getMap(){return nn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Yh[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Yh)throw new RangeError("Duplicate use of step JSON ID "+e);return Yh[e]=t,t.prototype.jsonID=e,t}}class nt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new nt(e,null)}static fail(e){return new nt(null,e)}static fromReplace(e,t,r,s){try{return nt.ok(e.replace(t,r,s))}catch(o){if(o instanceof su)return nt.fail(o.message);throw o}}}function Sm(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(Sm(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return K.fromArray(r)}class ti extends Nt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new X(Sm(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return nt.fromReplace(e,this.from,this.to,o)}invert(){return new An(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ti(t.pos,r.pos,this.mark)}merge(e){return e instanceof ti&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ti(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ti(t.from,t.to,e.markFromJSON(t.mark))}}Nt.jsonID("addMark",ti);class An extends Nt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new X(Sm(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return nt.fromReplace(e,this.from,this.to,r)}invert(){return new ti(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new An(t.pos,r.pos,this.mark)}merge(e){return e instanceof An&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new An(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new An(t.from,t.to,e.markFromJSON(t.mark))}}Nt.jsonID("removeMark",An);class ni extends Nt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return nt.fromReplace(e,this.pos,this.pos+1,new X(K.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new ni(this.pos,t.marks[s]);return new ni(this.pos,this.mark)}}return new Yi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ni(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ni(t.pos,e.markFromJSON(t.mark))}}Nt.jsonID("addNodeMark",ni);class Yi extends Nt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return nt.fromReplace(e,this.pos,this.pos+1,new X(K.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ni(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yi(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yi(t.pos,e.markFromJSON(t.mark))}}Nt.jsonID("removeNodeMark",Yi);class gt extends Nt{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&Pp(e,this.from,this.to)?nt.fail("Structure replace would overwrite content"):nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nn([this.from,this.to-this.from,this.slice.size])}invert(e){return new gt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new gt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof gt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?X.empty:new X(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new gt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?X.empty:new X(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new gt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new gt(t.from,t.to,X.fromJSON(e,t.slice),!!t.structure)}}Nt.jsonID("replace",gt);class yt extends Nt{constructor(e,t,r,s,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Pp(e,this.from,this.gapFrom)||Pp(e,this.gapTo,this.to)))return nt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return nt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?nt.fromReplace(e,this.from,this.to,r):nt.fail("Content does not fit in gap")}getMap(){return new nn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new yt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new yt(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new yt(t.from,t.to,t.gapFrom,t.gapTo,X.fromJSON(e,t.slice),t.insert,!!t.structure)}}Nt.jsonID("replaceAround",yt);function Pp(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function OM(n,e,t,r){let s=[],o=[],l,u;n.doc.nodesBetween(e,t,(f,h,m)=>{if(!f.isInline)return;let y=f.marks;if(!r.isInSet(y)&&m.type.allowsMarkType(r.type)){let v=Math.max(h,e),b=Math.min(h+f.nodeSize,t),x=r.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(x)||(l&&l.to==v&&l.mark.eq(y[E])?l.to=b:s.push(l=new An(v,b,y[E])));u&&u.to==v?u.to=b:o.push(u=new ti(v,b,r))}}),s.forEach(f=>n.step(f)),o.forEach(f=>n.step(f))}function NM(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof Xu){let h=l.marks,m;for(;m=r.isInSet(h);)(f||(f=[])).push(m),h=m.removeFromSet(h)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let h=Math.min(u+l.nodeSize,t);for(let m=0;m<f.length;m++){let y=f[m],v;for(let b=0;b<s.length;b++){let x=s[b];x.step==o-1&&y.eq(s[b].style)&&(v=x)}v?(v.to=h,v.step=o):s.push({style:y,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(l=>n.step(new An(l.from,l.to,l.style)))}function wm(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),m=u+h.nodeSize,y=r.matchType(h.type);if(!y)l.push(new gt(u,m,X.empty));else{r=y;for(let v=0;v<h.marks.length;v++)t.allowsMarkType(h.marks[v].type)||n.step(new An(u,m,h.marks[v]));if(s&&h.isText&&t.whitespace!="pre"){let v,b=/\r?\n|\r/g,x;for(;v=b.exec(h.text);)x||(x=new X(K.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new gt(u+v.index,u+v.index+v[0].length,x))}}u=m}if(!r.validEnd){let f=r.fillBefore(K.empty,!0);n.replace(u,u,new X(f,0,0))}for(let f=l.length-1;f>=0;f--)n.step(l[f])}function RM(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function So(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),o=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(o,l,t))return r;if(r==0||s.type.spec.isolating||!RM(s,o,l))break}return null}function DM(n,e,t){let{$from:r,$to:s,depth:o}=e,l=r.before(o+1),u=s.after(o+1),f=l,h=u,m=K.empty,y=0;for(let x=o,E=!1;x>t;x--)E||r.index(x)>0?(E=!0,m=K.from(r.node(x).copy(m)),y++):f--;let v=K.empty,b=0;for(let x=o,E=!1;x>t;x--)E||s.after(x+1)<s.end(x)?(E=!0,v=K.from(s.node(x).copy(v)),b++):h++;n.step(new yt(f,h,l,u,new X(m.append(v),y,b),m.size-y,!0))}function Em(n,e,t=null,r=n){let s=jM(n,e),o=s&&LM(r,e);return o?s.map(e1).concat({type:e,attrs:t}).concat(o.map(e1)):null}function e1(n){return{type:n,attrs:null}}function jM(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,s,l)?o:null}function LM(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;f&&h<s;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:l}function zM(n,e,t){let r=K.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=K.from(t[l].type.create(t[l].attrs,r))}let s=e.start,o=e.end;n.step(new yt(s,o,s,o,new X(r,0,0),t.length,!0))}function BM(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let f=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,f)&&UM(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!x?h=!1:!b&&x&&(h=!0)}h===!1&&SS(n,l,u,o),wm(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let m=n.mapping.slice(o),y=m.map(u,1),v=m.map(u+l.nodeSize,1);return n.step(new yt(y,v,y+1,v-1,new X(K.from(r.create(f,null,l.marks)),0,0),1,!0)),h===!0&&xS(n,l,u,o),!1}})}function xS(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let f=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function SS(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function UM(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function PM(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new yt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new X(K.from(l),0,0),1,!0))}function gr(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,l=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,m=t-2;h>o;h--,m--){let y=s.node(h),v=s.index(h);if(y.type.spec.isolating)return!1;let b=y.content.cutByIndex(v,y.childCount),x=r&&r[m+1];x&&(b=b.replaceChild(0,x.type.create(x.attrs)));let E=r&&r[m]||y;if(!y.canReplace(v+1,y.childCount)||!E.type.validContent(b))return!1}let u=s.indexAfter(o),f=r&&r[0];return s.node(o).canReplaceWith(u,u,f?f.type:s.node(o+1).type)}function HM(n,e,t=1,r){let s=n.doc.resolve(e),o=K.empty,l=K.empty;for(let u=s.depth,f=s.depth-t,h=t-1;u>f;u--,h--){o=K.from(s.node(u).copy(o));let m=r&&r[h];l=K.from(m?m.type.create(m.attrs,l):s.node(u).copy(l))}n.step(new gt(e,e,new X(o.append(l),t,t),!0))}function di(n,e){let t=n.resolve(e),r=t.index();return wS(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function IM(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function wS(n,e){return!!(n&&e&&!n.isLeaf&&IM(n,e))}function Zu(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,l,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),l=r.node(s+1)),o&&!o.isTextblock&&wS(o,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function $M(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(s&&l.inlineContent){let m=l.whitespace=="pre",y=!!l.contentMatch.matchType(s);m&&!y?r=!1:!m&&y&&(r=!0)}let u=n.steps.length;if(r===!1){let m=n.doc.resolve(e+t);SS(n,m.node(),m.before(),u)}l.inlineContent&&wm(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let f=n.mapping.slice(u),h=f.map(e-t);if(n.step(new gt(h,f.map(e+t,-1),X.empty,!0)),r===!0){let m=n.doc.resolve(h);xS(n,m.node(),m.before(),n.steps.length)}return n}function qM(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function ES(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),h=r.node(l),m=!1;if(o==1)m=h.canReplace(f,f,s);else{let y=h.contentMatchAt(f).findWrapping(s.firstChild.type);m=y&&h.canReplaceWith(f,f,y[0])}if(m)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function ed(n,e,t=e,r=X.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return kS(s,o,r)?new gt(e,t,r):new VM(s,o,r).fit()}function kS(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class VM{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=K.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=K.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,l=r.depth,u=s.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let f=new X(o,l,u);return e>-1?new yt(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new gt(r.pos,s.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=Wh(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],m,y=null;if(t==1&&(l?h.matchType(l.type)||(y=h.fillBefore(K.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:y};if(t==2&&l&&(m=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:m};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Wh(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new X(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Wh(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new X(Aa(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new X(Aa(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,h=0,m=[],{match:y,type:v}=this.frontier[t];if(s){for(let E=0;E<s.childCount;E++)m.push(s.child(E));y=y.matchFragment(s)}let b=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let E=u.child(h),T=y.matchType(E.type);if(!T)break;h++,(h>1||f==0||E.content.size)&&(y=T,m.push(TS(E.mark(v.allowedMarks(E.marks)),h==1?f:0,h==u.childCount?b:-1)))}let x=h==u.childCount;x||(b=-1),this.placed=Ma(this.placed,t,K.from(m)),this.frontier[t].match=y,x&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,T=u;E<b;E++){let C=T.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),T=C.content}this.unplaced=x?e==0?X.empty:new X(Aa(l.content,e-1,1),e-1,b<0?l.openEnd:e-1):new X(Aa(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Jh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Jh(e,t,s,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],m=Jh(e,u,h,f,!0);if(!m||m.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ma(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Ma(this.placed,this.depth,K.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(K.empty,!0);t.childCount&&(this.placed=Ma(this.placed,this.frontier.length,t))}}function Aa(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Aa(n.firstChild.content,e-1,t)))}function Ma(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ma(n.lastChild.content,e-1,t)))}function Wh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function TS(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,TS(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(K.empty,!0)))),n.copy(r)}function Jh(n,e,t,r,s){let o=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!KM(t,o.content,l)?u:null}function KM(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function FM(n){return n.spec.defining||n.spec.definingForContent}function GM(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(kS(s,o,r))return n.step(new gt(e,t,r));let l=_S(s,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let v=s.depth,b=s.pos-1;v>0;v--,b--){let x=s.node(v).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;l.indexOf(v)>-1?u=v:s.before(v)==b&&l.splice(1,0,-v)}let f=l.indexOf(u),h=[],m=r.openStart;for(let v=r.content,b=0;;b++){let x=v.firstChild;if(h.push(x),b==r.openStart)break;v=x.content}for(let v=m-1;v>=0;v--){let b=h[v],x=FM(b.type);if(x&&!b.sameMarkup(s.node(Math.abs(u)-1)))m=v;else if(x||!b.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let b=(v+m+1)%(r.openStart+1),x=h[b];if(x)for(let E=0;E<l.length;E++){let T=l[(E+f)%l.length],C=!0;T<0&&(C=!1,T=-T);let N=s.node(T-1),O=s.index(T-1);if(N.canReplaceWith(O,O,x.type,x.marks))return n.replace(s.before(T),C?o.after(T):t,new X(CS(r.content,0,r.openStart,b),b,r.openEnd))}}let y=n.steps.length;for(let v=l.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>y));v--){let b=l[v];b<0||(e=s.before(b),t=o.after(b))}}function CS(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(CS(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(K.empty,!0))}return n}function YM(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=qM(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new X(K.from(r),0,0))}function WM(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=_S(r,s);for(let l=0;l<o.length;l++){let u=o[l],f=l==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function _S(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class lo extends Nt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return nt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return nt.fromReplace(e,this.pos,this.pos+1,new X(K.from(s),0,t.isLeaf?0:1))}getMap(){return nn.empty}invert(e){return new lo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new lo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new lo(t.pos,t.attr,t.value)}}Nt.jsonID("attr",lo);class Ja extends Nt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return nt.ok(r)}getMap(){return nn.empty}invert(e){return new Ja(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ja(t.attr,t.value)}}Nt.jsonID("docAttr",Ja);let fo=class extends Error{};fo=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};fo.prototype=Object.create(Error.prototype);fo.prototype.constructor=fo;fo.prototype.name="TransformError";class AS{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Wa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new fo(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=X.empty){let s=ed(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new X(K.from(r),0,0))}delete(e,t){return this.replace(e,t,X.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return GM(this,e,t,r),this}replaceRangeWith(e,t,r){return YM(this,e,t,r),this}deleteRange(e,t){return WM(this,e,t),this}lift(e,t){return DM(this,e,t),this}join(e,t=1){return $M(this,e,t),this}wrap(e,t){return zM(this,e,t),this}setBlockType(e,t=e,r,s=null){return BM(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return PM(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new lo(e,t,r)),this}setDocAttribute(e,t){return this.step(new Ja(e,t)),this}addNodeMark(e,t){return this.step(new ni(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Be)t.isInSet(r.marks)&&this.step(new Yi(e,t));else{let s=r.marks,o,l=[];for(;o=t.isInSet(s);)l.push(new Yi(e,o)),s=o.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return HM(this,e,t,r),this}addMark(e,t,r){return OM(this,e,t,r),this}removeMark(e,t,r){return NM(this,e,t,r),this}clearIncompatible(e,t,r){return wm(this,e,t,r),this}}const Qh=Object.create(null);class ye{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new JM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=X.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:h}=l[u],m=e.mapping.slice(o);e.replaceRange(m.map(f.pos),m.map(h.pos),u?X.empty:t),u==0&&r1(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],f=e.mapping.slice(r),h=f.map(l.pos),m=f.map(u.pos);o?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),r1(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new fe(e):ro(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let l=t<0?ro(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):ro(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new rn(e.node(0))}static atStart(e){return ro(e,e,0,0,1)||new rn(e)}static atEnd(e){return ro(e,e,e.content.size,e.childCount,-1)||new rn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Qh[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Qh)throw new RangeError("Duplicate use of selection JSON ID "+e);return Qh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return fe.between(this.$anchor,this.$head).getBookmark()}}ye.prototype.visible=!0;class JM{constructor(e,t){this.$from=e,this.$to=t}}let t1=!1;function n1(n){!t1&&!n.parent.inlineContent&&(t1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class fe extends ye{constructor(e,t=e){n1(e),n1(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ye.near(r);let s=e.resolve(t.map(this.anchor));return new fe(s.parent.inlineContent?s:r,r)}replace(e,t=X.empty){if(super.replace(e,t),t==X.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new td(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new fe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=ye.findFrom(t,r,!0)||ye.findFrom(t,-r,!0);if(o)t=o.$head;else return ye.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(ye.findFrom(e,-r,!0)||ye.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new fe(e,t)}}ye.jsonID("text",fe);class td{constructor(e,t){this.anchor=e,this.head=t}map(e){return new td(e.map(this.anchor),e.map(this.head))}resolve(e){return fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class re extends ye{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?ye.near(o):new re(o)}content(){return new X(K.from(this.node),0,0)}eq(e){return e instanceof re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new km(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new re(e.resolve(t.anchor))}static create(e,t){return new re(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}re.prototype.visible=!1;ye.jsonID("node",re);class km{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new td(r,r):new km(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&re.isSelectable(r)?new re(t):ye.near(t)}}class rn extends ye{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=X.empty){if(t==X.empty){e.delete(0,e.doc.content.size);let r=ye.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new rn(e)}map(e){return new rn(e)}eq(e){return e instanceof rn}getBookmark(){return QM}}ye.jsonID("all",rn);const QM={map(){return this},resolve(n){return new rn(n)}};function ro(n,e,t,r,s,o=!1){if(e.inlineContent)return fe.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!o&&re.isSelectable(u))return re.create(n,t-(s<0?u.nodeSize:0))}else{let f=ro(n,u,t+s,s<0?u.childCount:0,s,o);if(f)return f}t+=u.nodeSize*s}return null}function r1(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof gt||s instanceof yt))return;let o=n.mapping.maps[r],l;o.forEach((u,f,h,m)=>{l==null&&(l=m)}),n.setSelection(ye.near(n.doc.resolve(l),t))}const i1=1,Uc=2,s1=4;class XM extends AS{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|i1)&~Uc,this.storedMarks=null,this}get selectionSet(){return(this.updated&i1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Uc,this}ensureMarks(e){return Be.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Uc)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Uc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Be.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),this.selection.empty||this.setSelection(ye.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=s1,this}get scrolledIntoView(){return(this.updated&s1)>0}}function o1(n,e){return!e||!n?n:n.bind(e)}class Oa{constructor(e,t,r){this.name=e,this.init=o1(t.init,r),this.apply=o1(t.apply,r)}}const ZM=[new Oa("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Oa("selection",{init(n,e){return n.selection||ye.atStart(e.doc)},apply(n){return n.selection}}),new Oa("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Oa("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Xh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ZM.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Oa(r.key,r.spec.state,r))})}}class ao{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=s?s[l].n:0,h=s?s[l].state:this,m=f<t.length&&u.spec.appendTransaction.call(u,f?t.slice(f):t,h,r);if(m&&r.filterTransaction(m,l)){if(m.setMeta("appendedTransaction",e),!s){s=[];for(let y=0;y<this.config.plugins.length;y++)s.push(y<l?{state:r,n:t.length}:{state:this,n:0})}t.push(m),r=r.applyInner(m),o=!0}s&&(s[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new ao(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new XM(this)}static create(e){let t=new Xh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ao(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new Xh(this.schema,e.plugins),r=t.fields,s=new ao(t);for(let o=0;o<r.length;o++){let l=r[o].name;s[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Xh(e.schema,e.plugins),o=new ao(s);return s.fields.forEach(l=>{if(l.name=="doc")o.doc=Mn.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=ye.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(f,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function MS(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=MS(s,e,{})),t[r]=s}return t}class Qe{constructor(e){this.spec=e,this.props={},e.props&&MS(e.props,this,this.props),this.key=e.key?e.key.key:OS("plugin")}getState(e){return e[this.key]}}const Zh=Object.create(null);function OS(n){return n in Zh?n+"$"+ ++Zh[n]:(Zh[n]=0,n+"$")}class bt{constructor(e="key"){this.key=OS(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const kt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ho=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Hp=null;const hr=function(n,e,t){let r=Hp||(Hp=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},eO=function(){Hp=null},Wi=function(n,e,t,r){return t&&(a1(n,e,t,r,-1)||a1(n,e,t,r,1))},tO=/^(img|br|input|textarea|hr)$/i;function a1(n,e,t,r,s){for(var o;;){if(n==t&&e==r)return!0;if(e==(s<0?0:bn(n))){let l=n.parentNode;if(!l||l.nodeType!=1||dl(n)||tO.test(n.nodeName)||n.contentEditable=="false")return!1;e=kt(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?bn(n):0}else return!1}}function bn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function nO(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=bn(n)}else if(n.parentNode&&!dl(n))e=kt(n),n=n.parentNode;else return null}}function rO(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!dl(n))e=kt(n)+1,n=n.parentNode;else return null}}function iO(n,e,t){for(let r=e==0,s=e==bn(n);r||s;){if(n==t)return!0;let o=kt(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==bn(n)}}function dl(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const nd=function(n){return n.focusNode&&Wi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function zi(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function sO(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function oO(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(bn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(bn(r.startContainer),r.startOffset)}}}const In=typeof navigator<"u"?navigator:null,l1=typeof document<"u"?document:null,fi=In&&In.userAgent||"",Ip=/Edge\/(\d+)/.exec(fi),NS=/MSIE \d/.exec(fi),$p=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fi),Kt=!!(NS||$p||Ip),si=NS?document.documentMode:$p?+$p[1]:Ip?+Ip[1]:0,On=!Kt&&/gecko\/(\d+)/i.test(fi);On&&+(/Firefox\/(\d+)/.exec(fi)||[0,0])[1];const qp=!Kt&&/Chrome\/(\d+)/.exec(fi),Ot=!!qp,RS=qp?+qp[1]:0,Lt=!Kt&&!!In&&/Apple Computer/.test(In.vendor),po=Lt&&(/Mobile\/\w+/.test(fi)||!!In&&In.maxTouchPoints>2),vn=po||(In?/Mac/.test(In.platform):!1),aO=In?/Win/.test(In.platform):!1,pr=/Android \d/.test(fi),fl=!!l1&&"webkitFontSmoothing"in l1.documentElement.style,lO=fl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function cO(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function or(n,e){return typeof n=="number"?n:n[e]}function uO(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function c1(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=ho(l);continue}let u=l,f=u==o.body,h=f?cO(o):uO(u),m=0,y=0;if(e.top<h.top+or(r,"top")?y=-(h.top-e.top+or(s,"top")):e.bottom>h.bottom-or(r,"bottom")&&(y=e.bottom-e.top>h.bottom-h.top?e.top+or(s,"top")-h.top:e.bottom-h.bottom+or(s,"bottom")),e.left<h.left+or(r,"left")?m=-(h.left-e.left+or(s,"left")):e.right>h.right-or(r,"right")&&(m=e.right-h.right+or(s,"right")),m||y)if(f)o.defaultView.scrollBy(m,y);else{let b=u.scrollLeft,x=u.scrollTop;y&&(u.scrollTop+=y),m&&(u.scrollLeft+=m);let E=u.scrollLeft-b,T=u.scrollTop-x;e={left:e.left-E,top:e.top-T,right:e.right-E,bottom:e.bottom-T}}let v=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:ho(l)}}function dO(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=t-20){r=u,s=f.top;break}}return{refDOM:r,refTop:s,stack:DS(n.dom)}}function DS(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ho(r));return e}function fO({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;jS(t,r==0?0:r-e)}function jS(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Zs=null;function hO(n){if(n.setActive)return n.setActive();if(Zs)return n.focus(Zs);let e=DS(n);n.focus(Zs==null?{get preventScroll(){return Zs={preventScroll:!0},!0}}:void 0),Zs||(Zs=!1,jS(e,0))}function LS(n,e){let t,r=2e8,s,o=0,l=e.top,u=e.top,f,h;for(let m=n.firstChild,y=0;m;m=m.nextSibling,y++){let v;if(m.nodeType==1)v=m.getClientRects();else if(m.nodeType==3)v=hr(m).getClientRects();else continue;for(let b=0;b<v.length;b++){let x=v[b];if(x.top<=l&&x.bottom>=u){l=Math.max(x.bottom,l),u=Math.min(x.top,u);let E=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(E<r){t=m,r=E,s=E&&t.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,m.nodeType==1&&E&&(o=y+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!f&&x.left<=e.left&&x.right>=e.left&&(f=m,h={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!t&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(o=y+1)}}return!t&&f&&(t=f,s=h,r=0),t&&t.nodeType==3?pO(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:LS(t,s)}function pO(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=Yr(r,1);if(o.top!=o.bottom&&Tm(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Tm(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function mO(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function gO(n,e,t){let{node:r,offset:s}=LS(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function yO(n,e,t,r){let s=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&f.left>r.left||f.top>r.top?s=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function zS(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(Tm(e,h))return zS(l,e,h)}}if((o=(o+1)%r)==s)break}return n}function vO(n,e){let t=n.dom.ownerDocument,r,s=0,o=oO(t,e.left,e.top);o&&({node:r,offset:s}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Tm(e,h)||(l=zS(n.dom,e,h),!l))return null}if(Lt)for(let h=l;r&&h;h=ho(h))h.draggable&&(r=void 0);if(l=mO(l,e),r){if(On&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let m=r.childNodes[s],y;m.nodeName=="IMG"&&(y=m.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&s++}let h;fl&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=yO(n,r,s,e))}u==null&&(u=gO(n,l,e));let f=n.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function u1(n){return n.top<n.bottom||n.left<n.right}function Yr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(u1(r))return r}return Array.prototype.find.call(t,u1)||n.getBoundingClientRect()}const bO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function BS(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=fl||On;if(r.nodeType==3)if(l&&(bO.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let f=Yr(hr(r,s,s),t);if(On&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Yr(hr(r,s-1,s-1),-1);if(h.top==f.top){let m=Yr(hr(r,s,s+1),-1);if(m.top!=f.top)return Ta(m,m.left<h.left)}}return f}else{let f=s,h=s,m=t<0?1:-1;return t<0&&!s?(h++,m=-1):t>=0&&s==r.nodeValue.length?(f--,m=1):t<0?f--:h++,Ta(Yr(hr(r,f,h),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==bn(r))){let f=r.childNodes[s-1];if(f.nodeType==1)return ep(f.getBoundingClientRect(),!1)}if(o==null&&s<bn(r)){let f=r.childNodes[s];if(f.nodeType==1)return ep(f.getBoundingClientRect(),!0)}return ep(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==bn(r))){let f=r.childNodes[s-1],h=f.nodeType==3?hr(f,bn(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return Ta(Yr(h,1),!1)}if(o==null&&s<bn(r)){let f=r.childNodes[s];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?hr(f,0,l?0:1):f.nodeType==1?f:null:null;if(h)return Ta(Yr(h,-1),!0)}return Ta(Yr(r.nodeType==3?hr(r):r,-t),t>=0)}function Ta(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ep(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function US(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function xO(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return US(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=BS(n,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=hr(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let m=f[h];if(m.bottom>m.top+1&&(t=="up"?l.top-m.top>(m.bottom-l.top)*2:m.bottom-l.bottom>(l.bottom-m.top)*2))return!1}}return!0})}const SO=/[\u0590-\u08ac]/;function wO(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!SO.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:US(n,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:m,anchorOffset:y}=n.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",t,"character");let b=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:x,focusOffset:E}=n.domSelectionRange(),T=x&&!b.contains(x.nodeType==1?x:x.parentNode)||f==x&&h==E;try{u.collapse(m,y),f&&(f!=m||h!=y)&&u.extend&&u.extend(f,h)}catch{}return v!=null&&(u.caretBidiLevel=v),T}):r.pos==r.start()||r.pos==r.end()}let d1=null,f1=null,h1=!1;function EO(n,e,t){return d1==e&&f1==t?h1:(d1=e,f1=t,h1=t=="up"||t=="down"?xO(n,e,t):wO(n,e,t))}const xn=0,p1=1,Ui=2,$n=3;class hl{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=xn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>kt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof HS){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof PS&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?kt(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?kt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let l=r,u=0;;u++){let f=this.children[u],h=l+f.size;if(s==-1&&e<=h){let m=l+f.border;if(e>=m&&t<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,m);e=l;for(let y=u;y>0;y--){let v=this.children[y-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){s=kt(v.dom)+1;break}e-=v.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let m=u+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=kt(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let b=0,x=0;b<this.children.length;b++){let E=this.children[b],T=x+E.size;if(o>x&&l<T)return E.setSelection(e-x-E.border,t-x-E.border,r,s);x=T}let u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),m=r.domSelectionRange(),y=!1;if((On||Lt)&&e==t){let{node:b,offset:x}=u;if(b.nodeType==3){if(y=!!(x&&b.nodeValue[x-1]==`
`),y&&x==b.nodeValue.length)for(let E=b,T;E;E=E.parentNode){if(T=E.nextSibling){T.nodeName=="BR"&&(u=f={node:T.parentNode,offset:kt(T)+1});break}let C=E.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let E=b.childNodes[x-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(On&&m.focusNode&&m.focusNode!=f.node&&m.focusNode.nodeType==1){let b=m.focusNode.childNodes[m.focusOffset];b&&b.contentEditable=="false"&&(s=!0)}if(!(s||y&&Lt)&&Wi(u.node,u.offset,m.anchorNode,m.anchorOffset)&&Wi(f.node,f.offset,m.focusNode,m.focusOffset))return;let v=!1;if((h.extend||e==t)&&!y){h.collapse(u.node,u.offset);try{e!=t&&h.extend(f.node,f.offset),v=!0}catch{}}if(!v){if(e>t){let x=u;u=f,f=x}let b=document.createRange();b.setEnd(f.node,f.offset),b.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,f=l-o.border;if(e>=u&&t<=f){this.dirty=e==r||t==l?Ui:p1,e==u&&t==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=$n:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ui:$n}r=l}this.dirty=Ui}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ui:p1;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class PS extends hl{constructor(e,t,r,s){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==xn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class kO extends hl{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ji extends hl{constructor(e,t,r,s,o){super(e,[],r,s),this.mark=t,this.spec=o}static create(e,t,r,s){let o=s.nodeViews[t.type.name],l=o&&o(t,s,r);return(!l||!l.dom)&&(l=es.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ji(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&$n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=$n&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=xn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=xn}}slice(e,t,r){let s=Ji.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=Kp(o,t,l,r)),e>0&&(o=Kp(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class oi extends hl{constructor(e,t,r,s,o,l,u,f,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,o,l){let u=o.nodeViews[t.type.name],f,h=u&&u(t,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,s),m=h&&h.dom,y=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:y}=es.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let v=m;return m=qS(m,r,t),h?f=new TO(e,t,r,s,m,y||null,v,h,o,l+1):t.isText?new rd(e,t,r,s,m,v,o):new oi(e,t,r,s,m,y||null,v,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>K.empty)}return e}matchesNode(e,t,r){return this.dirty==xn&&e.eq(this.node)&&cu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new _O(this,l&&l.node,e);OO(this.node,this.innerDeco,(h,m,y)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!y&&f.syncToMarks(m==this.node.childCount?Be.none:this.node.child(m).marks,r,e),f.placeWidget(h,e,s)},(h,m,y,v)=>{f.syncToMarks(h.marks,r,e);let b;f.findNodeMatch(h,m,y,v)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(b=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,m,y,b,e)||f.updateNextNode(h,m,y,e,v,s)||f.addNode(h,m,y,e,s),s+=h.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==Ui)&&(l&&this.protectLocalComposition(e,l),IS(this.contentDOM,this.children,e),po&&NO(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof fe)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=RO(this.node.content,l,r-t,s-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new kO(this,o,t,s);e.input.compositionNodes.push(l),this.children=Kp(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==$n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=xn}updateOuterDeco(e){if(cu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=$S(this.dom,this.nodeDOM,Vp(this.outerDeco,this.node,t),Vp(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function m1(n,e,t,r,s){qS(r,e,n);let o=new oi(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class rd extends oi{constructor(e,t,r,s,o,l,u){super(e,t,r,s,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==$n||this.dirty!=xn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=xn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=xn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new rd(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=$n)}get domAtom(){return!1}isText(e){return this.node.text==e}}class HS extends hl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==xn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TO extends oi{constructor(e,t,r,s,o,l,u,f,h,m){super(e,t,r,s,o,l,u,h,m),this.spec=f}update(e,t,r,s){if(this.dirty==$n)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function IS(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=g1(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof Ji){let f=r?r.previousSibling:n.lastChild;IS(l.contentDOM,l.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=g1(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Ba=function(n){n&&(this.nodeName=n)};Ba.prototype=Object.create(null);const Pi=[new Ba];function Vp(n,e,t){if(n.length==0)return Pi;let r=t?Pi[0]:new Ba,s=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&s.push(r=new Ba(l.nodeName));for(let u in l){let f=l[u];f!=null&&(t&&s.length==1&&s.push(r=new Ba(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return s}function $S(n,e,t,r){if(t==Pi&&r==Pi)return e;let s=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let f;u&&u.nodeName==l.nodeName&&s!=n&&(f=s.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(s),u=Pi[0]),s=f}CO(s,u||Pi[0],l)}return s}function CO(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function qS(n,e,t){return $S(n,n,Pi,Vp(e,t,n.nodeType!=1))}function cu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function g1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class _O{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=AO(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=xn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=f;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let f=Ji.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let l=this.top.children[s];return l.dirty==$n&&l.dom==l.contentDOM&&(l.dirty=Ui),l.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof oi){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let m=f.dom,y,v=this.isLocked(m)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=$n&&cu(t,f.outerDeco));if(!v&&f.update(e,t,r,s))return this.destroyBetween(this.index,u),f.dom!=m&&(this.changed=!0),this.index++,!0;if(!v&&(y=this.recreateWrapper(f,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Ui,y.updateChildren(s,l+1),y.dirty=xn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!cu(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=oi.create(this.top,t,r,s,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,t,r,s,o){let l=oi.create(this.top,e,t,r,s,o);l.contentDOM&&l.updateChildren(s,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new PS(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ji;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof rd)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Lt||Ot)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new HS(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function AO(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Ji)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=u.node;if(f){if(f!=n.child(s-1))break;--s,o.set(u,s),l.push(u)}}return{index:s,matched:o,matches:l.reverse()}}function MO(n,e){return n.type.side-e.type.side}function OO(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);r(m,s,e.forChild(o,m),h),o+=m.nodeSize}return}let l=0,u=[],f=null;for(let h=0;;){let m,y;for(;l<s.length&&s[l].to==o;){let T=s[l++];T.widget&&(m?(y||(y=[m])).push(T):m=T)}if(m)if(y){y.sort(MO);for(let T=0;T<y.length;T++)t(y[T],h,!!f)}else t(m,h,!!f);let v,b;if(f)b=-1,v=f,f=null;else if(h<n.childCount)b=h,v=n.child(h++);else break;for(let T=0;T<u.length;T++)u[T].to<=o&&u.splice(T--,1);for(;l<s.length&&s[l].from<=o&&s[l].to>o;)u.push(s[l++]);let x=o+v.nodeSize;if(v.isText){let T=x;l<s.length&&s[l].from<T&&(T=s[l].from);for(let C=0;C<u.length;C++)u[C].to<T&&(T=u[C].to);T<x&&(f=v.cut(T-o),v=v.cut(0,T-o),x=T,b=-1)}else for(;l<s.length&&s[l].to<x;)l++;let E=v.isInline&&!v.isLeaf?u.filter(T=>!T.inline):u.slice();r(v,E,e.forChild(o,v),b),o=x}}function NO(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function RO(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let l=n.child(s++),u=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;s<n.childCount;){let h=n.child(s++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=t){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function Kp(n,e,t,r,s){let o=[];for(let l=0,u=0;l<n.length;l++){let f=n[l],h=u,m=u+=f.size;h>=t||m<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,r)),s&&(o.push(s),s=void 0),m>t&&o.push(f.slice(t-h,f.size,r)))}return o}function Cm(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,h;if(nd(t)){for(f=l;s&&!s.node;)s=s.parent;let y=s.node;if(s&&y.isAtom&&re.isSelectable(y)&&s.parent&&!(y.isInline&&iO(t.focusNode,t.focusOffset,s.dom))){let v=s.posBefore;h=new re(l==v?u:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=l,v=l;for(let b=0;b<t.rangeCount;b++){let x=t.getRangeAt(b);y=Math.min(y,n.docView.posFromDOM(x.startContainer,x.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(y<0)return null;[f,l]=v==n.state.selection.anchor?[v,y]:[y,v],u=r.resolve(l)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let m=r.resolve(f);if(!h){let y=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=_m(n,m,u,y)}return h}function VS(n){return n.editable?n.hasFocus():FS(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function yr(n,e=!1){let t=n.state.selection;if(KS(n,t),!!VS(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ot){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Wi(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)jO(n);else{let{anchor:r,head:s}=t,o,l;y1&&!(t instanceof fe)&&(t.$from.parent.inlineContent||(o=v1(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=v1(n,t.to))),n.docView.setSelection(r,s,n,e),y1&&(o&&b1(o),l&&b1(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&DO(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const y1=Lt||Ot&&RS<63;function v1(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Lt&&s&&s.contentEditable=="false")return tp(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return tp(s);if(o)return tp(o)}}function tp(n){return n.contentEditable="true",Lt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function b1(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function DO(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!VS(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function jO(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setStart(r.parentNode,kt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&Kt&&si<=11&&(r.disabled=!0,r.disabled=!1)}function KS(n,e){if(e instanceof re){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(x1(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else x1(n)}function x1(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function _m(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||fe.between(e,t,r)}function S1(n){return n.editable&&!n.hasFocus()?!1:FS(n)}function FS(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function LO(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Wi(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Fp(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&ye.findFrom(o,e)}function Wr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function w1(n,e,t){let r=n.state.selection;if(r instanceof fe)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return Wr(n,new fe(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Fp(n.state,e);return s&&s instanceof re?Wr(n,s):!1}else if(!(vn&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?re.isSelectable(o)?Wr(n,new re(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):fl?Wr(n,new fe(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof re&&r.node.isInline)return Wr(n,new fe(e>0?r.$to:r.$from));{let s=Fp(n.state,e);return s?Wr(n,s):!1}}}function uu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ua(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function eo(n,e){return e<0?zO(n):BO(n)}function zO(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,l=!1;for(On&&t.nodeType==1&&r<uu(t)&&Ua(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ua(u,-1))s=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(GS(t))break;{let u=t.previousSibling;for(;u&&Ua(u,-1);)s=t.parentNode,o=kt(u),u=u.previousSibling;if(u)t=u,r=uu(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?Gp(n,t,r):s&&Gp(n,s,o)}function BO(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=uu(t),o,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ua(u,1))o=t,l=++r;else break}else{if(GS(t))break;{let u=t.nextSibling;for(;u&&Ua(u,1);)o=u.parentNode,l=kt(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=uu(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&Gp(n,o,l)}function GS(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function UO(n,e){for(;n&&e==n.childNodes.length&&!dl(n);)e=kt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function PO(n,e){for(;n&&!e&&!dl(n);)e=kt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Gp(n,e,t){if(e.nodeType!=3){let o,l;(l=UO(e,t))?(e=l,t=0):(o=PO(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(nd(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&yr(n)},50)}function E1(n,e){let t=n.state.doc.resolve(e);if(!(Ot||aO)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function k1(n,e,t){let r=n.state.selection;if(r instanceof fe&&!r.empty||t.indexOf("s")>-1||vn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=Fp(n.state,e);if(l&&l instanceof re)return Wr(n,l)}if(!s.parent.inlineContent){let l=e<0?s:o,u=r instanceof rn?ye.near(l,e):ye.findFrom(l,e);return u?Wr(n,u):!1}return!1}function T1(n,e){if(!(n.state.selection instanceof fe))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function C1(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function HO(n){if(!Lt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;C1(n,r,"true"),setTimeout(()=>C1(n,r,"false"),20)}return!1}function IO(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function $O(n,e){let t=e.keyCode,r=IO(e);if(t==8||vn&&t==72&&r=="c")return T1(n,-1)||eo(n,-1);if(t==46&&!e.shiftKey||vn&&t==68&&r=="c")return T1(n,1)||eo(n,1);if(t==13||t==27)return!0;if(t==37||vn&&t==66&&r=="c"){let s=t==37?E1(n,n.state.selection.from)=="ltr"?-1:1:-1;return w1(n,s,r)||eo(n,s)}else if(t==39||vn&&t==70&&r=="c"){let s=t==39?E1(n,n.state.selection.from)=="ltr"?1:-1:1;return w1(n,s,r)||eo(n,s)}else{if(t==38||vn&&t==80&&r=="c")return k1(n,-1,r)||eo(n,-1);if(t==40||vn&&t==78&&r=="c")return HO(n)||k1(n,1,r)||eo(n,1);if(r==(vn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Am(n,e){n.someProp("transformCopied",b=>{e=b(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let b=r.firstChild;t.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let l=n.someProp("clipboardSerializer")||es.fromSchema(n.state.schema),u=ZS(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let h=f.firstChild,m,y=0;for(;h&&h.nodeType==1&&(m=XS[h.nodeName.toLowerCase()]);){for(let b=m.length-1;b>=0;b--){let x=u.createElement(m[b]);for(;f.firstChild;)x.appendChild(f.firstChild);f.appendChild(x),y++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",b=>b(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:v,slice:e}}function YS(n,e,t,r,s){let o=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let f=e&&(r||o||!t);if(f){if(n.someProp("transformPastedText",v=>{e=v(e,o||r,n)}),o)return e?new X(K.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):X.empty;let y=n.someProp("clipboardTextParser",v=>v(e,s,r,n));if(y)u=y;else{let v=s.marks(),{schema:b}=n.state,x=es.fromSchema(b);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let T=l.appendChild(document.createElement("p"));E&&T.appendChild(x.serializeNode(b.text(E,v)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),l=FO(t),fl&&GO(l);let h=l&&l.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||ii.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||m),context:s,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!qO.test(v.parentNode.nodeName)?{ignore:!0}:null}})),m)u=YO(_1(u,+m[1],+m[2]),m[4]);else if(u=X.maxOpen(VO(u.content,s),!0),u.openStart||u.openEnd){let y=0,v=0;for(let b=u.content.firstChild;y<u.openStart&&!b.type.spec.isolating;y++,b=b.firstChild);for(let b=u.content.lastChild;v<u.openEnd&&!b.type.spec.isolating;v++,b=b.lastChild);u=_1(u,y,v)}return n.someProp("transformPasted",y=>{u=y(u,n)}),u}const qO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function VO(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let f=s.findWrapping(u.type),h;if(!f)return l=null;if(h=l.length&&o.length&&JS(f,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=QS(l[l.length-1],o.length));let m=WS(u,f);l.push(m),s=s.matchType(m.type),o=f}}),l)return K.from(l)}return n}function WS(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,K.from(n));return n}function JS(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=JS(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(K.from(WS(t,n,s+1))))}}function QS(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,QS(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(K.empty,!0);return n.copy(t.append(r))}function Yp(n,e,t,r,s,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),s<r-1&&(u=Yp(u,e,t,r,s+1,o)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(K.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function _1(n,e,t){return e<n.openStart&&(n=new X(Yp(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new X(Yp(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const XS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let A1=null;function ZS(){return A1||(A1=document.implementation.createHTMLDocument("title"))}let np=null;function KO(n){let e=window.trustedTypes;return e?(np||(np=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),np.createHTML(n)):n}function FO(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ZS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&XS[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=KO(n),s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function GO(n){let e=n.querySelectorAll(Ot?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function YO(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let f=t.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;s=K.from(f.create(r[u+1],s)),o++,l++}return new X(s,o,l)}const zt={},Bt={},WO={touchstart:!0,touchmove:!0};class JO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function QO(n){for(let e in zt){let t=zt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{ZO(n,r)&&!Mm(n,r)&&(n.editable||!(r.type in Bt))&&t(n,r)},WO[e]?{passive:!0}:void 0)}Lt&&n.dom.addEventListener("input",()=>null),Wp(n)}function ri(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function XO(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Wp(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Mm(n,r))})}function Mm(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function ZO(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function eN(n,e){!Mm(n,e)&&zt[e.type]&&(n.editable||!(e.type in Bt))&&zt[e.type](n,e)}Bt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!tw(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(pr&&Ot&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),po&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,zi(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||$O(n,t)?t.preventDefault():ri(n,"key")};Bt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Bt.keypress=(n,e)=>{let t=e;if(tw(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||vn&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof fe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,o))&&n.dispatch(o()),t.preventDefault()}};function id(n){return{left:n.clientX,top:n.clientY}}function tN(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Om(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),s,!0):u(n,t,o.node(l),o.before(l),s,!1)))return!0;return!1}function co(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function nN(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&re.isSelectable(r)?(co(n,new re(t)),!0):!1}function rN(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof re&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(re.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(l);break}}return s!=null?(co(n,re.create(n.state.doc,s)),!0):!1}function iN(n,e,t,r,s){return Om(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?rN(n,t):nN(n,t))}function sN(n,e,t,r){return Om(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function oN(n,e,t,r){return Om(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||aN(n,t,r)}function aN(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(co(n,fe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(l.inlineContent)co(n,fe.create(r,u+1,u+1+l.content.size));else if(re.isSelectable(l))co(n,re.create(r,u));else continue;return!0}}function Nm(n){return du(n)}const ew=vn?"metaKey":"ctrlKey";zt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Nm(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&tN(t,n.input.lastClick)&&!t[ew]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(id(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new lN(n,l,t,!!r)):(o=="doubleClick"?sN:oN)(n,l.pos,l.inside,t)?t.preventDefault():ri(n,"pointer"))};class lN{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ew],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,l=m.depth?m.before():0}const u=s?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof re&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&On&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ri(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(id(e))),this.updateAllowDefault(e),this.allowDefault||!t?ri(this.view,"pointer"):iN(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Lt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ot&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(co(this.view,ye.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ri(this.view,"pointer")}move(e){this.updateAllowDefault(e),ri(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zt.touchstart=n=>{n.input.lastTouch=Date.now(),Nm(n),ri(n,"pointer")};zt.touchmove=n=>{n.input.lastTouch=Date.now(),ri(n,"pointer")};zt.contextmenu=n=>Nm(n);function tw(n,e){return n.composing?!0:Lt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const cN=pr?5e3:-1;Bt.compositionstart=Bt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof fe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),du(n,!0),n.markCursor=null;else if(du(n,!e.selection.empty),On&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let l=o<0?s.lastChild:s.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,o=-1}}n.input.composing=!0}nw(n,cN)};Bt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,nw(n,20))};function nw(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>du(n),e))}function rw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=dN());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function uN(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=nO(e.focusNode,e.focusOffset),r=rO(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function dN(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function du(n,e=!1){if(!(pr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),rw(n),e||n.docView&&n.docView.dirty){let t=Cm(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function fN(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Qa=Kt&&si<15||po&&lO<604;zt.copy=Bt.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=Qa?null:t.clipboardData,l=r.content(),{dom:u,text:f}=Am(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):fN(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hN(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function pN(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Xa(n,r.value,null,s,e):Xa(n,r.textContent,r.innerHTML,s,e)},50)}function Xa(n,e,t,r,s){let o=YS(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,s,o||X.empty)))return!0;if(!o)return!1;let l=hN(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function iw(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Bt.paste=(n,e)=>{let t=e;if(n.composing&&!pr)return;let r=Qa?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Xa(n,iw(r),r.getData("text/html"),s,t)?t.preventDefault():pN(n,t)};class sw{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const mN=vn?"altKey":"ctrlKey";function ow(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[mN]}zt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(id(t)),l;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof re?s.to-1:s.to))){if(r&&r.mightDrag)l=re.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(l=re.create(n.state.doc,y.posBefore))}}let u=(l||n.state.selection).content(),{dom:f,text:h,slice:m}=Am(n,u);(!t.dataTransfer.files.length||!Ot||RS>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Qa?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",Qa||t.dataTransfer.setData("text/plain",h),n.dragging=new sw(m,ow(n,t),l)};zt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Bt.dragover=Bt.dragenter=(n,e)=>e.preventDefault();Bt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(id(t));if(!s)return;let o=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",x=>{l=x(l,n)}):l=YS(n,iw(t.dataTransfer),Qa?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&ow(n,t));if(n.someProp("handleDrop",x=>x(n,t,l||X.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let f=l?ES(n.state.doc,o.pos,l):o.pos;f==null&&(f=o.pos);let h=n.state.tr;if(u){let{node:x}=r;x?x.replace(h):h.deleteSelection()}let m=h.mapping.map(f),y=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,v=h.doc;if(y?h.replaceRangeWith(m,m,l.content.firstChild):h.replaceRange(m,m,l),h.doc.eq(v))return;let b=h.doc.resolve(m);if(y&&re.isSelectable(l.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new re(b));else{let x=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((E,T,C,N)=>x=N),h.setSelection(_m(n,b,h.doc.resolve(x)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};zt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&yr(n)},20))};zt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};zt.beforeinput=(n,e)=>{if(Ot&&pr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,zi(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Bt)zt[n]=Bt[n];function Za(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class fu{constructor(e,t){this.toDOM=e,this.spec=t||Vi,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new jt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof fu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Za(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ai{constructor(e,t){this.attrs=e,this.spec=t||Vi}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new jt(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ai&&Za(this.attrs,e.attrs)&&Za(this.spec,e.spec)}static is(e){return e.type instanceof ai}destroy(){}}class Rm{constructor(e,t){this.attrs=e,this.spec=t||Vi}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=o.pos?null:new jt(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof Rm&&Za(this.attrs,e.attrs)&&Za(this.spec,e.spec)}destroy(){}}class jt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new jt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new jt(e,e,new fu(t,r))}static inline(e,t,r,s){return new jt(e,t,new ai(r,s))}static node(e,t,r,s){return new jt(e,t,new Rm(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ai}get widget(){return this.type instanceof fu}}const io=[],Vi={};class Ve{constructor(e,t){this.local=e.length?e:io,this.children=t.length?t:io}static create(e,t){return t.length?hu(t,e,0,Vi):Mt}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,o)}}map(e,t,r){return this==Mt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Vi)}mapInner(e,t,r,s,o){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,s);f&&f.type.valid(t,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?gN(this.children,l||[],e,t,r,s,o):l?new Ve(l.sort(Ki),io):Mt}add(e,t){return t.length?this==Mt?Ve.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((u,f)=>{let h=f+r,m;if(m=lw(t,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<f;)o+=3;s[o]==f?s[o+2]=s[o+2].addInner(u,m,h+1):s.splice(o,0,f,f+u.nodeSize,hu(m,u,h+1,Vi)),o+=3}});let l=aw(o?cw(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Ve(l.length?this.local.concat(l).sort(Ki):this.local,s||this.children)}remove(e){return e.length==0||this==Mt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,f=r[o+1]+t;for(let m=0,y;m<e.length;m++)(y=e[m])&&y.from>u&&y.to<f&&(e[m]=null,(l||(l=[])).push(y));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Mt?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Ve(s,r):Mt}forChild(e,t){if(this==Mt)return this;if(t.isLeaf)return Ve.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>o&&f.type instanceof ai){let h=Math.max(o,f.from)-o,m=Math.min(l,f.to)-o;h<m&&(s||(s=[])).push(f.copy(h,m))}}if(s){let u=new Ve(s.sort(Ki),io);return r?new Zr([u,r]):u}return r||Mt}eq(e){if(this==e)return!0;if(!(e instanceof Ve)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Dm(this.localsInner(e))}localsInner(e){if(this==Mt)return io;if(e.inlineContent||!this.local.some(ai.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ai||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ve.empty=new Ve([],[]);Ve.removeOverlap=Dm;const Mt=Ve.empty;class Zr{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Vi));return Zr.from(r)}forChild(e,t){if(t.isLeaf)return Ve.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Mt&&(o instanceof Zr?r=r.concat(o.members):r.push(o))}return Zr.from(r)}eq(e){if(!(e instanceof Zr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?Dm(r?t:t.sort(Ki)):io}static from(e){switch(e.length){case 0:return Mt;case 1:return e[0];default:return new Zr(e.every(t=>t instanceof Ve)?e:e.reduce((t,r)=>t.concat(r instanceof Ve?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function gN(n,e,t,r,s,o,l){let u=n.slice();for(let h=0,m=o;h<t.maps.length;h++){let y=0;t.maps[h].forEach((v,b,x,E)=>{let T=E-x-(b-v);for(let C=0;C<u.length;C+=3){let N=u[C+1];if(N<0||v>N+m-y)continue;let O=u[C]+m-y;b>=O?u[C+1]=v<=O?-2:-1:v>=m&&T&&(u[C]+=T,u[C+1]+=T)}y+=T}),m=t.maps[h].map(m,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let m=t.map(n[h]+o),y=m-s;if(y<0||y>=r.content.size){f=!0;continue}let v=t.map(n[h+1]+o,-1),b=v-s,{index:x,offset:E}=r.content.findIndex(y),T=r.maybeChild(x);if(T&&E==y&&E+T.nodeSize==b){let C=u[h+2].mapInner(t,T,m+1,n[h]+o+1,l);C!=Mt?(u[h]=y,u[h+1]=b,u[h+2]=C):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=yN(u,n,e,t,s,o,l),m=hu(h,r,0,l);e=m.local;for(let y=0;y<u.length;y+=3)u[y+1]<0&&(u.splice(y,3),y-=3);for(let y=0,v=0;y<m.children.length;y+=3){let b=m.children[y];for(;v<u.length&&u[v]<b;)v+=3;u.splice(v,0,m.children[y],m.children[y+1],m.children[y+2])}}return new Ve(e.sort(Ki),u)}function aw(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new jt(s.from+e,s.to+e,s.type))}return t}function yN(n,e,t,r,s,o,l){function u(f,h){for(let m=0;m<f.local.length;m++){let y=f.local[m].map(r,s,h);y?t.push(y):l.onRemove&&l.onRemove(f.local[m].spec)}for(let m=0;m<f.children.length;m+=3)u(f.children[m+2],f.children[m]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&u(n[f+2],e[f]+o+1);return t}function lw(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[o]=null);return s}function cw(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function hu(n,e,t,r){let s=[],o=!1;e.forEach((u,f)=>{let h=lw(n,u,f+t);if(h){o=!0;let m=hu(h,u,t+f+1,r);m!=Mt&&s.push(f,f+u.nodeSize,m)}});let l=aw(o?cw(n):n,-t).sort(Ki);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new Ve(l,s):Mt}function Ki(n,e){return n.from-e.from||n.to-e.to}function Dm(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),M1(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),M1(e,s,r.copy(o.from,r.to)));break}}}return e}function M1(n,e,t){for(;e<n.length&&Ki(t,n[e])>0;)e++;n.splice(e,0,t)}function rp(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Mt&&e.push(r)}),n.cursorWrapper&&e.push(Ve.create(n.state.doc,[n.cursorWrapper.deco])),Zr.from(e)}const vN={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bN=Kt&&si<=11;class xN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class SN{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xN,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Kt&&si<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),bN&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,vN)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(S1(this.view)){if(this.suppressingSelectionUpdates)return yr(this.view);if(Kt&&si<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Wi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=ho(o))t.add(o);for(let o=e.anchorNode;o;o=ho(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&S1(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,f=[];if(e.editable)for(let m=0;m<t.length;m++){let y=this.registerMutation(t[m],f);y&&(o=o<0?y.from:Math.min(y.from,o),l=l<0?y.to:Math.max(y.to,l),y.typeOver&&(u=!0))}if(On&&f.length){let m=f.filter(y=>y.nodeName=="BR");if(m.length==2){let[y,v]=m;y.parentNode&&y.parentNode.parentNode==v.parentNode?v.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let v of m){let b=v.parentNode;b&&b.nodeName=="LI"&&(!y||kN(e,y)!=b)&&v.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nd(r)&&(h=Cm(e))&&h.eq(ye.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,yr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,l),wN(e)),this.handleDOMChange(o,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||yr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let y=e.addedNodes[m];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(Kt&&si<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:y,nextSibling:v}=e.addedNodes[m];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(s=y),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(o=v)}let l=s&&s.parentNode==e.target?kt(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?kt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let O1=new WeakMap,N1=!1;function wN(n){if(!O1.has(n)&&(O1.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=On,N1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),N1=!0}}function R1(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Wi(l.node,l.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function EN(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return R1(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?R1(n,t):null}function kN(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function TN(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),f=n.domSelectionRange(),h,m=f.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:f.anchorOffset}],nd(f)||h.push({node:f.focusNode,offset:f.focusOffset})),Ot&&n.input.lastKeyCode===8)for(let T=o;T>s;T--){let C=r.childNodes[T-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){o=T;break}if(!N||N.size)break}let y=n.state.doc,v=n.someProp("domParser")||ii.fromSchema(n.state.schema),b=y.resolve(l),x=null,E=v.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:s,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:CN,context:b});if(h&&h[0].pos!=null){let T=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=T),x={anchor:T+l,head:C+l}}return{doc:E,sel:x,from:l,to:u}}function CN(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Lt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Lt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const _N=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function AN(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let J=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,le=Cm(n,J);if(le&&!n.state.selection.eq(le)){if(Ot&&pr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ot=>ot(n,zi(13,"Enter"))))return;let ke=n.state.tr.setSelection(le);J=="pointer"?ke.setMeta("pointer",!0):J=="key"&&ke.scrollIntoView(),o&&ke.setMeta("composition",o),n.dispatch(ke)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let f=n.state.selection,h=TN(n,e,t),m=n.state.doc,y=m.slice(h.from,h.to),v,b;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,b="end"):(v=n.state.selection.from,b="start"),n.input.lastKeyCode=null;let x=NN(y.content,h.doc.content,h.from,v,b);if(x&&n.input.domChangeCount++,(po&&n.input.lastIOSEnter>Date.now()-225||pr)&&s.some(J=>J.nodeType==1&&!_N.test(J.nodeName))&&(!x||x.endA>=x.endB)&&n.someProp("handleKeyDown",J=>J(n,zi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!x)if(r&&f instanceof fe&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))x={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let J=D1(n,n.state.doc,h.sel);if(J&&!J.eq(n.state.selection)){let le=n.state.tr.setSelection(J);o&&le.setMeta("composition",o),n.dispatch(le)}}return}n.state.selection.from<n.state.selection.to&&x.start==x.endB&&n.state.selection instanceof fe&&(x.start>n.state.selection.from&&x.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?x.start=n.state.selection.from:x.endA<n.state.selection.to&&x.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(x.endB+=n.state.selection.to-x.endA,x.endA=n.state.selection.to)),Kt&&si<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>h.from&&h.doc.textBetween(x.start-h.from-1,x.start-h.from+1)=="  "&&(x.start--,x.endA--,x.endB--);let E=h.doc.resolveNoCache(x.start-h.from),T=h.doc.resolveNoCache(x.endB-h.from),C=m.resolve(x.start),N=E.sameParent(T)&&E.parent.inlineContent&&C.end()>=x.endA,O;if((po&&n.input.lastIOSEnter>Date.now()-225&&(!N||s.some(J=>J.nodeName=="DIV"||J.nodeName=="P"))||!N&&E.pos<h.doc.content.size&&(!E.sameParent(T)||!E.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(E.pos,T.pos,"",""))&&(O=ye.findFrom(h.doc.resolve(E.pos+1),1,!0))&&O.head>E.pos)&&n.someProp("handleKeyDown",J=>J(n,zi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>x.start&&ON(m,x.start,x.endA,E,T)&&n.someProp("handleKeyDown",J=>J(n,zi(8,"Backspace")))){pr&&Ot&&n.domObserver.suppressSelectionUpdates();return}Ot&&x.endB==x.start&&(n.input.lastChromeDelete=Date.now()),pr&&!N&&E.start()!=T.start()&&T.parentOffset==0&&E.depth==T.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==x.endA&&(x.endB-=2,T=h.doc.resolveNoCache(x.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(J){return J(n,zi(13,"Enter"))})},20));let V=x.start,U=x.endA,G=J=>{let le=J||n.state.tr.replace(V,U,h.doc.slice(x.start-h.from,x.endB-h.from));if(h.sel){let ke=D1(n,le.doc,h.sel);ke&&!(Ot&&n.composing&&ke.empty&&(x.start!=x.endB||n.input.lastChromeDelete<Date.now()-100)&&(ke.head==V||ke.head==le.mapping.map(U)-1)||Kt&&ke.empty&&ke.head==V)&&le.setSelection(ke)}return o&&le.setMeta("composition",o),le.scrollIntoView()},Y;if(N){if(E.pos==T.pos){Kt&&si<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>yr(n),20));let J=G(n.state.tr.delete(V,U)),le=m.resolve(x.start).marksAcross(m.resolve(x.endA));le&&J.ensureMarks(le),n.dispatch(J)}else if(x.endA==x.endB&&(Y=MN(E.parent.content.cut(E.parentOffset,T.parentOffset),C.parent.content.cut(C.parentOffset,x.endA-C.start())))){let J=G(n.state.tr);Y.type=="add"?J.addMark(V,U,Y.mark):J.removeMark(V,U,Y.mark),n.dispatch(J)}else if(E.parent.child(E.index()).isText&&E.index()==T.index()-(T.textOffset?0:1)){let J=E.parent.textBetween(E.parentOffset,T.parentOffset),le=()=>G(n.state.tr.insertText(J,V,U));n.someProp("handleTextInput",ke=>ke(n,V,U,J,le))||n.dispatch(le())}}else n.dispatch(G())}function D1(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:_m(n,e.resolve(t.anchor),e.resolve(t.head))}function MN(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,l,u,f;for(let m=0;m<r.length;m++)s=r[m].removeFromSet(s);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],l="add",f=m=>m.mark(u.addToSet(m.marks));else if(s.length==0&&o.length==1)u=o[0],l="remove",f=m=>m.mark(u.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(f(e.child(m)));if(K.from(h).eq(n))return{mark:u,type:l}}function ON(n,e,t,r,s){if(t-e<=s.pos-r.pos||ip(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(ip(o,!0,!0));return!l.parent.isTextblock||l.pos>t||ip(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function ip(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function NN(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let f=Math.max(0,o-Math.min(l,u));r-=l+f-o}if(l<o&&n.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&j1(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-l),l=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<n.size&&j1(n.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function j1(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class uw{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new JO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(P1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=B1(this),z1(this),this.nodeViews=U1(this),this.docView=m1(this.state.doc,L1(this),rp(this),this.dom,this),this.domObserver=new SN(this,(r,s,o,l)=>AN(this,r,s,o,l)),this.domObserver.start(),QO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wp(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(P1),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(rw(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let b=U1(this);DN(b,this.nodeViews)&&(this.nodeViews=b,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&Wp(this),this.editable=B1(this),z1(this);let f=rp(this),h=L1(this),m=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,h,f);(y||!e.selection.eq(s.selection))&&(l=!0);let v=m=="preserve"&&l&&this.dom.style.overflowAnchor==null&&dO(this);if(l){this.domObserver.stop();let b=y&&(Kt||Ot)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&RN(s.selection,e.selection);if(y){let x=Ot?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=uN(this)),(o||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=m1(e.doc,h,f,this.dom,this)),x&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&LO(this))?yr(this,b):(KS(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():v&&fO(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof re){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&c1(this,t.getBoundingClientRect(),e)}else c1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new sw(e.slice,e.move,s<0?void 0:re.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(Kt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&hO(this.dom),yr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return vO(this,e)}coordsAtPos(e,t=1){return BS(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return EO(this,t||this.state,e)}pasteHTML(e,t){return Xa(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Xa(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Am(this,e)}destroy(){this.docView&&(XO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],rp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,eO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return eN(this,e)}domSelectionRange(){let e=this.domSelection();return e?Lt&&this.root.nodeType===11&&sO(this.dom.ownerDocument)==this.dom&&EN(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}uw.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function L1(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[jt.node(0,n.state.doc.content.size,e)]}function z1(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:jt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function B1(n){return!n.someProp("editable",e=>e(n.state)===!1)}function RN(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function U1(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function DN(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function P1(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var li={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jN=typeof navigator<"u"&&/Mac/.test(navigator.platform),LN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)li[48+Tt]=li[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)li[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)li[Tt]=String.fromCharCode(Tt+32),pu[Tt]=String.fromCharCode(Tt);for(var sp in li)pu.hasOwnProperty(sp)||(pu[sp]=li[sp]);function zN(n){var e=jN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||LN&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?pu:li)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const BN=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),UN=typeof navigator<"u"&&/Win/.test(navigator.platform);function PN(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))BN?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function HN(n){let e=Object.create(null);for(let t in n)e[PN(t)]=n[t];return e}function op(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function IN(n){return new Qe({props:{handleKeyDown:dw(n)}})}function dw(n){let e=HN(n);return function(t,r){let s=zN(r),o,l=e[op(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[op(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(UN&&r.ctrlKey&&r.altKey)&&(o=li[r.keyCode])&&o!=s){let u=e[op(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const jm=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function fw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const hw=(n,e,t)=>{let r=fw(n,t);if(!r)return!1;let s=Lm(r);if(!s){let l=r.blockRange(),u=l&&So(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(ww(n,s,e,-1))return!0;if(r.parent.content.size==0&&(mo(o,"end")||re.isSelectable(o)))for(let l=r.depth;;l--){let u=ed(n.doc,r.before(l),r.after(l),X.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=n.tr.step(u);f.setSelection(mo(o,"end")?ye.findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):re.create(f.doc,s.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},$N=(n,e,t)=>{let r=fw(n,t);if(!r)return!1;let s=Lm(r);return s?pw(n,s,e):!1},qN=(n,e,t)=>{let r=gw(n,t);if(!r)return!1;let s=zm(r);return s?pw(n,s,e):!1};function pw(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let m=s.lastChild;if(!m)return!1;s=m}let l=e.nodeAfter,u=l,f=e.pos+1;for(;!u.isTextblock;f++){if(u.type.spec.isolating)return!1;let m=u.firstChild;if(!m)return!1;u=m}let h=ed(n.doc,o,f,X.empty);if(!h||h.from!=o||h instanceof gt&&h.slice.size>=f-o)return!1;if(t){let m=n.tr.step(h);m.setSelection(fe.create(m.doc,o)),t(m.scrollIntoView())}return!0}function mo(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const mw=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Lm(r)}let l=o&&o.nodeBefore;return!l||!re.isSelectable(l)?!1:(e&&e(n.tr.setSelection(re.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function Lm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function gw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const yw=(n,e,t)=>{let r=gw(n,t);if(!r)return!1;let s=zm(r);if(!s)return!1;let o=s.nodeAfter;if(ww(n,s,e,1))return!0;if(r.parent.content.size==0&&(mo(o,"start")||re.isSelectable(o))){let l=ed(n.doc,r.before(),r.after(),X.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(mo(o,"start")?ye.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):re.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},vw=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=zm(r)}let l=o&&o.nodeAfter;return!l||!re.isSelectable(l)?!1:(e&&e(n.tr.setSelection(re.create(n.doc,o.pos)).scrollIntoView()),!0)};function zm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const VN=(n,e)=>{let t=n.selection,r=t instanceof re,s;if(r){if(t.node.isTextblock||!di(n.doc,t.from))return!1;s=t.from}else if(s=Zu(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(re.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},KN=(n,e)=>{let t=n.selection,r;if(t instanceof re){if(t.node.isTextblock||!di(n.doc,t.to))return!1;r=t.to}else if(r=Zu(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},FN=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&So(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},bw=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Bm(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const GN=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),l=Bm(s.contentMatchAt(o));if(!l||!s.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),f=n.tr.replaceWith(u,u,l.createAndFill());f.setSelection(ye.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},xw=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof rn||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=Bm(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(fe.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},Sw=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(gr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&So(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function YN(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof re&&e.selection.node.isBlock)return!r.parentOffset||!gr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,f=!1,h=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){f=r.end(b)==r.pos+(r.depth-b),h=r.start(b)==r.pos-(r.depth-b),u=Bm(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),o.unshift(f&&u?{type:u}:null),l=b;break}else{if(b==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof fe||e.selection instanceof rn)&&m.deleteSelection();let y=m.mapping.map(r.pos),v=gr(m.doc,y,o.length,o);if(v||(o[0]=u?{type:u}:null,v=gr(m.doc,y,o.length,o)),!v)return!1;if(m.split(y,o.length,o),!f&&h&&r.node(l).type!=u){let b=m.mapping.map(r.before(l)),x=m.doc.resolve(b);u&&r.node(l-1).canReplaceWith(x.index(),x.index()+1,u)&&m.setNodeMarkup(m.mapping.map(r.before(l)),u)}return t&&t(m.scrollIntoView()),!0}}const WN=YN(),JN=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(re.create(n.doc,s))),!0)};function QN(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||di(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function ww(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,l,u,f=s.type.spec.isolating||o.type.spec.isolating;if(!f&&QN(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let b=e.pos+o.nodeSize,x=K.empty;for(let C=l.length-1;C>=0;C--)x=K.from(l[C].create(null,x));x=K.from(s.copy(x));let E=n.tr.step(new yt(e.pos-1,b,e.pos,b,new X(x,1,0),l.length,!0)),T=E.doc.resolve(b+2*l.length);T.nodeAfter&&T.nodeAfter.type==s.type&&di(E.doc,T.pos)&&E.join(T.pos),t(E.scrollIntoView())}return!0}let m=o.type.spec.isolating||r>0&&f?null:ye.findFrom(e,1),y=m&&m.$from.blockRange(m.$to),v=y&&So(y);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(y,v).scrollIntoView()),!0;if(h&&mo(o,"start",!0)&&mo(s,"end")){let b=s,x=[];for(;x.push(b),!b.isTextblock;)b=b.lastChild;let E=o,T=1;for(;!E.isTextblock;E=E.firstChild)T++;if(b.canReplace(b.childCount,b.childCount,E.content)){if(t){let C=K.empty;for(let O=x.length-1;O>=0;O--)C=K.from(x[O].copy(C));let N=n.tr.step(new yt(e.pos-x.length,e.pos+o.nodeSize,e.pos+T,e.pos+o.nodeSize-T,new X(C,x.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function Ew(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(fe.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const XN=Ew(-1),ZN=Ew(1);function eR(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o),u=l&&Em(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function H1(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(f,h)=>{if(s)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)s=!0;else{let m=t.doc.resolve(h),y=m.index();s=m.parent.canReplaceWith(y,y+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[l];o.setBlockType(u,f,n,e)}r(o.scrollIntoView())}return!0}}function Um(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}Um(jm,hw,mw);Um(jm,yw,vw);Um(bw,xw,Sw,WN);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function tR(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return nR(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function nR(n,e,t,r=null){let s=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=l.resolve(e.start-2);o=new au(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new au(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=Em(o,t,r,e);return u?(n&&rR(n,e,u,s,t),!0):!1}function rR(n,e,t,r,s){let o=K.empty;for(let m=t.length-1;m>=0;m--)o=K.from(t[m].type.create(t[m].attrs,o));n.step(new yt(e.start-(r?2:0),e.end,e.start,e.end,new X(o,0,0),t.length,!0));let l=0;for(let m=0;m<t.length;m++)t[m].type==s&&(l=m+1);let u=t.length-l,f=e.start+t.length-(r?2:0),h=e.parent;for(let m=e.startIndex,y=e.endIndex,v=!0;m<y;m++,v=!1)!v&&gr(n.doc,f,u)&&(n.split(f,u),f+=2*u),f+=h.child(m).nodeSize;return n}function iR(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?sR(e,t,n,o):oR(e,t,o):!0:!1}}function sR(n,e,t,r){let s=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(s.step(new yt(o-1,l,o,l,new X(K.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new au(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=So(r);if(u==null)return!1;s.lift(r,u);let f=s.doc.resolve(s.mapping.map(o,-1)-1);return di(s.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&s.join(f.pos),e(s.scrollIntoView()),!0}function oR(n,e,t){let r=n.tr,s=t.parent;for(let b=t.end,x=t.endIndex-1,E=t.startIndex;x>E;x--)b-=s.child(x).nodeSize,r.delete(b-1,b+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,f=t.endIndex==s.childCount,h=o.node(-1),m=o.index(-1);if(!h.canReplace(m+(u?0:1),m+1,l.content.append(f?K.empty:K.from(s))))return!1;let y=o.pos,v=y+l.nodeSize;return r.step(new yt(y-(u?1:0),v+(f?1:0),y+1,v-1,new X((u?K.empty:K.from(s.copy(K.empty))).append(f?K.empty:K.from(s.copy(K.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function aR(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,f=u.child(l-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==u.type,m=K.from(h?n.create():null),y=new X(K.from(n.create(null,K.from(u.type.create(null,m)))),h?3:1,0),v=o.start,b=o.end;t(e.tr.step(new yt(v-(h?3:1),b,v,b,y,1,!0)).scrollIntoView())}return!0}}var lR=Object.defineProperty,kw=(n,e)=>{for(var t in e)lR(n,t,{get:e[t],enumerable:!0})};function sd(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}var od=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:s}=t,o=this.buildProps(s);return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...h)=>{const m=u(...h)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:s}=this,{view:o}=r,l=[],u=!!n,f=n||s.tr,h=()=>(!u&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),l.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(t).map(([y,v])=>[y,(...x)=>{const E=this.buildProps(f,e),T=v(...x)(E);return l.push(T),m}])),run:h};return m}createCan(n){const{rawCommands:e,state:t}=this,r=!1,s=n||t.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([u,f])=>[u,(...h)=>f(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:s}=this,{view:o}=r,l={tr:n,editor:r,view:o,state:sd({state:s,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([u,f])=>[u,(...h)=>f(...h)(l)]))}};return l}},cR=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}};function Tw(n,e){const t=new AS(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}var Cw=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Cw(r)}return n};function Pc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Cw(t)}function el(n,e,t){if(n instanceof Mn||n instanceof K)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return K.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),el("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const f=new fS({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?ii.fromSchema(f).parseSlice(Pc(n),t.parseOptions):ii.fromSchema(f).parse(Pc(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=ii.fromSchema(e);return t.slice?o.parseSlice(Pc(n),t.parseOptions).content:o.parse(Pc(n),t.parseOptions)}return el("",e,t)}function Jp(n,e,t={},r={}){return el(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}function uR(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function dR(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,o)=>{t(s)&&r.push({node:s,pos:o})}),r}function fR(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ad(n){return e=>fR(e.$from,n)}function ne(n,e,t){return n.config[e]===void 0&&n.parent?ne(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ne(n.parent,e,t):null}):n.config[e]}function Pm(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=ne(e,"addExtensions",t);return r?[e,...Pm(r())]:e}).flat(10)}function Hm(n,e){const t=es.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function _w(n){return typeof n=="function"}function Ne(n,e=void 0,...t){return _w(n)?e?n.bind(e)(...t):n(...t):n}function hR(n={}){return Object.keys(n).length===0&&n.constructor===Object}function tl(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Aw(n){const e=[],{nodeExtensions:t,markExtensions:r}=tl(n),s=[...t,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},f=ne(l,"addGlobalAttributes",u);if(!f)return;f().forEach(m=>{m.types.forEach(y=>{Object.entries(m.attributes).forEach(([v,b])=>{e.push({type:y,name:v,attribute:{...o,...b}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},f=ne(l,"addAttributes",u);if(!f)return;const h=f();Object.entries(h).forEach(([m,y])=>{const v={...o,...y};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:l.name,name:m,attribute:v})})}),e}function rt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],f=r[s]?r[s].split(" "):[],h=u.filter(m=>!f.includes(m));r[s]=[...f,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(m=>m.trim()).filter(Boolean):[],f=r[s]?r[s].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;f.forEach(m=>{const[y,v]=m.split(":").map(b=>b.trim());h.set(y,v)}),u.forEach(m=>{const[y,v]=m.split(":").map(b=>b.trim());h.set(y,v)}),r[s]=Array.from(h.entries()).map(([m,y])=>`${m}: ${y}`).join("; ")}else r[s]=o}),r},{})}function mu(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>rt(t,r),{})}function pR(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function I1(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):pR(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...s}}}}function $1(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&hR(t)?!1:t!=null))}function mR(n,e){var t;const r=Aw(n),{nodeExtensions:s,markExtensions:o}=tl(n),l=(t=s.find(h=>ne(h,"topNode")))==null?void 0:t.name,u=Object.fromEntries(s.map(h=>{const m=r.filter(C=>C.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},v=n.reduce((C,N)=>{const O=ne(N,"extendNodeSchema",y);return{...C,...O?O(h):{}}},{}),b=$1({...v,content:Ne(ne(h,"content",y)),marks:Ne(ne(h,"marks",y)),group:Ne(ne(h,"group",y)),inline:Ne(ne(h,"inline",y)),atom:Ne(ne(h,"atom",y)),selectable:Ne(ne(h,"selectable",y)),draggable:Ne(ne(h,"draggable",y)),code:Ne(ne(h,"code",y)),whitespace:Ne(ne(h,"whitespace",y)),linebreakReplacement:Ne(ne(h,"linebreakReplacement",y)),defining:Ne(ne(h,"defining",y)),isolating:Ne(ne(h,"isolating",y)),attrs:Object.fromEntries(m.map(C=>{var N,O;return[C.name,{default:(N=C?.attribute)==null?void 0:N.default,validate:(O=C?.attribute)==null?void 0:O.validate}]}))}),x=Ne(ne(h,"parseHTML",y));x&&(b.parseDOM=x.map(C=>I1(C,m)));const E=ne(h,"renderHTML",y);E&&(b.toDOM=C=>E({node:C,HTMLAttributes:mu(C,m)}));const T=ne(h,"renderText",y);return T&&(b.toText=T),[h.name,b]})),f=Object.fromEntries(o.map(h=>{const m=r.filter(T=>T.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},v=n.reduce((T,C)=>{const N=ne(C,"extendMarkSchema",y);return{...T,...N?N(h):{}}},{}),b=$1({...v,inclusive:Ne(ne(h,"inclusive",y)),excludes:Ne(ne(h,"excludes",y)),group:Ne(ne(h,"group",y)),spanning:Ne(ne(h,"spanning",y)),code:Ne(ne(h,"code",y)),attrs:Object.fromEntries(m.map(T=>{var C,N;return[T.name,{default:(C=T?.attribute)==null?void 0:C.default,validate:(N=T?.attribute)==null?void 0:N.validate}]}))}),x=Ne(ne(h,"parseHTML",y));x&&(b.parseDOM=x.map(T=>I1(T,m)));const E=ne(h,"renderHTML",y);return E&&(b.toDOM=T=>E({mark:T,HTMLAttributes:mu(T,m)})),[h.name,b]}));return new fS({topNode:l,nodes:u,marks:f})}function gR(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function Im(n){return n.sort((t,r)=>{const s=ne(t,"priority")||100,o=ne(r,"priority")||100;return s>o?-1:s<o?1:0})}function Mw(n){const e=Im(Pm(n)),t=gR(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Ow(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(f,h,m,y)=>{var v;f.isBlock&&h>r&&(u+=o);const b=l?.[f.type.name];if(b)return m&&(u+=b({node:f,pos:h,parent:m,index:y,range:e})),!1;f.isText&&(u+=(v=f?.text)==null?void 0:v.slice(Math.max(r,h)-h,s-h))}),u}function yR(n,e){const t={from:0,to:n.content.size};return Ow(n,t,e)}function Nw(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function br(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}function Rw(n,e){const t=br(e,n.schema),{from:r,to:s,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,f=>{l.push(...f.marks)});const u=l.find(f=>f.type.name===t.name);return u?{...u.attrs}:{}}function it(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function vR(n,e){const t=it(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function ld(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Dw(n,e){const t=ld(typeof e=="string"?e:e.name,n.schema);return t==="node"?vR(n,e):t==="mark"?Rw(n,e):{}}function bR(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function xR(n){const e=bR(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function jw(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,o)=>{const l=[];if(s.ranges.length)s.forEach((u,f)=>{l.push({from:u,to:f})});else{const{from:u,to:f}=t[o];if(u===void 0||f===void 0)return;l.push({from:u,to:f})}l.forEach(({from:u,to:f})=>{const h=e.slice(o).map(u,-1),m=e.slice(o).map(f),y=e.invert().map(h,-1),v=e.invert().map(m);r.push({oldRange:{from:y,to:v},newRange:{from:h,to:m}})})}),xR(r)}function $m(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function gu(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:$m(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Lw(n,e,t={}){return n.find(r=>r.type===e&&gu(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function q1(n,e,t={}){return!!Lw(n,e,t)}function qm(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(m=>m.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(m=>m.type===e)||(t=t||((r=s.node.marks[0])==null?void 0:r.attrs),!Lw([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,f=l+1,h=u+s.node.nodeSize;for(;l>0&&q1([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;f<n.parent.childCount&&q1([...n.parent.child(f).marks],e,t);)h+=n.parent.child(f).nodeSize,f+=1;return{from:u,to:h}}function Vm(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n),l=qm(o,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,o)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(l=>({from:o,to:o+s.nodeSize,mark:l})))}),r}var SR=(n,e,t,r=20)=>{const s=n.doc.resolve(t);let o=r,l=null;for(;o>0&&l===null;){const u=s.node(o);u?.type.name===e?l=u:o-=1}return[l,o]};function ap(n,e){return e.nodes[n]||e.marks[n]||null}function Xc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var wR=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,l,u)=>{var f,h;const m=((h=(f=s.type.spec).toText)==null?void 0:h.call(f,{node:s,pos:o,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?m:m.slice(0,Math.max(0,r-o))}),t};function Qp(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?br(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>gu(y.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:y,$to:v})=>{const b=y.pos,x=v.pos;n.doc.nodesBetween(b,x,(E,T)=>{if(!E.isText&&!E.marks.length)return;const C=Math.max(b,T),N=Math.min(x,T+E.nodeSize),O=N-C;l+=O,u.push(...E.marks.map(V=>({mark:V,from:C,to:N})))})}),l===0)return!1;const f=u.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>gu(y.mark.attrs,t,{strict:!1})).reduce((y,v)=>y+v.to-v.from,0),h=u.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,v)=>y+v.to-v.from,0);return(f>0?f+h:f)>=l}function ci(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,l=e?it(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(y,v)=>{if(y.isText)return;const b=Math.max(r,v),x=Math.min(s,v+y.nodeSize);u.push({node:y,from:b,to:x})});const f=s-r,h=u.filter(y=>l?l.name===y.node.type.name:!0).filter(y=>gu(y.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((y,v)=>y+v.to-v.from,0)>=f}function ER(n,e,t={}){if(!e)return ci(n,null,t)||Qp(n,null,t);const r=ld(e,n.schema);return r==="node"?ci(n,e,t):r==="mark"?Qp(n,e,t):!1}var kR=(n,e)=>{const{$from:t,$to:r,$anchor:s}=n.selection;if(e){const o=ad(u=>u.type.name===e)(n.selection);if(!o)return!1;const l=n.doc.resolve(o.pos+1);return s.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},TR=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function V1(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function K1(n,e){const{nodeExtensions:t}=tl(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Ne(ne(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function cd(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(o=>{s!==!1&&(cd(o,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function zw(n){return n instanceof re}function Bw(n){return n instanceof fe}function Hi(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Uw(n,e=null){if(!e)return null;const t=ye.atStart(n),r=ye.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?fe.create(n,Hi(0,s,o),Hi(n.content.size,s,o)):fe.create(n,Hi(e,s,o),Hi(e,s,o))}function CR(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof gt||s instanceof yt))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,f,h,m)=>{l===0&&(l=m)}),n.setSelection(ye.near(n.doc.resolve(l),t))}var ud=class{constructor(n){this.find=n.find,this.handler=n.handler}},_R=(n,e)=>{if($m(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Hc(n){var e;const{editor:t,from:r,to:s,text:o,rules:l,plugin:u}=n,{view:f}=t;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let m=!1;const y=wR(h)+o;return l.forEach(v=>{if(m)return;const b=_R(y,v.find);if(!b)return;const x=f.state.tr,E=sd({state:f.state,transaction:x}),T={from:r-(b[0].length-o.length),to:s},{commands:C,chain:N,can:O}=new od({editor:t,state:E});v.handler({state:E,range:T,match:b,commands:C,chain:N,can:O})===null||!x.steps.length||(x.setMeta(u,{transform:x,from:r,to:s,text:o}),f.dispatch(x),m=!0)}),m}function AR(n){const{editor:e,rules:t}=n,r=new Qe({state:{init(){return null},apply(s,o,l){const u=s.getMeta(r);if(u)return u;const f=s.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:m}=f;typeof m=="string"?m=m:m=Hm(K.from(m),l.schema);const{from:y}=f,v=y+m.length;Hc({editor:e,from:y,to:v,text:m,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,l,u){return Hc({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&Hc({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?Hc({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function MR(n){return Object.prototype.toString.call(n).slice(8,-1)}function Ic(n){return MR(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Pw(n,e){const t={...n};return Ic(n)&&Ic(e)&&Object.keys(e).forEach(r=>{Ic(e[r])&&Ic(n[r])?t[r]=Pw(n[r],e[r]):t[r]=e[r]}),t}var Km=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Ne(ne(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ne(ne(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>Pw(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},ts=class Hw extends Km{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new Hw(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>h?.type.name===t.name))return!1;const f=l.find(h=>h?.type.name===t.name);return f&&r.removeStoredMark(f),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function OR(n){return typeof n=="number"}var NR=class{constructor(n){this.find=n.find,this.handler=n.handler}},RR=(n,e,t)=>{if($m(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function DR(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:f,chain:h,can:m}=new od({editor:e,state:t}),y=[];return t.doc.nodesBetween(r,s,(b,x)=>{if(!b.isTextblock||b.type.spec.code)return;const E=Math.max(r,x),T=Math.min(s,x+b.content.size),C=b.textBetween(E-x,T-x,void 0,"￼");RR(C,o.find,l).forEach(O=>{if(O.index===void 0)return;const V=E+O.index+1,U=V+O[0].length,G={from:t.tr.mapping.map(V),to:t.tr.mapping.map(U)},Y=o.handler({state:t,range:G,match:O,commands:f,chain:h,can:m,pasteEvent:l,dropEvent:u});y.push(Y)})}),y.every(b=>b!==null)}var $c=null,jR=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function LR(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const f=({state:m,from:y,to:v,rule:b,pasteEvt:x})=>{const E=m.tr,T=sd({state:m,transaction:E});if(!(!DR({editor:e,state:T,from:Math.max(y-1,0),to:v.b-1,rule:b,pasteEvent:x,dropEvent:u})||!E.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(m=>new Qe({view(y){const v=x=>{var E;r=(E=y.dom.parentElement)!=null&&E.contains(x.target)?y.dom.parentElement:null,r&&($c=e)},b=()=>{$c&&($c=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(y,v)=>{if(o=r===y.dom.parentElement,u=v,!o){const b=$c;b?.isEditable&&setTimeout(()=>{const x=b.state.selection;x&&b.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(y,v)=>{var b;const x=(b=v.clipboardData)==null?void 0:b.getData("text/html");return l=v,s=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(y,v,b)=>{const x=y[0],E=x.getMeta("uiEvent")==="paste"&&!s,T=x.getMeta("uiEvent")==="drop"&&!o,C=x.getMeta("applyPasteRules"),N=!!C;if(!E&&!T&&!N)return;if(N){let{text:U}=C;typeof U=="string"?U=U:U=Hm(K.from(U),b.schema);const{from:G}=C,Y=G+U.length,J=jR(U);return f({rule:m,state:b,from:G,to:{b:Y},pasteEvt:J})}const O=v.doc.content.findDiffStart(b.doc.content),V=v.doc.content.findDiffEnd(b.doc.content);if(!(!OR(O)||!V||O===V.b))return f({rule:m,state:b,from:O,to:V,pasteEvt:l})}}))}var dd=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.extensions=Mw(n),this.schema=mR(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ap(e.name,this.schema)},r=ne(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this,e=Im([...this.extensions].reverse()),t=[],r=[],s=e.map(o=>{const l={name:o.name,options:o.options,storage:this.editor.extensionStorage[o.name],editor:n,type:ap(o.name,this.schema)},u=[],f=ne(o,"addKeyboardShortcuts",l);let h={};if(o.type==="mark"&&ne(o,"exitable",l)&&(h.ArrowRight=()=>ts.handleExit({editor:n,mark:o})),f){const x=Object.fromEntries(Object.entries(f()).map(([E,T])=>[E,()=>T({editor:n})]));h={...h,...x}}const m=IN(h);u.push(m);const y=ne(o,"addInputRules",l);V1(o,n.options.enableInputRules)&&y&&t.push(...y());const v=ne(o,"addPasteRules",l);V1(o,n.options.enablePasteRules)&&v&&r.push(...v());const b=ne(o,"addProseMirrorPlugins",l);if(b){const x=b();u.push(...x)}return u}).flat();return[AR({editor:n,rules:t}),...LR({editor:n,rules:r}),...s]}get attributes(){return Aw(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=tl(this.extensions);return Object.fromEntries(e.filter(t=>!!ne(t,"addNodeView")).map(t=>{const r=this.attributes.filter(u=>u.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:it(t.name,this.schema)},o=ne(t,"addNodeView",s);if(!o)return[];const l=(u,f,h,m,y)=>{const v=mu(u,r);return o()({node:u,view:f,getPos:h,decorations:m,innerDecorations:y,editor:n,extension:t,HTMLAttributes:v})};return[t.name,l]}))}get markViews(){const{editor:n}=this,{markExtensions:e}=tl(this.extensions);return Object.fromEntries(e.filter(t=>!!ne(t,"addMarkView")).map(t=>{const r=this.attributes.filter(u=>u.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:br(t.name,this.schema)},o=ne(t,"addMarkView",s);if(!o)return[];const l=(u,f,h)=>{const m=mu(u,r);return o()({mark:u,view:f,inline:h,editor:n,extension:t,HTMLAttributes:m,updateAttributes:y=>{QD(u,n,y)}})};return[t.name,l]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ap(e.name,this.schema)};e.type==="mark"&&((t=Ne(ne(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const s=ne(e,"onBeforeCreate",r),o=ne(e,"onCreate",r),l=ne(e,"onUpdate",r),u=ne(e,"onSelectionUpdate",r),f=ne(e,"onTransaction",r),h=ne(e,"onFocus",r),m=ne(e,"onBlur",r),y=ne(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),y&&this.editor.on("destroy",y)})}};dd.resolve=Mw;dd.sort=Im;dd.flatten=Pm;var zR={};kw(zR,{ClipboardTextSerializer:()=>$w,Commands:()=>Kw,Delete:()=>Fw,Drop:()=>Gw,Editable:()=>Yw,FocusEvents:()=>Jw,Keymap:()=>Qw,Paste:()=>Xw,Tabindex:()=>Zw,focusEventsPluginKey:()=>Ww});var st=class Iw extends Km{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new Iw(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},$w=st.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Qe({key:new bt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,l=Math.min(...o.map(m=>m.$from.pos)),u=Math.max(...o.map(m=>m.$to.pos)),f=Nw(t);return Ow(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),qw={};kw(qw,{blur:()=>BR,clearContent:()=>UR,clearNodes:()=>PR,command:()=>HR,createParagraphNear:()=>IR,cut:()=>$R,deleteCurrentNode:()=>qR,deleteNode:()=>VR,deleteRange:()=>KR,deleteSelection:()=>FR,enter:()=>GR,exitCode:()=>YR,extendMarkRange:()=>WR,first:()=>JR,focus:()=>XR,forEach:()=>ZR,insertContent:()=>eD,insertContentAt:()=>nD,joinBackward:()=>sD,joinDown:()=>iD,joinForward:()=>oD,joinItemBackward:()=>aD,joinItemForward:()=>lD,joinTextblockBackward:()=>cD,joinTextblockForward:()=>uD,joinUp:()=>rD,keyboardShortcut:()=>fD,lift:()=>hD,liftEmptyBlock:()=>pD,liftListItem:()=>mD,newlineInCode:()=>gD,resetAttributes:()=>yD,scrollIntoView:()=>vD,selectAll:()=>bD,selectNodeBackward:()=>xD,selectNodeForward:()=>SD,selectParentNode:()=>wD,selectTextblockEnd:()=>ED,selectTextblockStart:()=>kD,setContent:()=>TD,setMark:()=>_D,setMeta:()=>AD,setNode:()=>MD,setNodeSelection:()=>OD,setTextSelection:()=>ND,sinkListItem:()=>RD,splitBlock:()=>DD,splitListItem:()=>jD,toggleList:()=>LD,toggleMark:()=>zD,toggleNode:()=>BD,toggleWrap:()=>UD,undoInputRule:()=>PD,unsetAllMarks:()=>HD,unsetMark:()=>ID,updateAttributes:()=>$D,wrapIn:()=>qD,wrapInList:()=>VD});var BR=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),UR=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),PR=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,f)=>{if(u.type.isText)return;const{doc:h,mapping:m}=e,y=h.resolve(m.map(f)),v=h.resolve(m.map(f+u.nodeSize)),b=y.blockRange(v);if(!b)return;const x=So(b);if(u.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(b.start,E)}(x||x===0)&&e.lift(b,x)})}),!0},HR=n=>e=>n(e),IR=()=>({state:n,dispatch:e})=>xw(n,e),$R=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new fe(r.doc.resolve(Math.max(l-1,0)))),!0},qR=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),f=s.after(o);n.delete(u,f).scrollIntoView()}return!0}return!1},VR=n=>({tr:e,state:t,dispatch:r})=>{const s=it(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===s){if(r){const f=o.before(l),h=o.after(l);e.delete(f,h).scrollIntoView()}return!0}return!1},KR=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},FR=()=>({state:n,dispatch:e})=>jm(n,e),GR=()=>({commands:n})=>n.keyboardShortcut("Enter"),YR=()=>({state:n,dispatch:e})=>GN(n,e),WR=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=br(n,r.schema),{doc:l,selection:u}=t,{$from:f,from:h,to:m}=u;if(s){const y=qm(f,o,e);if(y&&y.from<=h&&y.to>=m){const v=fe.create(l,y.from,y.to);t.setSelection(v)}}return!0},JR=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function QR(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Fm(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var XR=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Fm()||QR())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!Bw(t.state.selection))return l(),!0;const u=Uw(s.doc,n)||t.state.selection,f=t.state.selection.eq(u);return o&&(f||s.setSelection(u),f&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},ZR=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),eD=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),tD=n=>!("type"in n),nD=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var l;if(s){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const{selection:f}=o.state,h=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},m={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{el(e,o.schema,{parseOptions:m,errorOnInvalidContent:!0})}catch(C){h(C)}try{u=el(e,o.schema,{parseOptions:m,errorOnInvalidContent:(l=t.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(C){return h(C),!1}let{from:y,to:v}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,x=!0;if((tD(u)?u:[u]).forEach(C=>{C.check(),b=b?C.isText&&C.marks.length===0:!1,x=x?C.isBlock:!1}),y===v&&x){const{parent:C}=r.doc.resolve(y);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(y-=1,v+=1)}let T;if(b){if(Array.isArray(e))T=e.map(C=>C.text||"").join("");else if(e instanceof K){let C="";e.forEach(N=>{N.text&&(C+=N.text)}),T=C}else typeof e=="object"&&e&&e.text?T=e.text:T=e;r.insertText(T,y,v)}else{T=u;const C=f.$from.parentOffset===0,N=f.$from.node().isText||f.$from.node().isTextblock,O=f.$from.node().content.size>0;C&&N&&O&&(y=Math.max(0,y-1)),r.replaceWith(y,v,T)}t.updateSelection&&CR(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:y,text:T}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:y,text:T})}return!0},rD=()=>({state:n,dispatch:e})=>VN(n,e),iD=()=>({state:n,dispatch:e})=>KN(n,e),sD=()=>({state:n,dispatch:e})=>hw(n,e),oD=()=>({state:n,dispatch:e})=>yw(n,e),aD=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Zu(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},lD=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Zu(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},cD=()=>({state:n,dispatch:e})=>$N(n,e),uD=()=>({state:n,dispatch:e})=>qN(n,e);function Vw(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dD(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u+=1){const f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))s=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))Fm()||Vw()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var fD=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=dD(n).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return f?.steps.forEach(h=>{const m=h.map(r.mapping);m&&s&&r.maybeStep(m)}),!0},hD=(n,e={})=>({state:t,dispatch:r})=>{const s=it(n,t.schema);return ci(t,s,e)?FN(t,r):!1},pD=()=>({state:n,dispatch:e})=>Sw(n,e),mD=n=>({state:e,dispatch:t})=>{const r=it(n,e.schema);return iR(r)(e,t)},gD=()=>({state:n,dispatch:e})=>bw(n,e);function F1(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}var yD=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=ld(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=it(n,r.schema)),u==="mark"&&(l=br(n,r.schema)),s&&t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(h,m)=>{o&&o===h.type&&t.setNodeMarkup(m,void 0,F1(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(y=>{l===y.type&&t.addMark(m,m+h.nodeSize,l.create(F1(y.attrs,e)))})})}),!0):!1},vD=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),bD=()=>({tr:n,dispatch:e})=>{if(e){const t=new rn(n.doc);n.setSelection(t)}return!0},xD=()=>({state:n,dispatch:e})=>mw(n,e),SD=()=>({state:n,dispatch:e})=>vw(n,e),wD=()=>({state:n,dispatch:e})=>JN(n,e),ED=()=>({state:n,dispatch:e})=>ZN(n,e),kD=()=>({state:n,dispatch:e})=>XN(n,e),TD=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:l,commands:u})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=Jp(n,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return l&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!t),!0}return l&&o.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:f.content.size},n,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function CD(n,e,t){var r;const{selection:s}=e;let o=null;if(Bw(s)&&(o=s.$cursor),o){const u=(r=n.storedMarks)!=null?r:o.marks();return!!t.isInSet(u)||!u.some(f=>f.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:u,$to:f})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,f.pos,(m,y,v)=>{if(h)return!1;if(m.isInline){const b=!v||v.type.allowsMarkType(t),x=!!t.isInSet(m.marks)||!m.marks.some(E=>E.type.excludes(t));h=b&&x}return!h}),h})}var _D=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:l,ranges:u}=o,f=br(n,r.schema);if(s)if(l){const h=Rw(r,f);t.addStoredMark(f.create({...h,...e}))}else u.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;r.doc.nodesBetween(m,y,(v,b)=>{const x=Math.max(b,m),E=Math.min(b+v.nodeSize,y);v.marks.find(C=>C.type===f)?v.marks.forEach(C=>{f===C.type&&t.addMark(x,E,f.create({...C.attrs,...e}))}):t.addMark(x,E,f.create(e))})});return CD(r,t,f)},AD=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),MD=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=it(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>H1(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>H1(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},OD=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=Hi(n,0,r.content.size),o=re.create(r,s);e.setSelection(o)}return!0},ND=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,l=fe.atStart(r).from,u=fe.atEnd(r).to,f=Hi(s,l,u),h=Hi(o,l,u),m=fe.create(r,f,h);e.setSelection(m)}return!0},RD=n=>({state:e,dispatch:t})=>{const r=it(n,e.schema);return aR(r)(e,t)};function G1(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e?.includes(s.type.name));n.tr.ensureMarks(r)}}var DD=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:l}=e,{$from:u,$to:f}=o,h=s.extensionManager.attributes,m=Xc(h,u.node().type.name,u.node().attrs);if(o instanceof re&&o.node.isBlock)return!u.parentOffset||!gr(l,u.pos)?!1:(r&&(n&&G1(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const y=f.parentOffset===f.parent.content.size,v=u.depth===0?void 0:uR(u.node(-1).contentMatchAt(u.indexAfter(-1)));let b=y&&v?[{type:v,attrs:m}]:void 0,x=gr(e.doc,e.mapping.map(u.pos),1,b);if(!b&&!x&&gr(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(x=!0,b=v?[{type:v,attrs:m}]:void 0),r){if(x&&(o instanceof fe&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,b),v&&!y&&!u.parentOffset&&u.parent.type!==v)){const E=e.mapping.map(u.before()),T=e.doc.resolve(E);u.node(-1).canReplaceWith(T.index(),T.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}n&&G1(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return x},jD=(n,e={})=>({tr:t,state:r,dispatch:s,editor:o})=>{var l;const u=it(n,r.schema),{$from:f,$to:h}=r.selection,m=r.selection.node;if(m&&m.isBlock||f.depth<2||!f.sameParent(h))return!1;const y=f.node(-1);if(y.type!==u)return!1;const v=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==u||f.index(-2)!==f.node(-2).childCount-1)return!1;if(s){let C=K.empty;const N=f.index(-1)?1:f.index(-2)?2:3;for(let J=f.depth-N;J>=f.depth-3;J-=1)C=K.from(f.node(J).copy(C));const O=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,V={...Xc(v,f.node().type.name,f.node().attrs),...e},U=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(V))||void 0;C=C.append(K.from(u.createAndFill(null,U)||void 0));const G=f.before(f.depth-(N-1));t.replace(G,f.after(-O),new X(C,4-N,0));let Y=-1;t.doc.nodesBetween(G,t.doc.content.size,(J,le)=>{if(Y>-1)return!1;J.isTextblock&&J.content.size===0&&(Y=le+1)}),Y>-1&&t.setSelection(fe.near(t.doc.resolve(Y))),t.scrollIntoView()}return!0}const b=h.pos===f.end()?y.contentMatchAt(0).defaultType:null,x={...Xc(v,y.type.name,y.attrs),...e},E={...Xc(v,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,h.pos);const T=b?[{type:u,attrs:x},{type:b,attrs:E}]:[{type:u,attrs:x}];if(!gr(t.doc,f.pos,2))return!1;if(s){const{selection:C,storedMarks:N}=r,{splittableMarks:O}=o.extensionManager,V=N||C.$to.parentOffset&&C.$from.marks();if(t.split(f.pos,2,T).scrollIntoView(),!V||!s)return!0;const U=V.filter(G=>O.includes(G.type.name));t.ensureMarks(U)}return!0},lp=(n,e)=>{const t=ad(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===s?.type&&di(n.doc,t.pos)&&n.join(t.pos),!0},cp=(n,e)=>{const t=ad(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===s?.type&&di(n.doc,r)&&n.join(r),!0},LD=(n,e,t,r={})=>({editor:s,tr:o,state:l,dispatch:u,chain:f,commands:h,can:m})=>{const{extensions:y,splittableMarks:v}=s.extensionManager,b=it(n,l.schema),x=it(e,l.schema),{selection:E,storedMarks:T}=l,{$from:C,$to:N}=E,O=C.blockRange(N),V=T||E.$to.parentOffset&&E.$from.marks();if(!O)return!1;const U=ad(G=>K1(G.type.name,y))(E);if(O.depth>=1&&U&&O.depth-U.depth<=1){if(U.node.type===b)return h.liftListItem(x);if(K1(U.node.type.name,y)&&b.validContent(U.node.content)&&u)return f().command(()=>(o.setNodeMarkup(U.pos,b),!0)).command(()=>lp(o,b)).command(()=>cp(o,b)).run()}return!t||!V||!u?f().command(()=>m().wrapInList(b,r)?!0:h.clearNodes()).wrapInList(b,r).command(()=>lp(o,b)).command(()=>cp(o,b)).run():f().command(()=>{const G=m().wrapInList(b,r),Y=V.filter(J=>v.includes(J.type.name));return o.ensureMarks(Y),G?!0:h.clearNodes()}).wrapInList(b,r).command(()=>lp(o,b)).command(()=>cp(o,b)).run()},zD=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,l=br(n,r.schema);return Qp(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:o}):s.setMark(l,e)},BD=(n,e,t={})=>({state:r,commands:s})=>{const o=it(n,r.schema),l=it(e,r.schema),u=ci(r,o,t);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),u?s.setNode(l,f):s.setNode(o,{...f,...t})},UD=(n,e={})=>({state:t,commands:r})=>{const s=it(n,t.schema);return ci(t,s,e)?r.lift(s):r.wrapIn(s,e)},PD=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const l=n.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f-=1)l.step(u.steps[f].invert(u.docs[f]));if(o.text){const f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,f))}else l.delete(o.from,o.to)}return!0}}return!1},HD=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},ID=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,f=br(n,r.schema),{$from:h,empty:m,ranges:y}=u;if(!s)return!0;if(m&&l){let{from:v,to:b}=u;const x=(o=h.marks().find(T=>T.type===f))==null?void 0:o.attrs,E=qm(h,f,x);E&&(v=E.from,b=E.to),t.removeMark(v,b,f)}else y.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,f)});return t.removeStoredMark(f),!0},$D=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=ld(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=it(n,r.schema)),u==="mark"&&(l=br(n,r.schema)),s&&t.selection.ranges.forEach(f=>{const h=f.$from.pos,m=f.$to.pos;let y,v,b,x;t.selection.empty?r.doc.nodesBetween(h,m,(E,T)=>{o&&o===E.type&&(b=Math.max(T,h),x=Math.min(T+E.nodeSize,m),y=T,v=E)}):r.doc.nodesBetween(h,m,(E,T)=>{T<h&&o&&o===E.type&&(b=Math.max(T,h),x=Math.min(T+E.nodeSize,m),y=T,v=E),T>=h&&T<=m&&(o&&o===E.type&&t.setNodeMarkup(T,void 0,{...E.attrs,...e}),l&&E.marks.length&&E.marks.forEach(C=>{if(l===C.type){const N=Math.max(T,h),O=Math.min(T+E.nodeSize,m);t.addMark(N,O,l.create({...C.attrs,...e}))}}))}),v&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(E=>{l===E.type&&t.addMark(b,x,l.create({...E.attrs,...e}))}))}),!0):!1},qD=(n,e={})=>({state:t,dispatch:r})=>{const s=it(n,t.schema);return eR(s,e)(t,r)},VD=(n,e={})=>({state:t,dispatch:r})=>{const s=it(n,t.schema);return tR(s,e)(t,r)},Kw=st.create({name:"commands",addCommands(){return{...qw}}}),Fw=st.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,s;const o=()=>{var l,u,f,h;if((h=(f=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:f.call(u,n))!=null?h:n.getMeta("y-sync$"))return;const m=Tw(n.before,[n,...e]);jw(m).forEach(b=>{m.mapping.mapResult(b.oldRange.from).deletedAfter&&m.mapping.mapResult(b.oldRange.to).deletedBefore&&m.before.nodesBetween(b.oldRange.from,b.oldRange.to,(x,E)=>{const T=E+x.nodeSize-2,C=b.oldRange.from<=E&&T<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:E,to:T,newFrom:m.mapping.map(E),newTo:m.mapping.map(T),deletedRange:b.oldRange,newRange:b.newRange,partial:!C,editor:this.editor,transaction:n,combinedTransform:m})})});const v=m.mapping;m.steps.forEach((b,x)=>{var E,T;if(b instanceof An){const C=v.slice(x).map(b.from,-1),N=v.slice(x).map(b.to),O=v.invert().map(C,-1),V=v.invert().map(N),U=(E=m.doc.nodeAt(C-1))==null?void 0:E.marks.some(Y=>Y.eq(b.mark)),G=(T=m.doc.nodeAt(N))==null?void 0:T.marks.some(Y=>Y.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:O,to:V},newRange:{from:C,to:N},partial:!!(G||U),editor:this.editor,transaction:n,combinedTransform:m})}})};(s=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),Gw=st.create({name:"drop",addProseMirrorPlugins(){return[new Qe({key:new bt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Yw=st.create({name:"editable",addProseMirrorPlugins(){return[new Qe({key:new bt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ww=new bt("focusEvents"),Jw=st.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Qe({key:Ww,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Qw=st.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:f,doc:h}=u,{empty:m,$anchor:y}=f,{pos:v,parent:b}=y,x=y.parent.isTextblock&&v>0?u.doc.resolve(v-1):y,E=x.parent.type.spec.isolating,T=y.pos-y.parentOffset,C=E&&x.parent.childCount===1?T===y.pos:ye.atStart(h).from===v;return!m||!b.type.isTextblock||b.textContent.length||!C||C&&y.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Fm()||Vw()?o:s},addProseMirrorPlugins(){return[new Qe({key:new bt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const r=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),s=n.some(E=>E.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:l,to:u}=e.selection,f=ye.atStart(e.doc).from,h=ye.atEnd(e.doc).to;if(o||!(l===f&&u===h)||!cd(t.doc))return;const v=t.tr,b=sd({state:t,transaction:v}),{commands:x}=new od({editor:this.editor,state:b});if(x.clearNodes(),!!v.steps.length)return v}})]}}),Xw=st.create({name:"paste",addProseMirrorPlugins(){return[new Qe({key:new bt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Zw=st.create({name:"tabindex",addProseMirrorPlugins(){return[new Qe({key:new bt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),KD=class so{constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new so(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new so(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new so(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!s&&u.depth<=this.depth)return;const f=new so(u,this.editor,s,s?t:null);s&&(f.actualDepth=this.depth+1),e.push(new so(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const f=l[u];if(o[f]!==t[f])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&o.every(f=>t[f]===l.node.attrs[f])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},FD=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function GD(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}var YD=class extends cR{constructor(n={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=Uw(e,this.options.autofocus);this.editorState=ao.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){var n;if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}this.editorView=null,this.isInitialized=!1,(n=this.css)==null||n.remove(),this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=GD(FD,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.editorState=this.state.apply(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=_w(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;t=t.filter(l=>!l.key.startsWith(o))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[Yw,$w.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Kw,Jw,Qw,Zw,Gw,Xw,Fw].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new dd(r,this)}createCommandManager(){this.commandManager=new od({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Jp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Jp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var e;this.editorView=new uw(n,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(h)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),s=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const l=t.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l?.getMeta("focus"),f=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),f&&this.emit("blur",{editor:this,event:f.event,transaction:l}),!(n.getMeta("preventUpdate")||!t.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return Dw(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return ER(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Hm(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return yR(this.state.doc,{blockSeparator:e,textSerializers:{...Nw(this.schema),...t}})}get isEmpty(){return cd(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new KD(e,this)}get $doc(){return this.$pos(0)}};function go(n){return new ud({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Ne(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const f=u.search(/\S/),h=t.from+u.indexOf(l),m=h+l.length;if(Vm(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(E=>E===n.type&&E!==b.mark.type)).filter(b=>b.to>h).length)return null;m<t.to&&o.delete(m,t.to),h>t.from&&o.delete(t.from+f,h);const v=t.from+f+l.length;o.addMark(t.from+f,v,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function WD(n){return new ud({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Ne(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const f=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let m=l+h;m>u?m=u:u=m+r[1].length;const y=r[0][r[0].length-1];o.insertText(y,l+r[0].length-1),o.replaceWith(m,u,f)}else if(r[0]){const h=n.type.isInline?l:l-1;o.insert(h,n.type.create(s)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function Xp(n){return new ud({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=Ne(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function yo(n){return new ud({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=Ne(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),f=l.doc.resolve(t.from).blockRange(),h=f&&Em(f,n.type,o);if(!h)return null;if(l.wrap(f,h),n.keepMarks&&n.editor){const{selection:y,storedMarks:v}=e,{splittableMarks:b}=n.editor.extensionManager,x=v||y.$to.parentOffset&&y.$from.marks();if(x){const E=x.filter(T=>b.includes(T.type.name));l.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(y,o).run()}const m=l.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&di(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,m))&&l.join(t.from-1)}})}function JD(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof re){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function QD(n,e,t={}){const{state:r}=e,{doc:s,tr:o}=r,l=n;s.descendants((u,f)=>{const h=o.mapping.map(f),m=o.mapping.map(f)+u.nodeSize;let y=null;if(u.marks.forEach(b=>{if(b!==l)return!1;y=b}),!y)return;let v=!1;if(Object.keys(t).forEach(b=>{t[b]!==y.attrs[b]&&(v=!0)}),v){const b=n.type.create({...n.attrs,...t});o.removeMark(h,m,n.type),o.addMark(h,m,b)}}),o.docChanged&&e.view.dispatch(o)}var sn=class eE extends Km{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new eE(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Qi(n){return new NR({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=Ne(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],f=r[0];let h=t.to;if(u){const m=f.search(/\S/),y=t.from+f.indexOf(u),v=y+u.length;if(Vm(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(T=>T===n.type&&T!==x.mark.type)).filter(x=>x.to>y).length)return null;v<t.to&&l.delete(v,t.to),y>t.from&&l.delete(t.from+m,y),h=t.from+m+u.length,l.addMark(t.from+m,h,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}var up,Y1;function XD(){return Y1||(Y1=1,up=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),up}var ZD=XD();const ej=Fu(ZD);var dp={exports:{}},fp={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function tj(){if(W1)return fp;W1=1;var n=il(),e=Wx();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,f=n.useDebugValue;return fp.useSyncExternalStoreWithSelector=function(h,m,y,v,b){var x=o(null);if(x.current===null){var E={hasValue:!1,value:null};x.current=E}else E=x.current;x=u(function(){function C(G){if(!N){if(N=!0,O=G,G=v(G),b!==void 0&&E.hasValue){var Y=E.value;if(b(Y,G))return V=Y}return V=G}if(Y=V,r(O,G))return Y;var J=v(G);return b!==void 0&&b(Y,J)?(O=G,Y):(O=G,V=J)}var N=!1,O,V,U=y===void 0?null:y;return[function(){return C(m())},U===null?void 0:function(){return C(U())}]},[m,y,v,b]);var T=s(h,x[0],x[1]);return l(function(){E.hasValue=!0,E.value=T},[T]),f(T),T},fp}var J1;function nj(){return J1||(J1=1,dp.exports=tj()),dp.exports}var rj=nj(),ij=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},sj=({contentComponent:n})=>{const e=Jx.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return w.jsx(w.Fragment,{children:Object.values(e)})};function oj(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:U_.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}var aj=class extends _n.Component{constructor(n){var e;super(n),this.editorContentRef=_n.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const n=this.props.editor;if(n&&!n.isDestroyed&&n.options.element){if(n.contentComponent)return;const e=this.editorContentRef.current;e.append(...n.options.element.childNodes),n.setOptions({element:e}),n.contentComponent=oj(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((n=e.options.element)!=null&&n.firstChild)))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:n,innerRef:e,...t}=this.props;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:ij(e,this.editorContentRef),...t}),n?.contentComponent&&w.jsx(sj,{contentComponent:n.contentComponent})]})}},lj=R.forwardRef((n,e)=>{const t=_n.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return _n.createElement(aj,{key:t,innerRef:e,...n})}),cj=_n.memo(lj),uj=typeof window<"u"?R.useLayoutEffect:R.useEffect,dj=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function fj(n){var e;const[t]=R.useState(()=>new dj(n.editor)),r=rj.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:ej);return uj(()=>t.watch(n.editor),[n.editor,t]),R.useDebugValue(r),r}var hj=!1,Zp=typeof window>"u",pj=Zp||!!(typeof window<"u"&&window.next),mj=class tE{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Zp||pj?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new YD(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,o)=>{var l;return s===((l=t.extensions)==null?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?tE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function gj(n={},e=[]){const t=R.useRef(n);t.current=n;const[r]=R.useState(()=>new mj(t)),s=Jx.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return R.useDebugValue(s),R.useEffect(r.onRender(e)),fj({editor:s,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),s}var yj=R.createContext({editor:null});yj.Consumer;var vj=R.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),bj=()=>R.useContext(vj);_n.forwardRef((n,e)=>{const{onDragStart:t}=bj(),r=n.as||"div";return w.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});_n.createContext({markViewContentRef:()=>{}});var yu=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},xj=/^\s*>\s$/,nE=sn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return yu("blockquote",{...rt(this.options.HTMLAttributes,n),children:yu("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[yo({find:xj,type:this.type})]}}),Sj=nE,wj=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ej=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,kj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Tj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,rE=ts.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return yu("strong",{...rt(this.options.HTMLAttributes,n),children:yu("slot",{})})},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[go({find:wj,type:this.type}),go({find:kj,type:this.type})]},addPasteRules(){return[Qi({find:Ej,type:this.type}),Qi({find:Tj,type:this.type})]}}),Cj=rE,_j=/(^|[^`])`([^`]+)`(?!`)/,Aj=/(^|[^`])`([^`]+)`(?!`)/g,Mj=ts.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[go({find:_j,type:this.type})]},addPasteRules(){return[Qi({find:Aj,type:this.type})]}}),Oj=/^```([a-z]+)?[\s\n]$/,Nj=/^~~~([a-z]+)?[\s\n]$/,Rj=sn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",rt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(ye.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[Xp({find:Oj,type:this.type,getAttributes:n=>({language:n[1]})}),Xp({find:Nj,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Qe({key:new bt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s?.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,f=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},f)),l.selection.$from.parent.type!==this.type&&l.setSelection(fe.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),Dj=sn.create({name:"doc",topNode:!0,content:"block+"}),jj=sn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",rt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,f=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&f&&l){const y=f.filter(v=>u.includes(v.type.name));h.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Lj=sn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Xp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),zj=sn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",rt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!JD(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,s=n();return zw(t)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var u;if(l){const{$to:f}=o.selection,h=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?o.setSelection(fe.create(o.doc,f.pos+1)):f.nodeAfter.isBlock?o.setSelection(re.create(o.doc,f.pos)):o.setSelection(fe.create(o.doc,f.pos));else{const m=(u=f.parent.type.contentMatch.defaultType)==null?void 0:u.create();m&&(o.insert(h,m),o.setSelection(fe.create(o.doc,h+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[WD({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Bj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Uj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Pj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Hj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,iE=ts.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[go({find:Bj,type:this.type}),go({find:Pj,type:this.type})]},addPasteRules(){return[Qi({find:Uj,type:this.type}),Qi({find:Hj,type:this.type})]}}),Ij=iE;const $j="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",qj="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",em="numeric",tm="ascii",nm="alpha",Pa="asciinumeric",Na="alphanumeric",rm="domain",sE="emoji",Vj="scheme",Kj="slashscheme",hp="whitespace";function Fj(n,e){return n in e||(e[n]=[]),e[n]}function Ii(n,e,t){e[em]&&(e[Pa]=!0,e[Na]=!0),e[tm]&&(e[Pa]=!0,e[nm]=!0),e[Pa]&&(e[Na]=!0),e[nm]&&(e[Na]=!0),e[Na]&&(e[rm]=!0),e[sE]&&(e[rm]=!0);for(const r in e){const s=Fj(r,t);s.indexOf(n)<0&&s.push(n)}}function Gj(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Vt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Vt.groups={};Vt.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||Vt.groups;let s;return e&&e.j?s=e:(s=new Vt(e),t&&r&&Ii(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const o=n.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(n[l]);return s.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||Vt.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const o=e;let l,u=s.go(n);if(u?(l=new Vt,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new Vt,o){if(r)if(l.t&&typeof l.t=="string"){const f=Object.assign(Gj(l.t,r),t);Ii(o,f,r)}else t&&Ii(o,t,r);l.t=o}return s.j[n]=l,l}};const ve=(n,e,t,r,s)=>n.ta(e,t,r,s),We=(n,e,t,r,s)=>n.tr(e,t,r,s),Q1=(n,e,t,r,s)=>n.ts(e,t,r,s),F=(n,e,t,r,s)=>n.tt(e,t,r,s),ur="WORD",im="UWORD",oE="ASCIINUMERICAL",aE="ALPHANUMERICAL",nl="LOCALHOST",sm="TLD",om="UTLD",Zc="SCHEME",oo="SLASH_SCHEME",Gm="NUM",am="WS",Ym="NL",Ha="OPENBRACE",Ia="CLOSEBRACE",vu="OPENBRACKET",bu="CLOSEBRACKET",xu="OPENPAREN",Su="CLOSEPAREN",wu="OPENANGLEBRACKET",Eu="CLOSEANGLEBRACKET",ku="FULLWIDTHLEFTPAREN",Tu="FULLWIDTHRIGHTPAREN",Cu="LEFTCORNERBRACKET",_u="RIGHTCORNERBRACKET",Au="LEFTWHITECORNERBRACKET",Mu="RIGHTWHITECORNERBRACKET",Ou="FULLWIDTHLESSTHAN",Nu="FULLWIDTHGREATERTHAN",Ru="AMPERSAND",Du="APOSTROPHE",ju="ASTERISK",Jr="AT",Lu="BACKSLASH",zu="BACKTICK",Bu="CARET",ei="COLON",Wm="COMMA",Uu="DOLLAR",Bn="DOT",Pu="EQUALS",Jm="EXCLAMATION",yn="HYPHEN",$a="PERCENT",Hu="PIPE",Iu="PLUS",$u="POUND",qa="QUERY",Qm="QUOTE",lE="FULLWIDTHMIDDLEDOT",Xm="SEMI",Un="SLASH",Va="TILDE",qu="UNDERSCORE",cE="EMOJI",Vu="SYM";var uE=Object.freeze({__proto__:null,ALPHANUMERICAL:aE,AMPERSAND:Ru,APOSTROPHE:Du,ASCIINUMERICAL:oE,ASTERISK:ju,AT:Jr,BACKSLASH:Lu,BACKTICK:zu,CARET:Bu,CLOSEANGLEBRACKET:Eu,CLOSEBRACE:Ia,CLOSEBRACKET:bu,CLOSEPAREN:Su,COLON:ei,COMMA:Wm,DOLLAR:Uu,DOT:Bn,EMOJI:cE,EQUALS:Pu,EXCLAMATION:Jm,FULLWIDTHGREATERTHAN:Nu,FULLWIDTHLEFTPAREN:ku,FULLWIDTHLESSTHAN:Ou,FULLWIDTHMIDDLEDOT:lE,FULLWIDTHRIGHTPAREN:Tu,HYPHEN:yn,LEFTCORNERBRACKET:Cu,LEFTWHITECORNERBRACKET:Au,LOCALHOST:nl,NL:Ym,NUM:Gm,OPENANGLEBRACKET:wu,OPENBRACE:Ha,OPENBRACKET:vu,OPENPAREN:xu,PERCENT:$a,PIPE:Hu,PLUS:Iu,POUND:$u,QUERY:qa,QUOTE:Qm,RIGHTCORNERBRACKET:_u,RIGHTWHITECORNERBRACKET:Mu,SCHEME:Zc,SEMI:Xm,SLASH:Un,SLASH_SCHEME:oo,SYM:Vu,TILDE:Va,TLD:sm,UNDERSCORE:qu,UTLD:om,UWORD:im,WORD:ur,WS:am});const ar=/[a-z]/,Ca=new RegExp("\\p{L}","u"),pp=new RegExp("\\p{Emoji}","u"),lr=/\d/,mp=/\s/,X1="\r",gp=`
`,Yj="️",Wj="‍",yp="￼";let qc=null,Vc=null;function Jj(n=[]){const e={};Vt.groups=e;const t=new Vt;qc==null&&(qc=Z1($j)),Vc==null&&(Vc=Z1(qj)),F(t,"'",Du),F(t,"{",Ha),F(t,"}",Ia),F(t,"[",vu),F(t,"]",bu),F(t,"(",xu),F(t,")",Su),F(t,"<",wu),F(t,">",Eu),F(t,"（",ku),F(t,"）",Tu),F(t,"「",Cu),F(t,"」",_u),F(t,"『",Au),F(t,"』",Mu),F(t,"＜",Ou),F(t,"＞",Nu),F(t,"&",Ru),F(t,"*",ju),F(t,"@",Jr),F(t,"`",zu),F(t,"^",Bu),F(t,":",ei),F(t,",",Wm),F(t,"$",Uu),F(t,".",Bn),F(t,"=",Pu),F(t,"!",Jm),F(t,"-",yn),F(t,"%",$a),F(t,"|",Hu),F(t,"+",Iu),F(t,"#",$u),F(t,"?",qa),F(t,'"',Qm),F(t,"/",Un),F(t,";",Xm),F(t,"~",Va),F(t,"_",qu),F(t,"\\",Lu),F(t,"・",lE);const r=We(t,lr,Gm,{[em]:!0});We(r,lr,r);const s=We(r,ar,oE,{[Pa]:!0}),o=We(r,Ca,aE,{[Na]:!0}),l=We(t,ar,ur,{[tm]:!0});We(l,lr,s),We(l,ar,l),We(s,lr,s),We(s,ar,s);const u=We(t,Ca,im,{[nm]:!0});We(u,ar),We(u,lr,o),We(u,Ca,u),We(o,lr,o),We(o,ar),We(o,Ca,o);const f=F(t,gp,Ym,{[hp]:!0}),h=F(t,X1,am,{[hp]:!0}),m=We(t,mp,am,{[hp]:!0});F(t,yp,m),F(h,gp,f),F(h,yp,m),We(h,mp,m),F(m,X1),F(m,gp),We(m,mp,m),F(m,yp,m);const y=We(t,pp,cE,{[sE]:!0});F(y,"#"),We(y,pp,y),F(y,Yj,y);const v=F(y,Wj);F(v,"#"),We(v,pp,y);const b=[[ar,l],[lr,s]],x=[[ar,null],[Ca,u],[lr,o]];for(let E=0;E<qc.length;E++)Fr(t,qc[E],sm,ur,b);for(let E=0;E<Vc.length;E++)Fr(t,Vc[E],om,im,x);Ii(sm,{tld:!0,ascii:!0},e),Ii(om,{utld:!0,alpha:!0},e),Fr(t,"file",Zc,ur,b),Fr(t,"mailto",Zc,ur,b),Fr(t,"http",oo,ur,b),Fr(t,"https",oo,ur,b),Fr(t,"ftp",oo,ur,b),Fr(t,"ftps",oo,ur,b),Ii(Zc,{scheme:!0,ascii:!0},e),Ii(oo,{slashscheme:!0,ascii:!0},e),n=n.sort((E,T)=>E[0]>T[0]?1:-1);for(let E=0;E<n.length;E++){const T=n[E][0],N=n[E][1]?{[Vj]:!0}:{[Kj]:!0};T.indexOf("-")>=0?N[rm]=!0:ar.test(T)?lr.test(T)?N[Pa]=!0:N[tm]=!0:N[em]=!0,Q1(t,T,T,N)}return Q1(t,"localhost",nl,{ascii:!0}),t.jd=new Vt(Vu),{start:t,tokens:Object.assign({groups:e},uE)}}function dE(n,e){const t=Qj(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let o=0,l=0;for(;l<r;){let u=n,f=null,h=0,m=null,y=-1,v=-1;for(;l<r&&(f=u.go(t[l]));)u=f,u.accepts()?(y=0,v=0,m=u):y>=0&&(y+=t[l].length,v++),h+=t[l].length,o+=t[l].length,l++;o-=y,l-=v,h-=y,s.push({t:m.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function Qj(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),o,l=s<55296||s>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Fr(n,e,t,r,s){let o;const l=e.length;for(let u=0;u<l-1;u++){const f=e[u];n.j[f]?o=n.j[f]:(o=new Vt(r),o.jr=s.slice(),n.j[f]=o),n=o}return o=new Vt(t),o.jr=s.slice(),n.j[e[l-1]]=o,o}function Z1(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let o=0;for(;s.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const rl={defaultProtocol:"http",events:null,format:ex,formatHref:ex,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Zm(n,e=null){let t=Object.assign({},rl);n&&(t=Object.assign(t,n instanceof Zm?n.o:n));const r=t.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}Zm.prototype={o:rl,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:rl[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function ex(n){return n}function fE(n,e){this.t="token",this.v=n,this.tk=e}fE.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=rl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),o=this.toFormattedString(n),l={},u=n.get("className",t,e),f=n.get("target",t,e),h=n.get("rel",t,e),m=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),f&&(l.target=f),h&&(l.rel=h),m&&Object.assign(l,m),{tagName:s,attributes:l,content:o,eventListeners:y}}};function fd(n,e){class t extends fE{constructor(s,o){super(s,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const tx=fd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),nx=fd("text"),Xj=fd("nl"),Kc=fd("url",{isLink:!0,toHref(n=rl.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==nl&&n[1].t===ei}}),gn=n=>new Vt(n);function Zj({groups:n}){const e=n.domain.concat([Ru,ju,Jr,Lu,zu,Bu,Uu,Pu,yn,Gm,$a,Hu,Iu,$u,Un,Vu,Va,qu]),t=[Du,ei,Wm,Bn,Jm,$a,qa,Qm,Xm,wu,Eu,Ha,Ia,bu,vu,xu,Su,ku,Tu,Cu,_u,Au,Mu,Ou,Nu],r=[Ru,Du,ju,Lu,zu,Bu,Uu,Pu,yn,Ha,Ia,$a,Hu,Iu,$u,qa,Un,Vu,Va,qu],s=gn(),o=F(s,Va);ve(o,r,o),ve(o,n.domain,o);const l=gn(),u=gn(),f=gn();ve(s,n.domain,l),ve(s,n.scheme,u),ve(s,n.slashscheme,f),ve(l,r,o),ve(l,n.domain,l);const h=F(l,Jr);F(o,Jr,h),F(u,Jr,h),F(f,Jr,h);const m=F(o,Bn);ve(m,r,o),ve(m,n.domain,o);const y=gn();ve(h,n.domain,y),ve(y,n.domain,y);const v=F(y,Bn);ve(v,n.domain,y);const b=gn(tx);ve(v,n.tld,b),ve(v,n.utld,b),F(h,nl,b);const x=F(y,yn);F(x,yn,x),ve(x,n.domain,y),ve(b,n.domain,y),F(b,Bn,v),F(b,yn,x);const E=F(b,ei);ve(E,n.numeric,tx);const T=F(l,yn),C=F(l,Bn);F(T,yn,T),ve(T,n.domain,l),ve(C,r,o),ve(C,n.domain,l);const N=gn(Kc);ve(C,n.tld,N),ve(C,n.utld,N),ve(N,n.domain,l),ve(N,r,o),F(N,Bn,C),F(N,yn,T),F(N,Jr,h);const O=F(N,ei),V=gn(Kc);ve(O,n.numeric,V);const U=gn(Kc),G=gn();ve(U,e,U),ve(U,t,G),ve(G,e,U),ve(G,t,G),F(N,Un,U),F(V,Un,U);const Y=F(u,ei),J=F(f,ei),le=F(J,Un),ke=F(le,Un);ve(u,n.domain,l),F(u,Bn,C),F(u,yn,T),ve(f,n.domain,l),F(f,Bn,C),F(f,yn,T),ve(Y,n.domain,U),F(Y,Un,U),F(Y,qa,U),ve(ke,n.domain,U),ve(ke,e,U),F(ke,Un,U);const ot=[[Ha,Ia],[vu,bu],[xu,Su],[wu,Eu],[ku,Tu],[Cu,_u],[Au,Mu],[Ou,Nu]];for(let Fe=0;Fe<ot.length;Fe++){const[on,ue]=ot[Fe],pe=F(U,on);F(G,on,pe),F(pe,ue,U);const P=gn(Kc);ve(pe,e,P);const W=gn();ve(pe,t),ve(P,e,P),ve(P,t,W),ve(W,e,P),ve(W,t,W),F(P,ue,U),F(W,ue,U)}return F(s,nl,N),F(s,Ym,Xj),{start:s,tokens:uE}}function e4(n,e,t){let r=t.length,s=0,o=[],l=[];for(;s<r;){let u=n,f=null,h=null,m=0,y=null,v=-1;for(;s<r&&!(f=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=f||u.go(t[s].t));)f=null,u=h,u.accepts()?(v=0,y=u):v>=0&&v++,s++,m++;if(v<0)s-=m,s<r&&(l.push(t[s]),s++);else{l.length>0&&(o.push(vp(nx,e,l)),l=[]),s-=v,m-=v;const b=y.t,x=t.slice(s-m,s);o.push(vp(b,e,x))}}return l.length>0&&o.push(vp(nx,e,l)),o}function vp(n,e,t){const r=t[0].s,s=t[t.length-1].e,o=e.slice(r,s);return new n(o,t)}const t4=typeof console<"u"&&console&&console.warn||(()=>{}),n4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",He={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function r4(){return Vt.groups={},He.scanner=null,He.parser=null,He.tokenQueue=[],He.pluginQueue=[],He.customSchemes=[],He.initialized=!1,He}function rx(n,e=!1){if(He.initialized&&t4(`linkifyjs: already initialized - will not register custom scheme "${n}" ${n4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);He.customSchemes.push([n,e])}function i4(){He.scanner=Jj(He.customSchemes);for(let n=0;n<He.tokenQueue.length;n++)He.tokenQueue[n][1]({scanner:He.scanner});He.parser=Zj(He.scanner.tokens);for(let n=0;n<He.pluginQueue.length;n++)He.pluginQueue[n][1]({scanner:He.scanner,parser:He.parser});return He.initialized=!0,He}function eg(n){return He.initialized||i4(),e4(He.parser.start,n,dE(He.scanner.start,n))}eg.scan=dE;function hE(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Zm(t),s=eg(n),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}var tg="[\0-   ᠎ -\u2029 　]",s4=new RegExp(tg),o4=new RegExp(`${tg}$`),a4=new RegExp(tg,"g");function l4(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function c4(n){return new Qe({key:new bt("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:l}=r,u=Tw(t.doc,[...e]);if(jw(u).forEach(({newRange:h})=>{const m=dR(r.doc,h,b=>b.isTextblock);let y,v;if(m.length>1)y=m[0],v=r.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(m.length){const b=r.doc.textBetween(h.from,h.to," "," ");if(!o4.test(b))return;y=m[0],v=r.doc.textBetween(y.pos,h.to,void 0," ")}if(y&&v){const b=v.split(s4).filter(Boolean);if(b.length<=0)return!1;const x=b[b.length-1],E=y.pos+v.lastIndexOf(x);if(!x)return!1;const T=eg(x).map(C=>C.toObject(n.defaultProtocol));if(!l4(T))return!1;T.filter(C=>C.isLink).map(C=>({...C,from:E+C.start+1,to:E+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{Vm(C.from,C.to,r.doc).some(N=>N.mark.type===n.type)||l.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!l.steps.length)return l}})}function u4(n){return new Qe({key:new bt("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{let m=r.target;const y=[];for(;m.nodeName!=="DIV";)y.push(m),m=m.parentNode;l=y.find(v=>v.nodeName==="A")}if(!l)return!1;const u=Dw(e.state,n.type.name),f=(s=l?.href)!=null?s:u.href,h=(o=l?.target)!=null?o:u.target;return n.enableClickSelection&&n.editor.commands.extendMarkRange(n.type.name),l&&f?(window.open(f,h),!0):!1}}})}function d4(n){return new Qe({key:new bt("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const f=hE(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!f?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}function Di(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(a4,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var pE=ts.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){rx(n);return}rx(n.scheme,n.optionalSlashes)})},onDestroy(){r4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Di(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Di(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Di(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",rt(this.options.HTMLAttributes,n),0]:["a",rt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Di(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!Di(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qi({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=hE(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!Di(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(c4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Di(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(u4({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(d4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),f4=pE,h4=Object.defineProperty,p4=(n,e)=>{for(var t in e)h4(n,t,{get:e[t],enumerable:!0})},m4="listItem",ix="textStyle",sx=/^\s*([-+*])\s$/,mE=sn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(m4,this.editor.getAttributes(ix)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=yo({find:sx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=yo({find:sx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ix),editor:this.editor})),[n]}}),gE=sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",rt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),g4={};p4(g4,{findListItemPos:()=>pl,getNextListDepth:()=>ng,handleBackspace:()=>lm,handleDelete:()=>cm,hasListBefore:()=>yE,hasListItemAfter:()=>y4,hasListItemBefore:()=>vE,listItemHasSubList:()=>bE,nextListIsDeeper:()=>xE,nextListIsHigher:()=>SE});var pl=(n,e)=>{const{$from:t}=e.selection,r=it(n,e.schema);let s=null,o=t.depth,l=t.pos,u=null;for(;o>0&&u===null;)s=t.node(o),s.type===r?u=o:(o-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},ng=(n,e)=>{const t=pl(n,e);if(!t)return!1;const[,r]=SR(e,n,t.$pos.pos+4);return r},yE=(n,e,t)=>{const{$anchor:r}=n.selection,s=Math.max(0,r.pos-2),o=n.doc.resolve(s).node();return!(!o||!t.includes(o.type.name))},vE=(n,e)=>{var t;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((t=s.nodeBefore)==null?void 0:t.type.name)!==n)},bE=(n,e,t)=>{if(!t)return!1;const r=it(n,e.schema);let s=!1;return t.descendants(o=>{o.type===r&&(s=!0)}),s},lm=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ci(n.state,e)&&yE(n.state,e,t)){const{$anchor:u}=n.state.selection,f=n.state.doc.resolve(u.before()-1),h=[];f.node().descendants((v,b)=>{v.type.name===e&&h.push({node:v,pos:b})});const m=h.at(-1);if(!m)return!1;const y=n.state.doc.resolve(f.start()+m.pos+1);return n.chain().cut({from:u.start()-1,to:u.end()+1},y.end()).joinForward().run()}if(!ci(n.state,e)||!TR(n.state))return!1;const r=pl(e,n.state);if(!r)return!1;const o=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=bE(e,n.state,o);return vE(e,n.state)&&!l?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},xE=(n,e)=>{const t=ng(n,e),r=pl(n,e);return!r||!t?!1:t>r.depth},SE=(n,e)=>{const t=ng(n,e),r=pl(n,e);return!r||!t?!1:t<r.depth},cm=(n,e)=>{if(!ci(n.state,e)||!kR(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:s}=t;return!t.empty&&r.sameParent(s)?!1:xE(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():SE(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},y4=(n,e)=>{var t;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((t=s.nodeAfter)==null?void 0:t.type.name)!==n)},wE=st.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&cm(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&cm(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&lm(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&lm(n,t,r)&&(e=!0)}),e}}}}),v4="listItem",ox="textStyle",ax=/^(\d+)\.\s$/,EE=sn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",rt(this.options.HTMLAttributes,t),0]:["ol",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(v4,this.editor.getAttributes(ox)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=yo({find:ax,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=yo({find:ax,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ox)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),b4=/^\s*(\[([( |x])?\])\s$/,x4=sn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",rt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),f=document.createElement("div"),h=m=>{var y,v;u.ariaLabel=((v=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:v.call(y,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};return h(n),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:y}=m.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const b=t();if(typeof b!="number")return!1;const x=v.doc.nodeAt(b);return v.setNodeMarkup(b,void 0,{...x?.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,y)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,y])=>{s.setAttribute(m,y)}),s.dataset.checked=n.attrs.checked,u.checked=n.attrs.checked,o.append(u,l),s.append(o,f),Object.entries(e).forEach(([m,y])=>{s.setAttribute(m,y)}),{dom:s,contentDOM:f,update:m=>m.type!==this.type?!1:(s.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,h(m),!0)}}},addInputRules(){return[yo({find:b4,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),S4=sn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",rt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});st.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(mE.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(gE.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(wE.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(EE.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(x4.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(S4.configure(this.options.taskList)),n}});var w4=sn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),E4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,k4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,T4=ts.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[go({find:E4,type:this.type})]},addPasteRules(){return[Qi({find:k4,type:this.type})]}}),C4=sn.create({name:"text",group:"inline"}),kE=ts.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),_4=kE;function A4(n={}){return new Qe({view(e){return new M4(e,n)}})}class M4{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=l=>{this[s](l)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),l=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(t){let y=e.nodeBefore,v=e.nodeAfter;if(y||v){let b=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(b){let x=b.getBoundingClientRect(),E=y?x.bottom:x.top;y&&v&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let T=this.width/2*u;r={left:x.left,right:x.right,top:E-T,bottom:E+T}}}}if(!r){let y=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:y.left-v,right:y.left+v,top:y.top,bottom:y.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,m=-pageYOffset;else{let y=f.getBoundingClientRect(),v=y.width/f.offsetWidth,b=y.height/f.offsetHeight;h=y.left-f.scrollLeft*v,m=y.top-f.scrollTop*b}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-m)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=ES(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Je extends ye{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Je.valid(r)?new Je(r):ye.near(r)}content(){return X.empty}eq(e){return e instanceof Je&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Je(e.resolve(t.pos))}getBookmark(){return new rg(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!O4(e)||!N4(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Je.valid(e))return e;let s=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let f=e.doc.resolve(s);if(Je.valid(f))return f}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!re.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=l,s+=t;let u=e.doc.resolve(s);if(Je.valid(u))return u}return null}}}Je.prototype.visible=!1;Je.findFrom=Je.findGapCursorFrom;ye.jsonID("gapcursor",Je);class rg{constructor(e){this.pos=e}map(e){return new rg(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Je.valid(t)?new Je(t):ye.near(t)}}function O4(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function N4(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function R4(){return new Qe({props:{decorations:z4,createSelectionBetween(n,e,t){return e.pos==t.pos&&Je.valid(t)?new Je(t):null},handleClick:j4,handleKeyDown:D4,handleDOMEvents:{beforeinput:L4}}})}const D4=dw({ArrowLeft:Fc("horiz",-1),ArrowRight:Fc("horiz",1),ArrowUp:Fc("vert",-1),ArrowDown:Fc("vert",1)});function Fc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let l=r.selection,u=e>0?l.$to:l.$from,f=l.empty;if(l instanceof fe){if(!o.endOfTextblock(t)||u.depth==0)return!1;f=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Je.findGapCursorFrom(u,e,f);return h?(s&&s(r.tr.setSelection(new Je(h))),!0):!1}}function j4(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Je.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&re.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Je(r))),!0)}function L4(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Je))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=K.empty;for(let l=r.length-1;l>=0;l--)s=K.from(r[l].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new X(s,0,0));return o.setSelection(fe.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function z4(n){if(!(n.selection instanceof Je))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ve.create(n.doc,[jt.widget(n.selection.head,e,{key:"gapcursor"})])}var Ku=200,vt=function(){};vt.prototype.append=function(e){return e.length?(e=vt.from(e),!this.length&&e||e.length<Ku&&this.leafAppend(e)||this.length<Ku&&e.leafPrepend(this)||this.appendInner(e)):this};vt.prototype.prepend=function(e){return e.length?vt.from(e).append(this):this};vt.prototype.appendInner=function(e){return new B4(this,e)};vt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?vt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};vt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};vt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};vt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,l){return s.push(e(o,l))},t,r),s};vt.from=function(e){return e instanceof vt?e:e&&e.length?new TE(e):vt.empty};var TE=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,l,u){for(var f=o;f<l;f++)if(s(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,l,u){for(var f=o-1;f>=l;f--)if(s(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Ku)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Ku)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(vt);vt.empty=new TE([]);var B4=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(vt);const U4=500;class Cn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let l=e.tr,u,f,h=[],m=[];return this.items.forEach((y,v)=>{if(!y.step){s||(s=this.remapping(r,v+1),o=s.maps.length),o--,m.push(y);return}if(s){m.push(new Pn(y.map));let b=y.step.map(s.slice(o)),x;b&&l.maybeStep(b).doc&&(x=l.mapping.maps[l.mapping.maps.length-1],h.push(new Pn(x,void 0,void 0,h.length+m.length))),o--,x&&s.appendMap(x,o)}else l.maybeStep(y.step);if(y.selection)return u=s?y.selection.map(s.slice(o)):y.selection,f=new Cn(this.items.slice(0,r).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,t,r,s){let o=[],l=this.eventCount,u=this.items,f=!s&&u.length?u.get(u.length-1):null;for(let m=0;m<e.steps.length;m++){let y=e.steps[m].invert(e.docs[m]),v=new Pn(e.mapping.maps[m],y,t),b;(b=f&&f.merge(v))&&(v=b,m?o.pop():u=u.slice(0,u.length-1)),o.push(v),t&&(l++,t=void 0),s||(f=v)}let h=l-r.depth;return h>H4&&(u=P4(u,h),l-=h),new Cn(u.append(o),l)}remapping(e,t){let r=new Wa;return this.items.forEach((s,o)=>{let l=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new Cn(this.items.append(e.map(t=>new Pn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},s);let f=t;this.items.forEach(v=>{let b=o.getMirror(--f);if(b==null)return;l=Math.min(l,b);let x=o.maps[b];if(v.step){let E=e.steps[b].invert(e.docs[b]),T=v.selection&&v.selection.map(o.slice(f+1,b));T&&u++,r.push(new Pn(x,E,T))}else r.push(new Pn(x))},s);let h=[];for(let v=t;v<l;v++)h.push(new Pn(o.maps[v]));let m=this.items.slice(0,s).append(h).append(r),y=new Cn(m,u);return y.emptyItemCount()>U4&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(t.slice(r)),h=f&&f.getMap();if(r--,h&&t.appendMap(h,r),f){let m=l.selection&&l.selection.map(t.slice(r));m&&o++;let y=new Pn(h.invert(),f,m),v,b=s.length-1;(v=s.length&&s[b].merge(y))?s[b]=v:s.push(y)}}else l.map&&r--},this.items.length,0),new Cn(vt.from(s.reverse()),o)}}Cn.empty=new Cn(vt.empty,0);function P4(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class Pn{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Pn(t.getMap().invert(),t,this.selection)}}}class Qr{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const H4=20;function I4(n,e,t,r){let s=t.getMeta(Fi),o;if(s)return s.historyState;t.getMeta(V4)&&(n=new Qr(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Fi))return l.getMeta(Fi).redo?new Qr(n.done.addTransform(t,void 0,r,eu(e)),n.undone,lx(t.mapping.maps),n.prevTime,n.prevComposition):new Qr(n.done,n.undone.addTransform(t,void 0,r,eu(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),f=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!$4(t,n.prevRanges)),h=l?bp(n.prevRanges,t.mapping):lx(t.mapping.maps);return new Qr(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,eu(e)),Cn.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new Qr(n.done.rebased(t,o),n.undone.rebased(t,o),bp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Qr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),bp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function $4(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function lx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,l)=>e.push(o,l));return e}function bp(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function q4(n,e,t){let r=eu(e),s=Fi.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),f=new Qr(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Fi,{redo:t,historyState:f})}let xp=!1,cx=null;function eu(n){let e=n.plugins;if(cx!=e){xp=!1,cx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){xp=!0;break}}return xp}const Fi=new bt("history"),V4=new bt("closeHistory");function K4(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Qe({key:Fi,state:{init(){return new Qr(Cn.empty,Cn.empty,null,0,-1)},apply(e,t,r){return I4(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?_E:r=="historyRedo"?AE:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function CE(n,e){return(t,r)=>{let s=Fi.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=q4(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const _E=CE(!1,!0),AE=CE(!0,!0);st.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new Qe({key:new bt("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const s=this.options.limit;if(s==null||s===0){n=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const l=o-s,u=0,f=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,f);return n=!0,h}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,f=o-r,h=u-f,m=u;return e.deleteRange(h,m),!(this.storage.characters({node:e.doc})>r)}})]}});var F4=st.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[A4(this.options)]}});st.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Qe({key:new bt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:s}=e,o=[];if(!t||!r)return Ve.create(n,[]);let l=0;this.options.mode==="deepest"&&n.descendants((f,h)=>{if(f.isText)return;if(!(s>=h&&s<=h+f.nodeSize-1))return!1;l+=1});let u=0;return n.descendants((f,h)=>{if(f.isText||!(s>=h&&s<=h+f.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(jt.node(h,h+f.nodeSize,{class:this.options.className}))}),Ve.create(n,o)}}})]}});var G4=st.create({name:"gapCursor",addProseMirrorPlugins(){return[R4()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ne(ne(n,"allowGapCursor",t)))!=null?e:null}}});st.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Qe({key:new bt("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,u)=>{const f=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&cd(l);if((f||!this.options.showOnlyCurrent)&&h){const m=[this.options.emptyNodeClass];o&&m.push(this.options.emptyEditorClass);const y=jt.node(u,u+l.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:f}):this.options.placeholder});s.push(y)}return this.options.includeChildren}),Ve.create(n,s)}}})]}});st.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new Qe({key:new bt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||zw(t.selection)||n.view.dragging?null:Ve.create(t.doc,[jt.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function ux({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var Y4=st.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const n=new bt(this.name),e=Object.entries(this.editor.schema.nodes).map(([,t])=>t).filter(t=>(this.options.notAfter||[]).concat(this.options.node).includes(t.name));return[new Qe({key:n,appendTransaction:(t,r,s)=>{const{doc:o,tr:l,schema:u}=s,f=n.getState(s),h=o.content.size,m=u.nodes[this.options.node];if(f)return l.insert(h,m.create())},state:{init:(t,r)=>{const s=r.tr.doc.lastChild;return!ux({node:s,types:e})},apply:(t,r)=>{if(!t.docChanged)return r;const s=t.doc.lastChild;return!ux({node:s,types:e})}}})]}}),W4=st.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>_E(n,e),redo:()=>({state:n,dispatch:e})=>AE(n,e)}},addProseMirrorPlugins(){return[K4(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),J4=st.create({name:"starterKit",addExtensions(){var n,e,t,r;const s=[];return this.options.bold!==!1&&s.push(rE.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(nE.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(mE.configure(this.options.bulletList)),this.options.code!==!1&&s.push(Mj.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(Rj.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(Dj.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(F4.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(G4.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(jj.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(Lj.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(W4.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(zj.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(iE.configure(this.options.italic)),this.options.listItem!==!1&&s.push(gE.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(wE.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&s.push(pE.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(EE.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(w4.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(T4.configure(this.options.strike)),this.options.text!==!1&&s.push(C4.configure(this.options.text)),this.options.underline!==!1&&s.push(kE.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&s.push(Y4.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),Q4=J4;const X4=()=>{const[n,e]=R.useState(""),[t,r]=R.useState(!1),[s,o]=R.useState(null),l=R.useCallback(()=>{const h=window.getSelection();if(h&&h.toString().trim().length>0){const m=h.toString().trim();e(m),r(!0),h.rangeCount>0&&o(h.getRangeAt(0).cloneRange())}else e(""),r(!1),o(null)},[]),u=R.useCallback(h=>{if(n&&h){const m=`> ${n}

`;h.chain().focus().insertContent(m).run(),e(""),r(!1),o(null)}},[n]),f=R.useCallback(()=>{e(""),r(!1),o(null)},[]);return{selectedText:n,citationMode:t,handleTextSelection:l,insertCitation:u,clearSelection:f}},Z4=({children:n,onTextSelect:e})=>(R.useEffect(()=>{const t=()=>{const r=window.getSelection();r&&r.toString().trim()&&e()};return document.addEventListener("mouseup",t),document.addEventListener("keyup",t),()=>{document.removeEventListener("mouseup",t),document.removeEventListener("keyup",t)}},[e]),w.jsx("div",{className:"selectable-content",children:n})),ME=({content:n,onChange:e,placeholder:t="Write your content...",className:r="",minHeight:s="150px"})=>{const{selectedText:o,citationMode:l,insertCitation:u,clearSelection:f}=X4(),h=gj({extensions:[Q4,Sj.configure({HTMLAttributes:{class:"border-l-4 border-primary-500 pl-4 italic text-gray-700 my-4"}}),f4.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary-600 hover:text-primary-800 underline"}}),Cj,Ij,_4],content:n,onUpdate:({editor:v})=>{e(v.getHTML())},editorProps:{attributes:{class:`prose prose-sm max-w-none focus:outline-none p-4 ${r}`,style:`min-height: ${s}`}}});if(!h)return null;const m=()=>{const v=window.prompt("Enter URL:");v&&h.chain().focus().extendMarkRange("link").setLink({href:v}).run()},y=()=>{h.chain().focus().extendMarkRange("link").unsetLink().run()};return w.jsxs("div",{className:"relative border border-gray-300 rounded-lg bg-white",children:[w.jsxs("div",{className:"border-b border-gray-200 p-3 flex items-center gap-1 flex-wrap",children:[w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleBold().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("bold")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Bold",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M3 5a1 1 0 011-1h5.5a2.5 2.5 0 010 5H4v2.5h4.5a2.5 2.5 0 010 5H4a1 1 0 01-1-1V5z"})})}),w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleItalic().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("italic")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Italic",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M8 5v14l4-2V9h5l-2-4H8z"})})}),w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleUnderline().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("underline")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Underline",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M5 3v8c0 2.761 2.239 5 5 5s5-2.239 5-5V3h-2v8c0 1.657-1.343 3-3 3s-3-1.343-3-3V3H5zM3 17h14v2H3v-2z"})})}),w.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleBlockquote().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("blockquote")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Quote",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M3 17V7c0-1.1.9-2 2-2h3l-2 4v8H3zM14 17V7c0-1.1.9-2 2-2h3l-2 4v8h-3z"})})}),w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleBulletList().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("bulletList")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Bullet List",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M3 4a1 1 0 100 2 1 1 0 000-2zM6 4h11a1 1 0 110 2H6a1 1 0 110-2zM3 9a1 1 0 100 2 1 1 0 000-2zM6 9h11a1 1 0 110 2H6a1 1 0 110-2zM3 14a1 1 0 100 2 1 1 0 000-2zM6 14h11a1 1 0 110 2H6a1 1 0 110-2z"})})}),w.jsx("button",{type:"button",onClick:()=>h.chain().focus().toggleOrderedList().run(),className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("orderedList")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Numbered List",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M3 4a1 1 0 100 2 1 1 0 000-2zM6 4h11a1 1 0 110 2H6a1 1 0 110-2zM3 9a1 1 0 100 2 1 1 0 000-2zM6 9h11a1 1 0 110 2H6a1 1 0 110-2zM3 14a1 1 0 100 2 1 1 0 000-2zM6 14h11a1 1 0 110 2H6a1 1 0 110-2z"})})}),w.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),w.jsx("button",{type:"button",onClick:m,className:`p-2 rounded hover:bg-gray-100 transition-colors ${h.isActive("link")?"bg-gray-200 text-primary-600":"text-gray-600"}`,title:"Add Link",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z"})})}),h.isActive("link")&&w.jsx("button",{type:"button",onClick:y,className:"p-2 rounded hover:bg-gray-100 transition-colors text-red-600",title:"Remove Link",children:w.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M6.293 6.293a1 1 0 011.414 0L10 8.586l2.293-2.293a1 1 0 111.414 1.414L11.414 10l2.293 2.293a1 1 0 01-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 01-1.414-1.414L8.586 10 6.293 7.707a1 1 0 010-1.414z"})})}),l&&w.jsxs("div",{className:"flex items-center ml-2",children:[w.jsx("div",{className:"w-px h-6 bg-gray-300 mr-2"}),w.jsxs("button",{type:"button",onClick:()=>u(h),className:"px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors",title:"Quote Selected Text",children:[w.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M3 17V7c0-1.1.9-2 2-2h3l-2 4v8H3zM14 17V7c0-1.1.9-2 2-2h3l-2 4v8h-3z"})}),"Quote"]})]})]}),w.jsxs("div",{className:"relative",children:[w.jsx(cj,{editor:h,className:"focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-opacity-50 rounded-b-lg overflow-hidden"}),h.isEmpty&&w.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:t})]}),o&&w.jsx("div",{className:"absolute top-2 right-2 bg-primary-600 text-white text-xs px-2 py-1 rounded shadow-lg z-10",children:w.jsxs("div",{className:"flex items-center",children:[w.jsxs("span",{className:"mr-2",children:['Text selected: "',o.substring(0,30),'..."']}),w.jsx("button",{type:"button",onClick:f,className:"hover:text-gray-200 transition-colors",title:"Clear selection",children:w.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M6.293 6.293a1 1 0 011.414 0L10 8.586l2.293-2.293a1 1 0 111.414 1.414L11.414 10l2.293 2.293a1 1 0 01-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 01-1.414-1.414L8.586 10 6.293 7.707a1 1 0 010-1.414z"})})})]})})]})};class OE{async getTherapists(){console.log("🔧 TherapistsService: Getting all therapists...");const{data:e,error:t}=await de.from("therapists").select("*").order("last_name",{ascending:!0}).order("first_name",{ascending:!0});if(t)throw console.error("❌ TherapistsService: Error fetching therapists:",t),t;return console.log("✅ TherapistsService: Fetched therapists:",e?.length||0,"records"),e||[]}async searchTherapists(e){if(!e.trim())return this.getTherapists();const{data:t,error:r}=await de.from("therapists").select("*").or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,institution.ilike.%${e}%,designation.ilike.%${e}%`).order("last_name",{ascending:!0}).order("first_name",{ascending:!0});if(r)throw console.error("Error searching therapists:",r),r;return t||[]}async getTherapistsByCanton(e){const{data:t,error:r}=await de.from("therapists").select("*").eq("canton",e).order("last_name",{ascending:!0}).order("first_name",{ascending:!0});if(r)throw console.error("Error fetching therapists by canton:",r),r;return t||[]}async createTherapist(e){console.log("🔧 TherapistsService: Creating therapist with data:",e);const{data:{user:t},error:r}=await de.auth.getUser();if(r)throw console.error("❌ TherapistsService: Auth error:",r),new Error("Authentication failed: "+r.message);if(!t)throw console.error("❌ TherapistsService: No authenticated user"),new Error("User not authenticated");console.log("👤 TherapistsService: Authenticated user:",t.email,"ID:",t.id);const s={form_of_address:e.form_of_address,first_name:e.first_name.trim(),last_name:e.last_name.trim(),institution:e.institution?.trim()||null,designation:e.designation,description:e.description?.trim()||null,canton:e.canton||null};console.log("📤 TherapistsService: Inserting data:",s);const{data:o,error:l}=await de.from("therapists").insert([s]).select().single();if(l)throw console.error("❌ TherapistsService: Database error:",l),console.error("❌ TherapistsService: Error details:",{code:l.code,message:l.message,details:l.details,hint:l.hint}),new Error("Database error: "+l.message);return console.log("✅ TherapistsService: Therapist created successfully:",o),o}async updateTherapist(e,t){const{data:r,error:s}=await de.from("therapists").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating therapist:",s),s;return r}async getTherapist(e){const{data:t,error:r}=await de.from("therapists").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Error fetching therapist:",r),r}return t}formatTherapistName(e){return[e.form_of_address,e.first_name,e.last_name].filter(Boolean).join(" ")}formatTherapistDisplay(e){const t=this.formatTherapistName(e),r=[];return e.designation&&r.push(e.designation),e.institution&&r.push(e.institution),e.canton&&r.push(e.canton),r.length>0?`${t} (${r.join(", ")})`:t}}const e3=({isOpen:n,onClose:e,onTherapistCreated:t,preselectedCanton:r=""})=>{const[s,o]=R.useState({canton:r,form_of_address:"",first_name:"",last_name:"",designation:"",institution:""}),[l,u]=R.useState(!1),[f,h]=R.useState(""),m=new OE;R.useEffect(()=>{o(N=>({...N,canton:r}))},[r]);const y=[{code:"",name:"Kanton auswählen"},{code:"AG",name:"Aargau"},{code:"AI",name:"Appenzell Innerrhoden"},{code:"AR",name:"Appenzell Ausserrhoden"},{code:"BE",name:"Bern"},{code:"BL",name:"Basel-Landschaft"},{code:"BS",name:"Basel-Stadt"},{code:"FR",name:"Freiburg"},{code:"GE",name:"Genf"},{code:"GL",name:"Glarus"},{code:"GR",name:"Graubünden"},{code:"JU",name:"Jura"},{code:"LU",name:"Luzern"},{code:"NE",name:"Neuenburg"},{code:"NW",name:"Nidwalden"},{code:"OW",name:"Obwalden"},{code:"SG",name:"St. Gallen"},{code:"SH",name:"Schaffhausen"},{code:"SO",name:"Solothurn"},{code:"SZ",name:"Schwyz"},{code:"TG",name:"Thurgau"},{code:"TI",name:"Tessin"},{code:"UR",name:"Uri"},{code:"VD",name:"Waadt"},{code:"VS",name:"Wallis"},{code:"ZG",name:"Zug"},{code:"ZH",name:"Zürich"}],v=["Frau","Herr","Dr.","Dr. med.","Prof.","Prof. Dr.","Prof. Dr. med."],b=["Psychotherapeut","Psychologe","Psychiater","Facharzt für Psychiatrie","Facharzt für Psychotherapie","Coach","Berater","Sozialarbeiter","Klinischer Psychologe"],x=(N,O)=>{o(V=>({...V,[N]:O})),f&&h("")},E=()=>s.canton?s.first_name.trim()?s.last_name.trim()?s.designation?!0:(h("Bitte wählen Sie eine Berufsbezeichnung aus"),!1):(h("Bitte geben Sie den Nachnamen ein"),!1):(h("Bitte geben Sie den Vornamen ein"),!1):(h("Bitte wählen Sie einen Kanton aus"),!1),T=async N=>{if(N.preventDefault(),N.stopPropagation(),!!E()){u(!0),h("");try{console.log("🔧 TherapistCreateModal: Submitting form with data:",s);const O=await m.createTherapist({canton:s.canton,form_of_address:s.form_of_address,first_name:s.first_name,last_name:s.last_name,designation:s.designation,institution:s.institution||void 0});console.log("✅ TherapistCreateModal: Therapist created successfully:",O),t(O),e(),o({canton:r,form_of_address:"",first_name:"",last_name:"",designation:"",institution:""})}catch(O){console.error("❌ TherapistCreateModal: Error creating therapist:",O),h(O instanceof Error?O.message:"Fehler beim Speichern")}finally{u(!1)}}},C=()=>{l||(e(),h(""))};return n?Ax.createPortal(w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:w.jsxs("div",{className:"bg-slate-700 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[w.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-600",children:[w.jsx("h2",{className:"text-xl font-bold text-yellow-400",children:"Neuen Therapeuten hinzufügen"}),w.jsx("button",{onClick:C,disabled:l,className:"text-gray-400 hover:text-white transition-colors disabled:opacity-50",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"p-6",children:w.jsxs("form",{onSubmit:T,className:"space-y-4",children:[f&&w.jsx("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 text-red-300 px-4 py-3 rounded",children:f}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Kanton"}),w.jsx("select",{value:s.canton,onChange:N=>x("canton",N.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,required:!0,children:y.map(N=>w.jsx("option",{value:N.code,className:"bg-slate-600",children:N.code?`${N.code} - ${N.name}`:N.name},N.code))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Anrede"}),w.jsxs("select",{value:s.form_of_address,onChange:N=>x("form_of_address",N.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,children:[w.jsx("option",{value:"",className:"bg-slate-600",children:"Anrede auswählen (optional)"}),v.map(N=>w.jsx("option",{value:N,className:"bg-slate-600",children:N},N))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Vorname"}),w.jsx("input",{type:"text",value:s.first_name,onChange:N=>x("first_name",N.target.value),placeholder:"Vorname",className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,required:!0,maxLength:100})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Nachname"}),w.jsx("input",{type:"text",value:s.last_name,onChange:N=>x("last_name",N.target.value),placeholder:"Nachname",className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,required:!0,maxLength:100})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Berufsbezeichnung"}),w.jsxs("select",{value:s.designation,onChange:N=>x("designation",N.target.value),className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,required:!0,children:[w.jsx("option",{value:"",className:"bg-slate-600",children:"Berufsbezeichnung auswählen"}),b.map(N=>w.jsx("option",{value:N,className:"bg-slate-600",children:N},N))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-yellow-400 text-sm font-medium mb-2",children:"Institution (wenn vorhanden)"}),w.jsx("input",{type:"text",value:s.institution,onChange:N=>x("institution",N.target.value),placeholder:"z.B. Klinik, Tagesstruktur, Programm",className:"w-full px-3 py-2 bg-slate-600 border border-yellow-500 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500",disabled:l,maxLength:200})]}),w.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[w.jsx("button",{type:"button",onClick:C,disabled:l,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Abbrechen"}),w.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-black font-medium rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Speichern...":"Speichern"})]})]})})]})}),document.body):null},t3=({selectedTherapist:n,onTherapistSelect:e,canton:t="",disabled:r=!1})=>{const[s,o]=R.useState(""),[l,u]=R.useState([]),[f,h]=R.useState([]),[m,y]=R.useState(!1),[v,b]=R.useState(!1),[x,E]=R.useState(!1),[T,C]=R.useState(-1),N=new OE,O=R.useRef(null),V=R.useRef(null);R.useEffect(()=>{U()},[]),R.useEffect(()=>{let ue=l;if(t&&(ue=ue.filter(pe=>pe.canton===t||!pe.canton)),s.trim()){const pe=s.toLowerCase();ue=ue.filter(P=>P.first_name.toLowerCase().includes(pe)||P.last_name.toLowerCase().includes(pe)||P.institution&&P.institution.toLowerCase().includes(pe)||P.designation.toLowerCase().includes(pe))}h(ue),C(-1)},[l,s,t]),R.useEffect(()=>{n&&(o(N.formatTherapistDisplay(n)),y(!1))},[n]);const U=async()=>{try{E(!0),console.log("🔧 TherapistSelector: Loading therapists...");const ue=await N.getTherapists();console.log("✅ TherapistSelector: Loaded therapists:",ue),u(ue)}catch(ue){console.error("❌ TherapistSelector: Error loading therapists:",ue)}finally{E(!1)}},G=ue=>{const pe=ue.target.value;o(pe),n&&pe!==N.formatTherapistDisplay(n)&&e(null),y(!0)},Y=()=>{y(!0)},J=()=>{setTimeout(()=>{y(!1)},200)},le=ue=>{e(ue),o(N.formatTherapistDisplay(ue)),y(!1)},ke=ue=>{if(m)switch(ue.key){case"ArrowDown":ue.preventDefault(),C(pe=>pe<f.length-1?pe+1:pe);break;case"ArrowUp":ue.preventDefault(),C(pe=>pe>0?pe-1:-1);break;case"Enter":ue.preventDefault(),T>=0&&T<f.length&&le(f[T]);break;case"Escape":y(!1),C(-1);break}},ot=()=>{b(!0),y(!1)},Fe=ue=>{console.log("🔧 TherapistSelector: Handling newly created therapist:",ue),u(pe=>{const P=[ue,...pe];return console.log("✅ TherapistSelector: Updated therapists list:",P),P}),e(ue),o(N.formatTherapistDisplay(ue)),setTimeout(()=>{console.log("🔄 TherapistSelector: Reloading therapists from database..."),U()},1e3)},on=()=>{e(null),o(""),O.current?.focus()};return w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"relative",children:[w.jsx("input",{ref:O,type:"text",value:s,onChange:G,onFocus:Y,onBlur:J,onClick:Y,onKeyDown:ke,placeholder:"Therapeut/in suchen oder klicken um zu erstellen...",disabled:r,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:text-gray-500"}),n&&!r&&w.jsx("button",{type:"button",onClick:on,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),x&&w.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"})})]}),m&&!r&&w.jsxs("div",{ref:V,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[w.jsxs("div",{onClick:ot,className:"px-4 py-3 cursor-pointer hover:bg-primary-50 border-b border-gray-200 flex items-center space-x-2 text-primary-600 font-medium",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),w.jsx("span",{children:"Neuen Therapeuten hinzufügen"})]}),f.length===0&&s?w.jsxs("div",{className:"px-4 py-3 text-gray-500 text-sm",children:['Keine Therapeuten gefunden für "',s,'"',l.length>0&&w.jsxs("div",{className:"text-xs mt-1",children:["(",l.length," Therapeuten insgesamt verfügbar)"]})]}):f.length===0&&l.length===0?w.jsx("div",{className:"px-4 py-3 text-gray-500 text-sm",children:"Noch keine Therapeuten vorhanden. Erstellen Sie den ersten Therapeuten."}):f.length===0?w.jsxs("div",{className:"px-4 py-3 text-gray-500 text-sm",children:["Keine Therapeuten für diesen Kanton gefunden",l.length>0&&w.jsxs("div",{className:"text-xs mt-1",children:["(",l.length," Therapeuten insgesamt verfügbar)"]})]}):f.map((ue,pe)=>w.jsxs("div",{onClick:()=>le(ue),className:`px-4 py-3 cursor-pointer hover:bg-gray-50 ${pe===T?"bg-primary-50":""} ${n?.id===ue.id?"bg-primary-100":""}`,children:[w.jsx("div",{className:"font-medium text-gray-900",children:N.formatTherapistName(ue)}),w.jsxs("div",{className:"text-sm text-gray-600",children:[ue.designation,ue.institution&&` • ${ue.institution}`,ue.canton&&` • ${ue.canton}`]})]},ue.id))]}),w.jsx(e3,{isOpen:v,onClose:()=>b(!1),onTherapistCreated:Fe,preselectedCanton:t})]})},n3=({onSubmit:n,onCancel:e,isLoading:t})=>{const[r,s]=R.useState(""),[o,l]=R.useState(""),[u,f]=R.useState(1),[h,m]=R.useState(""),[y,v]=R.useState(null),[b,x]=R.useState([]),[E,T]=R.useState(!1),C=new Gx,N=[{code:"",name:"Kanton auswählen"},{code:"AG",name:"Aargau"},{code:"AI",name:"Appenzell Innerrhoden"},{code:"AR",name:"Appenzell Ausserrhoden"},{code:"BE",name:"Bern"},{code:"BL",name:"Basel-Landschaft"},{code:"BS",name:"Basel-Stadt"},{code:"FR",name:"Freiburg"},{code:"GE",name:"Genf"},{code:"GL",name:"Glarus"},{code:"GR",name:"Graubünden"},{code:"JU",name:"Jura"},{code:"LU",name:"Luzern"},{code:"NE",name:"Neuenburg"},{code:"NW",name:"Nidwalden"},{code:"OW",name:"Obwalden"},{code:"SG",name:"St. Gallen"},{code:"SH",name:"Schaffhausen"},{code:"SO",name:"Solothurn"},{code:"SZ",name:"Schwyz"},{code:"TG",name:"Thurgau"},{code:"TI",name:"Tessin"},{code:"UR",name:"Uri"},{code:"VD",name:"Waadt"},{code:"VS",name:"Wallis"},{code:"ZG",name:"Zug"},{code:"ZH",name:"Zürich"}];R.useEffect(()=>{O()},[]);const O=async()=>{try{const U=await C.getCategories();x(U)}catch(U){console.error("Error loading categories:",U)}},V=async(U,G=!0)=>{if(U.preventDefault(),u!==1&&!r.trim()){alert("Bitte Titel ausfüllen");return}if(!o.trim()){alert("Bitte Inhalt ausfüllen");return}if(!h){alert("Bitte Kanton auswählen");return}if(u===1&&!y){alert("Bitte wählen Sie einen Therapeuten für Ihre Erfahrung aus");return}T(!0);try{const J={title:u===1&&!r.trim()?"Erfahrung":r.trim(),content:o.trim(),category_id:u,canton:h,is_published:G,...y&&{therapist_id:y.id}};n&&await n(J),s(""),l(""),f(1),m(""),v(null)}catch(Y){console.error("Error submitting post:",Y),alert("Fehler beim Speichern des Beitrags")}finally{T(!1)}};return w.jsx("div",{children:w.jsxs("form",{onSubmit:U=>V(U,!0),children:[u!==1&&w.jsxs("div",{className:"mb-4",children:[w.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titel *"}),w.jsx("input",{type:"text",id:"title",value:r,onChange:U=>s(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Gib deinem Beitrag einen aussagekräftigen Titel...",maxLength:255,required:!0})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategorie *"}),w.jsx("select",{id:"category",value:u,onChange:U=>f(Number(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:b.map(U=>w.jsx("option",{value:U.id,children:U.name_de},U.id))})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"canton",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kanton *"}),w.jsx("select",{id:"canton",value:h,onChange:U=>m(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:N.map(U=>w.jsx("option",{value:U.code,children:U.name},U.code))})]})]}),u===1&&w.jsxs("div",{className:"mb-4",children:[w.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4",children:w.jsxs("div",{className:"flex",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),w.jsx("div",{className:"ml-3",children:w.jsx("p",{className:"text-sm text-blue-800",children:"Der Titel wird automatisch basierend auf dem ausgewählten Therapeuten erstellt."})})]})}),w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Therapeut/in *"}),w.jsx(t3,{selectedTherapist:y,onTherapistSelect:v,canton:h}),w.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Wählen Sie den Therapeuten/die Therapeutin aus, mit dem/der Sie eine Erfahrung gemacht haben."})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Inhalt *"}),w.jsx(ME,{content:o,onChange:l,placeholder:"Teile deine Gedanken, Erfahrungen oder Fragen mit der Community...",minHeight:"200px"}),w.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o.replace(/<[^>]*>/g,"").length," Zeichen (ohne HTML)"]})]}),w.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e&&w.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:E,children:"Abbrechen"}),w.jsx("button",{type:"button",onClick:U=>V(U,!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:E,children:"Als Entwurf speichern"}),w.jsx("button",{type:"submit",disabled:E||t,className:"px-6 py-3 text-base font-bold text-white bg-primary-600 border border-transparent rounded-md shadow-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 transition-all",style:{backgroundColor:"#0284c7",fontSize:"16px",fontWeight:"bold",padding:"12px 24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:E||t?"📤 Wird veröffentlicht...":"🚀 Veröffentlichen"})]})]})})},r3=({showCreatePostDialog:n=!1,onCreatePostDialogClose:e=()=>{}})=>{const[t,r]=R.useState(""),{posts:s,categories:o,loading:l,filters:u,loadPosts:f,createPost:h,setFilters:m,searchPosts:y,loadCategories:v}=Bi();R.useEffect(()=>{f(),v()},[]);const b=async()=>{if(!t.trim()){f();return}try{await y(t.trim())}catch(C){console.error("Error searching posts:",C)}},x=async C=>{try{console.log("🚀 ForumView: Attempting to create post with data:",C),await h(C),console.log("✅ ForumView: Post created successfully"),e(),await f()}catch(N){throw console.error("❌ ForumView: Error creating post:",N),alert("Fehler beim Erstellen des Beitrags: "+(N instanceof Error?N.message:"Unbekannter Fehler")),N}},E=C=>{m({category:C||void 0}),f({category:C||void 0})},T=C=>({1:"bg-blue-100 text-blue-800 border-blue-200",2:"bg-green-100 text-green-800 border-green-200",3:"bg-purple-100 text-purple-800 border-purple-200",4:"bg-red-100 text-red-800 border-red-200",5:"bg-yellow-100 text-yellow-800 border-yellow-200"})[C]||"bg-gray-100 text-gray-800 border-gray-200";return w.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("h1",{className:"text-3xl font-headline font-bold text-gray-900",children:"Forum"}),w.jsx("p",{className:"text-gray-600 mt-2 max-w-2xl mx-auto",children:"Teile deine Erfahrungen und finde Unterstützung in der Community. Behandle andere respektvoll und teile keine persönlichen Daten."})]}),w.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[w.jsxs("div",{className:"relative flex-1",children:[w.jsx("input",{type:"text",placeholder:"Suche in Beiträgen...",value:t,onChange:C=>r(C.target.value),onKeyPress:C=>C.key==="Enter"&&b(),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500"}),w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),w.jsx("button",{onClick:b,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md transition-colors",children:"Suchen"})]}),w.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[w.jsx("button",{onClick:()=>E(null),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${u.category?"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200":"bg-primary-100 text-primary-800 border border-primary-200"}`,children:"Alle Kategorien"}),o.map(C=>w.jsx("button",{onClick:()=>E(C.id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors border ${u.category===C.id?T(C.id):"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200"}`,children:C.name_de},C.id))]})]}),n&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:w.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[w.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("h2",{className:"text-xl font-headline font-bold text-gray-900",children:"Neuen Beitrag erstellen"}),w.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),w.jsx("div",{className:"p-6",children:w.jsx(n3,{onSubmit:x,onCancel:e})})]})}),w.jsxs("div",{children:[l?w.jsx("div",{className:"flex items-center justify-center py-12",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.length===0?w.jsxs("div",{className:"text-center py-12",children:[w.jsx("div",{className:"text-gray-400 mb-4",children:w.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Keine Beiträge gefunden"}),w.jsx("p",{className:"text-gray-500 mt-1",children:u.category?"In dieser Kategorie wurden noch keine Beiträge erstellt.":"Es wurden noch keine Beiträge erstellt."})]}):w.jsx("div",{className:"space-y-4",children:s.map(C=>w.jsx(rM,{post:C},C.id))}),s.length>0&&w.jsx("div",{className:"text-center mt-8",children:w.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-3 rounded-md font-medium transition-colors",children:"Weitere Beiträge laden"})})]})]})},Gc=new Qu,NE=(n,e)=>e.parent_comment_id?n.map(t=>t.id===e.parent_comment_id?{...t,replies:t.replies?[e,...t.replies]:[e]}:t.replies?{...t,replies:NE(t.replies,e)}:t):[e,...n],RE=(n,e,t)=>n.map(r=>r.id===e?{...r,...t}:r.replies?{...r,replies:RE(r.replies,e,t)}:r),DE=(n,e)=>n.filter(t=>t.id!==e).map(t=>t.replies?{...t,replies:DE(t.replies,e)}:t),jE=n=>n.reduce((e,t)=>{let r=1;return t.replies&&(r+=jE(t.replies)),e+r},0),LE=Wu((n,e)=>({comments:{},loading:{},loadComments:async t=>{const r=t.toString();try{n(o=>({loading:{...o.loading,[r]:!0}}));const s=await Gc.getComments(t);n(o=>({comments:{...o.comments,[r]:s}}))}catch(s){throw console.error("Error loading comments:",s),s}finally{n(s=>({loading:{...s.loading,[r]:!1}}))}},addComment:(t,r)=>{const s=t.toString();n(o=>{const l=o.comments[s]||[],u=NE(l,r);return{comments:{...o.comments,[s]:u}}})},addCommentOptimistic:(t,r)=>{e().addComment(t,r)},updateComment:(t,r,s)=>{const o=t.toString();n(l=>{const u=l.comments[o]||[],f=RE(u,r,s);return{comments:{...l.comments,[o]:f}}})},deleteComment:(t,r)=>{const s=t.toString();n(o=>{const l=o.comments[s]||[],u=DE(l,r);return{comments:{...o.comments,[s]:u}}})},createComment:async t=>{try{const r=await Gc.createComment(t);return e().addComment(t.post_id,r),r}catch(r){throw console.error("Error creating comment:",r),r}},editComment:async(t,r)=>{try{await Gc.updateComment(t,r);const{comments:s}=e();for(const[o,l]of Object.entries(s)){const u=parseInt(o);e().updateComment(u,t,{content:r,is_edited:!0,updated_at:new Date().toISOString()})}}catch(s){throw console.error("Error editing comment:",s),s}},removeComment:async t=>{try{await Gc.deleteComment(t);const{comments:r}=e();for(const[s,o]of Object.entries(r)){const l=parseInt(s);e().deleteComment(l,t)}}catch(r){throw console.error("Error removing comment:",r),r}},getCommentCount:t=>{const r=t.toString(),s=e().comments[r]||[];return jE(s)}})),i3=n=>{const{addComment:e,updateComment:t,deleteComment:r}=LE();R.useEffect(()=>{const s=de.channel(`comments:post_id=eq.${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments",filter:`post_id=eq.${n}`},async o=>{const l=o.new,{data:u}=await de.from("comments").select(`
              *,
              users!inner(id, username, avatar_url, role)
            `).eq("id",l.id).single();u&&e(n,u)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"comments",filter:`post_id=eq.${n}`},o=>{const l=o.new;t(n,l.id,l)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"comments",filter:`post_id=eq.${n}`},o=>{const l=o.old;r(n,l.id)}).subscribe();return()=>{de.removeChannel(s)}},[n,e,t,r])},zE=({comment:n,onReply:e,onUpdate:t,depth:r=0})=>{const[s,o]=R.useState(!1),[l,u]=R.useState(n.content),[f,h]=R.useState(!0),[m,y]=R.useState(!1),v=new Qu,b=O=>new Date(O).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=async()=>{if(l.trim()){y(!0);try{await v.updateComment(n.id,l.trim()),o(!1),t()}catch(O){console.error("Error updating comment:",O),alert("Fehler beim Speichern des Kommentars")}finally{y(!1)}}},E=async()=>{if(confirm("Kommentar wirklich löschen?"))try{await v.deleteComment(n.id),t()}catch(O){console.error("Error deleting comment:",O),alert("Fehler beim Löschen des Kommentars")}},T=()=>{const O=window.getSelection()?.toString();O?e(n.id,O.trim()):e(n.id)},C=O=>w.jsx("div",{className:"border-l-4 border-gray-300 pl-3 mb-3 bg-gray-50 p-2 rounded-r",children:w.jsxs("div",{className:"text-sm text-gray-600 italic",children:['"',O,'"']})}),N=Math.min(r*2,8);return w.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 ${r>0?`ml-${N}`:""}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-primary-600 font-semibold text-xs",children:n.users?.username?.charAt(0)?.toUpperCase()||"?"})}),w.jsxs("div",{children:[w.jsx("span",{className:"font-medium text-sm text-gray-900",children:n.users?.username}),w.jsx("span",{className:"text-xs text-gray-500 ml-2",children:b(n.created_at)}),n.updated_at&&n.updated_at!==n.created_at&&w.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(bearbeitet)"})]})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("button",{onClick:T,className:"text-gray-400 hover:text-primary-600 transition-colors p-1",title:"Zitieren",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("button",{onClick:()=>o(!0),className:"text-gray-400 hover:text-primary-600 transition-colors p-1",title:"Bearbeiten",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),w.jsx("button",{onClick:E,className:"text-gray-400 hover:text-red-600 transition-colors p-1",title:"Löschen",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),n.quoted_text&&C(n.quoted_text),w.jsx("div",{className:"mb-3",children:s?w.jsxs("div",{children:[w.jsx("textarea",{value:l,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500 resize-vertical",rows:4}),w.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[w.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",disabled:m,children:"Abbrechen"}),w.jsx("button",{onClick:x,className:"px-3 py-1 text-sm bg-primary-600 text-white rounded hover:bg-primary-700 disabled:opacity-50",disabled:m||!l.trim(),children:m?"Speichern...":"Speichern"})]})]}):w.jsx("div",{className:"whitespace-pre-wrap text-gray-700 text-sm leading-relaxed",children:n.content})}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("button",{onClick:()=>e(n.id),className:"text-xs text-gray-500 hover:text-primary-600 transition-colors",children:"Antworten"}),n.replies&&n.replies.length>0&&w.jsx("button",{onClick:()=>h(!f),className:"text-xs text-gray-500 hover:text-primary-600 transition-colors",children:f?"Antworten ausblenden":`${n.replies.length} Antworten anzeigen`})]}),n.replies&&n.replies.length>0&&f&&w.jsx("div",{className:"mt-4 space-y-3",children:n.replies.map(O=>w.jsx(zE,{comment:O,onReply:e,onUpdate:t,depth:r+1},O.id))})]})},s3=({postId:n,parentCommentId:e,quotedText:t,onSubmit:r,onCommentAdded:s,onCancel:o,placeholder:l="Schreibe einen Kommentar..."})=>{const[u,f]=R.useState(""),[h,m]=R.useState(!1),[y,v]=R.useState(""),b=new Qu;R.useEffect(()=>{t&&v(t)},[t]);const x=async C=>{if(C.preventDefault(),!u.replace(/<[^>]*>/g,"").trim()){alert("Bitte gib einen Kommentar ein");return}m(!0);try{const O=await b.createComment({post_id:n,content:u.trim()});f(""),v(""),s&&s(O),r&&r()}catch(O){console.error("Error creating comment:",O),alert("Fehler beim Erstellen des Kommentars")}finally{m(!1)}},E=()=>{v("")},T=()=>y?w.jsx("div",{className:"border-l-4 border-primary-300 pl-3 mb-3 bg-primary-50 p-2 rounded-r",children:w.jsxs("div",{className:"flex items-start justify-between",children:[w.jsxs("div",{className:"text-sm text-gray-600 italic",children:['"',y,'"']}),w.jsx("button",{onClick:E,className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Zitat entfernen",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null;return w.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[w.jsxs("form",{onSubmit:x,children:[T(),w.jsx("div",{className:"relative",children:w.jsx(ME,{content:u,onChange:f,placeholder:l,minHeight:"120px"})}),w.jsxs("div",{className:"flex justify-between items-center mt-2",children:[w.jsxs("span",{className:"text-xs text-gray-500",children:[u.replace(/<[^>]*>/g,"").length," Zeichen (ohne HTML)"]}),w.jsxs("div",{className:"flex space-x-2",children:[o&&w.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",disabled:h,children:"Abbrechen"}),w.jsx("button",{type:"submit",disabled:h||!u.replace(/<[^>]*>/g,"").trim(),className:"px-6 py-2 text-sm font-bold bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-md",style:{backgroundColor:"#0284c7",fontWeight:"bold",boxShadow:"0 2px 4px -1px rgba(0, 0, 0, 0.1)"},children:h?"📤 Wird gesendet...":"💬 Kommentieren"})]})]})]}),w.jsx("div",{className:"mt-3 text-xs text-gray-500 border-t border-gray-100 pt-3",children:w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("span",{children:"💡 Tipp: Markiere Text um ihn zu zitieren"}),w.jsx("span",{children:"• Behandle andere respektvoll"}),w.jsx("span",{children:"• Teile keine persönlichen Daten"})]})})]})},o3=({postId:n})=>{const[e,t]=R.useState(!1),[r,s]=R.useState(""),{comments:o,loading:l,loadComments:u,createComment:f,getCommentCount:h}=LE(),m=o[n.toString()]||[],y=l[n.toString()]||!1,v=h(n);R.useEffect(()=>{u(n)},[n,u]);const b=async x=>{try{await f(x),t(!1)}catch(E){throw console.error("Error creating comment:",E),E}};return y?w.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:w.jsx("div",{className:"flex items-center justify-center py-8",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})}):w.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[w.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("h3",{className:"text-lg font-headline font-semibold text-gray-900",children:["Kommentare (",v,")"]}),w.jsxs("button",{onClick:()=>t(!e),className:"inline-flex items-center px-4 py-2 text-sm font-bold bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all transform hover:scale-105 shadow-md",style:{backgroundColor:"#0284c7",fontWeight:"bold",boxShadow:"0 2px 4px -1px rgba(0, 0, 0, 0.1)"},children:[w.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e?"❌ Abbrechen":"💬 Kommentar hinzufügen"]})]})}),e&&w.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:w.jsx(s3,{postId:n,quotedText:r,onCommentAdded:x=>{b({post_id:n,content:x.content,quoted_text:r})},onCancel:()=>{t(!1),s("")},placeholder:"Teile deine Gedanken zu diesem Beitrag..."})}),w.jsx("div",{className:"divide-y divide-gray-200",children:m.length===0?w.jsxs("div",{className:"text-center py-12 px-6",children:[w.jsx("div",{className:"text-gray-400 mb-4",children:w.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Noch keine Kommentare"}),w.jsx("p",{className:"text-gray-500 mb-4",children:"Sei die erste Person, die einen Kommentar zu diesem Beitrag hinterlässt!"}),w.jsx("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Ersten Kommentar schreiben"})]}):w.jsx("div",{className:"p-6 space-y-6",children:m.map(x=>w.jsx(zE,{comment:x,onReply:(E,T)=>{s(T||""),t(!0)},onUpdate:()=>u(n)},x.id))})}),m.length>0&&m.length>=10&&w.jsx("div",{className:"px-6 py-4 border-t border-gray-200 text-center",children:w.jsx("button",{className:"text-sm text-gray-600 hover:text-primary-600 transition-colors",children:"Weitere Kommentare laden..."})})]})},a3=()=>{const{id:n}=VC(),e=dm(),t=n?parseInt(n):null,{currentPost:r,loading:s,loadPost:o}=Bi();i3(t),R.useEffect(()=>{t&&o(t)},[t,o]);const l=f=>new Date(f).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=f=>({1:"bg-blue-100 text-blue-800 border-blue-200",2:"bg-green-100 text-green-800 border-green-200",3:"bg-purple-100 text-purple-800 border-purple-200",4:"bg-red-100 text-red-800 border-red-200",5:"bg-yellow-100 text-yellow-800 border-yellow-200"})[f]||"bg-gray-100 text-gray-800 border-gray-200";return s?w.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:w.jsx("div",{className:"flex items-center justify-center py-12",children:w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):!r&&!s?w.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:w.jsxs("div",{className:"text-center py-12",children:[w.jsx("div",{className:"text-red-400 mb-4",children:w.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.982 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Beitrag nicht gefunden"}),w.jsx("p",{className:"text-gray-500 mt-1",children:"Der angeforderte Beitrag existiert nicht oder wurde entfernt."}),w.jsx("button",{onClick:()=>e("/"),className:"mt-4 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md transition-colors",children:"Zurück zum Forum"})]})}):r?w.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[w.jsx("div",{className:"mb-6",children:w.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[w.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Zurück zum Forum"]})}),w.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[w.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[w.jsxs("div",{className:"flex items-start justify-between mb-3",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:w.jsx("span",{className:"text-primary-600 font-semibold",children:r.users?.username?.charAt(0)?.toUpperCase()||"?"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-medium text-gray-900",children:r.users?.username}),w.jsx("p",{className:"text-sm text-gray-500",children:l(r.created_at)})]})]}),w.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${u(r.category_id)}`,children:r.categories?.name_de})]}),w.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.canton&&w.jsxs("span",{className:"inline-flex items-center",children:[w.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.canton]}),r.designation&&w.jsxs("span",{className:"inline-flex items-center",children:[w.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.designation]})]})]}),w.jsxs("div",{className:"px-6 py-6",children:[w.jsx("h1",{className:"text-2xl font-headline font-bold text-gray-900 mb-6",children:Yx(r)}),w.jsx(Z4,{onTextSelect:()=>{},children:w.jsx("div",{className:"prose prose-gray max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:r.content}})})]}),w.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs("button",{className:"inline-flex items-center text-gray-600 hover:text-primary-600 transition-colors",children:[w.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),w.jsx("span",{className:"text-sm",children:"Hilfreich"})]}),w.jsxs("button",{className:"inline-flex items-center text-gray-600 hover:text-primary-600 transition-colors",children:[w.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),w.jsx("span",{className:"text-sm",children:"Teilen"})]})]}),w.jsx("div",{className:"text-sm text-gray-500"})]})})]}),w.jsx("div",{className:"mt-8",children:w.jsx(o3,{postId:parseInt(n)})})]}):null};function l3(){const[n,e]=R.useState(!1),{user:t,loading:r}=ul();WA(),JA(),R.useEffect(()=>{QA()},[]);const s=()=>{e(!0)};return r?w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),w.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?w.jsx(A_,{children:w.jsx(ZA,{onCreatePost:s,children:w.jsxs(s_,{children:[w.jsx(wp,{path:"/",element:w.jsx(r3,{showCreatePostDialog:n,onCreatePostDialogClose:()=>e(!1)})}),w.jsx(wp,{path:"/post/:id",element:w.jsx(a3,{})})]})})}):w.jsx(c3,{})}function c3(){const[n,e]=R.useState(""),[t,r]=R.useState(""),[s,o]=R.useState(!1),[l,u]=R.useState(!1),[f,h]=R.useState(""),{login:m,register:y}=ul(),v=async b=>{b.preventDefault(),o(!0),h("");try{l?(await y(n,t,n.split("@")[0]),h("Check your email for the confirmation link!")):await m(n,t)}catch(x){h(x instanceof Error?x.message:"An error occurred")}finally{o(!1)}};return w.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"max-w-md w-full space-y-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-headline font-bold text-center text-primary-600 mb-2",children:"Remy Forum"}),w.jsx("h2",{className:"text-2xl font-headline font-semibold text-center text-gray-900",children:l?"Create your account":"Sign in to your account"}),w.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"A safe space for psychotherapy patient experiences"})]}),w.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),w.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your email",value:n,onChange:b=>e(b.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),w.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your password",value:t,onChange:b=>r(b.target.value)})]}),f&&w.jsx("div",{className:`rounded-md p-4 ${f.includes("error")||f.includes("Error")?"bg-red-50 border border-red-200 text-red-700":"bg-green-50 border border-green-200 text-green-700"}`,children:f}),w.jsx("div",{children:w.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Loading...":l?"Sign Up":"Sign In"})}),w.jsx("div",{className:"text-center",children:w.jsx("button",{type:"button",onClick:()=>u(!l),className:"text-sm text-primary-600 hover:text-primary-500",children:l?"Already have an account? Sign In":"Need an account? Sign Up"})})]})]})})}pC.createRoot(document.getElementById("root")).render(w.jsx(R.StrictMode,{children:w.jsx(l3,{})}));
